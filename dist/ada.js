/*! adajs[Develop] 2.0.0 https://github.com/topolr/ada | https://github.com/topolr/ada/blob/master/LICENSE */
(function(global){var REACT_ELEMENT_TYPE,babelHelpers={};function _typeof(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?babelHelpers.typeof=_typeof=function(e){return typeof e}:babelHelpers.typeof=_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _createRawReactElement(e,r,t,n){REACT_ELEMENT_TYPE||(REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(r||0===a||(r={children:void 0}),r&&o)for(var i in o)void 0===r[i]&&(r[i]=o[i]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var l=new Array(a),s=0;s<a;s++)l[s]=arguments[s+3];r.children=l}return{$$typeof:REACT_ELEMENT_TYPE,type:e,key:void 0===t?null:""+t,ref:null,props:r,_owner:null}}function _asyncIterator(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var r=e[Symbol.asyncIterator];if(null!=r)return r.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")}function _AwaitValue(e){this.wrapped=e}function AsyncGenerator(e){var r,t;function n(r,t){try{var a=e[r](t),i=a.value,l=i instanceof babelHelpers.AwaitValue;Promise.resolve(l?i.wrapped:i).then(function(e){l?n("next",e):o(a.done?"return":"normal",e)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":r.resolve({value:o,done:!0});break;case"throw":r.reject(o);break;default:r.resolve({value:o,done:!1})}(r=r.next)?n(r.key,r.arg):t=null}this._invoke=function(e,o){return new Promise(function(a,i){var l={key:e,arg:o,resolve:a,reject:i,next:null};t?t=t.next=l:(r=t=l,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function _wrapAsyncGenerator(e){return function(){return new babelHelpers.AsyncGenerator(e.apply(this,arguments))}}function _awaitAsyncGenerator(e){return new babelHelpers.AwaitValue(e)}function _asyncGeneratorDelegate(e,r){var t={},n=!1;function o(t,o){return n=!0,o=new Promise(function(r){r(e[t](o))}),{done:!1,value:r(o)}}return"function"==typeof Symbol&&Symbol.iterator&&(t[Symbol.iterator]=function(){return this}),t.next=function(e){return n?(n=!1,e):o("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return o("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return o("return",e)}),t}function _asyncToGenerator(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var a=e.apply(r,t);function i(e,r){try{var t=a[e](r),i=t.value}catch(e){return void o(e)}t.done?n(i):Promise.resolve(i).then(l,s)}function l(e){i("next",e)}function s(e){i("throw",e)}l()})}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}function _defineEnumerableProperties(e,r){for(var t in r){(a=r[t]).configurable=a.enumerable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,t,a)}if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(r),o=0;o<n.length;o++){var a,i=n[o];(a=r[i]).configurable=a.enumerable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,i,a)}return e}function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),n=0;n<t.length;n++){var o=t[n],a=Object.getOwnPropertyDescriptor(r,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _extends(){return babelHelpers.extends=_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_extends.apply(this,arguments)}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){babelHelpers.defineProperty(e,r,t[r])})}return e}function _get(e,r,t){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,r);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:_get(o,r,t)}if("value"in n)return n.value;var a=n.get;return void 0!==a?a.call(t):void 0}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}function _inheritsLoose(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function _gPO(e){return(_gPO=Object.getPrototypeOf||function(e){return e.__proto__})(e)}function _sPO(e,r){return(_sPO=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function _construct(e,r,t){return(_construct="object"==typeof Reflect&&Reflect.construct||function(e,r,t){var n=[null];return n.push.apply(n,r),_sPO(new(e.bind.apply(e,n)),t.prototype)})(e,r,t)}function _wrapNativeSuper(e){var r="function"==typeof Map?new Map:void 0;return babelHelpers.wrapNativeSuper=_wrapNativeSuper=function(e){if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_sPO(t,_sPO(function(){return _construct(e,arguments,_gPO(this).constructor)},e))},_wrapNativeSuper(e)}function _instanceof(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}function _newArrowCheck(e,r){if(e!==r)throw new TypeError("Cannot instantiate an arrow function")}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _objectWithoutProperties(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,r){return!r||"object"!=typeof r&&"function"!=typeof r?babelHelpers.assertThisInitialized(e):r}function _set(e,r,t,n){var o=Object.getOwnPropertyDescriptor(e,r);if(void 0===o){var a=Object.getPrototypeOf(e);null!==a&&_set(a,r,t,n)}else if("value"in o&&o.writable)o.value=t;else{var i=o.set;void 0!==i&&i.call(n,t)}return t}function _taggedTemplateLiteral(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}function _taggedTemplateLiteralLoose(e,r){return r||(r=e.slice(0)),e.raw=r,e}function _temporalRef(e,r){if(e===babelHelpers.temporalUndefined)throw new ReferenceError(r+" is not defined - temporal dead zone");return e}function _readOnlyError(e){throw new Error('"'+e+'" is read-only')}function _classNameTDZError(e){throw new Error('Class "'+e+'" cannot be referenced in computed property keys.')}function _slicedToArray(e,r){return babelHelpers.arrayWithHoles(e)||babelHelpers.iterableToArrayLimit(e,r)||babelHelpers.nonIterableRest()}function _slicedToArrayLoose(e,r){return babelHelpers.arrayWithHoles(e)||babelHelpers.iterableToArrayLimitLoose(e,r)||babelHelpers.nonIterableRest()}function _toArray(e){return babelHelpers.arrayWithHoles(e)||babelHelpers.iterableToArray(e)||babelHelpers.nonIterableRest()}function _toConsumableArray(e){return babelHelpers.arrayWithoutHoles(e)||babelHelpers.iterableToArray(e)||babelHelpers.nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}function _arrayWithoutHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _iterableToArrayLimit(e,r){var t=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return t}function _iterableToArrayLimitLoose(e,r){for(var t,n=[],o=e[Symbol.iterator]();!(t=o.next()).done&&(n.push(t.value),!r||n.length!==r););return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _skipFirstGeneratorNext(e){return function(){var r=e.apply(this,arguments);return r.next(),r}}function _toPropertyKey(e){return"symbol"==typeof e?e:String(e)}function _initializerWarningHelper(e,r){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and set to use loose mode. To use proposal-class-properties in spec mode with decorators, wait for the next major version of decorators in stage 2.")}function _initializerDefineProperty(e,r,t,n){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function _applyDecoratedDescriptor(e,r,t,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce(function(t,n){return n(e,r,t)||t},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}babelHelpers.typeof=_typeof,babelHelpers.jsx=_createRawReactElement,babelHelpers.asyncIterator=_asyncIterator,babelHelpers.AwaitValue=_AwaitValue,"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)},babelHelpers.AsyncGenerator=AsyncGenerator,babelHelpers.wrapAsyncGenerator=_wrapAsyncGenerator,babelHelpers.awaitAsyncGenerator=_awaitAsyncGenerator,babelHelpers.asyncGeneratorDelegate=_asyncGeneratorDelegate,babelHelpers.asyncToGenerator=_asyncToGenerator,babelHelpers.classCallCheck=_classCallCheck,babelHelpers.createClass=_createClass,babelHelpers.defineEnumerableProperties=_defineEnumerableProperties,babelHelpers.defaults=_defaults,babelHelpers.defineProperty=_defineProperty,babelHelpers.extends=_extends,babelHelpers.objectSpread=_objectSpread,babelHelpers.get=_get,babelHelpers.inherits=_inherits,babelHelpers.inheritsLoose=_inheritsLoose,babelHelpers.wrapNativeSuper=_wrapNativeSuper,babelHelpers.instanceof=_instanceof,babelHelpers.interopRequireDefault=_interopRequireDefault,babelHelpers.interopRequireWildcard=_interopRequireWildcard,babelHelpers.newArrowCheck=_newArrowCheck,babelHelpers.objectDestructuringEmpty=_objectDestructuringEmpty,babelHelpers.objectWithoutProperties=_objectWithoutProperties,babelHelpers.assertThisInitialized=_assertThisInitialized,babelHelpers.possibleConstructorReturn=_possibleConstructorReturn,babelHelpers.set=_set,babelHelpers.taggedTemplateLiteral=_taggedTemplateLiteral,babelHelpers.taggedTemplateLiteralLoose=_taggedTemplateLiteralLoose,babelHelpers.temporalRef=_temporalRef,babelHelpers.readOnlyError=_readOnlyError,babelHelpers.classNameTDZError=_classNameTDZError,babelHelpers.temporalUndefined={},babelHelpers.slicedToArray=_slicedToArray,babelHelpers.slicedToArrayLoose=_slicedToArrayLoose,babelHelpers.toArray=_toArray,babelHelpers.toConsumableArray=_toConsumableArray,babelHelpers.arrayWithoutHoles=_arrayWithoutHoles,babelHelpers.arrayWithHoles=_arrayWithoutHoles,babelHelpers.iterableToArray=_iterableToArray,babelHelpers.iterableToArrayLimit=_iterableToArrayLimit,babelHelpers.iterableToArrayLimitLoose=_iterableToArrayLimitLoose,babelHelpers.nonIterableSpread=_nonIterableSpread,babelHelpers.nonIterableRest=_nonIterableRest,babelHelpers.skipFirstGeneratorNext=_skipFirstGeneratorNext,babelHelpers.toPropertyKey=_toPropertyKey,babelHelpers.initializerWarningHelper=_initializerWarningHelper,babelHelpers.initializerDefineProperty=_initializerDefineProperty,babelHelpers.applyDecoratedDescriptor=_applyDecoratedDescriptor;global.babelHelpers=babelHelpers;})(window);(function (map,moduleName) {var Installed={};var requireModule = function (index) {if (Installed[index]) {return Installed[index].exports;}var module = Installed[index] = {exports: {}};map[index].call(module.exports, module, module.exports, requireModule,window.babelHelpers);return module.exports;};var mod=requireModule(map.length-1);window&&window.Ada.installModule(moduleName,mod);})([function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ajax=ajax,exports.get=get,exports.post=post,exports.default=void 0;var _util=babelHelpers.interopRequireDefault(require(9)),EVENTYPES=["readystatechange","loadstart","progress","abort","error","load","timeout","loadend"],request=function e(t){var o=this,r=t.data,a=void 0===r?{}:r,s=t.body,i=void 0===s?"":s,n=t.url,d=void 0===n?"":n,u=t.method,l=void 0===u?"post":u,p=t.dataType,v=void 0===p?"text":p,h=t.async,c=void 0===h||h,f=t.timeout,x=void 0===f?3e6:f,y=t.headers,g=void 0===y?{}:y,j=t.events,q=void 0===j?{}:j,m=t.mimeType,_=void 0===m?"":m,b=t.encodeurl,E=void 0!==b&&b;babelHelpers.classCallCheck(this,e),this.option=arguments[0];var T=new XMLHttpRequest;if(this._xhr=T,_&&T.overrideMimeType(_),!i)if("get"===l){var H=_util.default.queryString(a);d+=-1!==d.indexOf("?")?""===H?"":"&"+H:""===H?"":"?"+H}else a=_util.default.postData(a,E);for(var R in T.open(l,d,c),c&&(T.responseType="json"===v?"text":v,T.timeout=x),EVENTYPES.forEach(function(e){T.addEventListener(e,function(e){var t=q[e.type];t&&t.call(o,e)},!1)}),T.setRequestHeader("X-Requested-With","XMLHttpRequest"),g)T.setRequestHeader(R,g[R]);"post"===l&&(E?T.setRequestHeader("Content-type","application/x-www-form-urlencoded"):T.setRequestHeader("Content-type","application/json")),T.send(i||a)};function ajax(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,o){e.events=Object.assign({error:function(e){o(e)},load:function(r){var a=this._xhr.status;if(a>=200&&a<300||304===a||0===a){var s=this._xhr.response;if("json"===this.option.dataType)try{s=JSON.parse(this._xhr.responseText)}catch(r){throw Error("[topolr] ajax unvaliable json string,url is '"+e.url+"' "+r)}t(s)}else o(r)}},e.events),new request(e)})}function get(e){return ajax({url:e,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},method:"get"})}function post(e){return ajax({url:e,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},method:"post",dataType:"json",encodeurl:arguments.length>2?arguments[2]:void 0})}var _default=request;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewConnector=exports.BondViewGroup=exports.StaticViewGroup=exports.ViewGroup=exports.View=void 0;var _metadata=babelHelpers.interopRequireDefault(require(11)),_ddm=babelHelpers.interopRequireDefault(require(6)),_util=babelHelpers.interopRequireDefault(require(9)),_factory=babelHelpers.interopRequireDefault(require(4)),_const=require(7),_macros2=babelHelpers.interopRequireDefault(require(12)),_dataset=require(3),_log=babelHelpers.interopRequireDefault(require(13));function _addChild(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.name,n=void 0===i?"":i,r=t.parameter,s=void 0===r?{}:r,o=t.container,a=void 0===o?null:o,l=t.attrs,u=void 0===l?{}:l,d=arguments.length>2?arguments[2]:void 0,h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(d.isRemoved())return Promise.reject();a||(a=window.document.body);var c=document.createElement("div");if(c.setAttribute("data-module","out:".concat(d.getId())),Reflect.ownKeys(u).forEach(function(e){return c.setAttribute(e,u[e])}),h&&d.getDDMContainer().contains(a))throw Error("[ada] BondViewGroup can not append child in the DDM container element");return a.appendChild(c),_factory.default.getViewInstance({viewClass:e,parent:d,name:n,dom:c,useProps:[]}).then(function(e){return e.isRemoved()?Promise.reject():(_util.default.setProp(e,_const.OUTERVIEW,!0),e.oncreated(),e.update(s).then(function(){return d.getChildren().push(e),d.onchildadded&&d.onchildadded(e),e.onready(),e}))})}var ViewEvent=function(){function e(t,i,n){babelHelpers.classCallCheck(this,e),this.target=t,this.data=n,this.type=i,this._goon=!0,this.currentTarget=null}return babelHelpers.createClass(e,[{key:"stopPropagation",value:function(){this._goon=!1}}]),e}(),BaseView=function(){function e(t){var i=this,n=t.parent,r=void 0===n?null:n,s=t.dom,o=void 0===s?window.document.body:s,a=t.info,l=void 0===a?{}:a,u=t.name,d=void 0===u?"":u,h=t.useProps,c=void 0===h?[]:h;babelHelpers.classCallCheck(this,e),_util.default.setProp(this,_const.IDNAME,_util.default.randomid(10)),_util.default.setProp(this,_const.PARENTVIEWTAG,r),_util.default.setProp(this,_const.ELEMENTTAG,o),_util.default.setProp(this,_const.ISREMOVED,!1),_util.default.setProp(this,_const.PREREMOVED,!1),_util.default.setProp(this,_const.VIEWINFO,l),_util.default.setProp(this,_const.VIEWNAME,d),_util.default.setProp(this,_const.USEPROPS,c),l.className&&_util.default.setProp(this,_const.CLASSNAME,l.className),_util.default.setProp(this,_const.DDMTAG,new _ddm.default({id:this.getId(),container:this.getDDMContainer(),templateStr:_util.default.parseCustomTag(l.template||"",this.tags?this.tags():{}),binders:function(e){var t=e.method,n=e.parameters,r=(i[_const.BINDERS]||{})[t];r&&i[r]&&i[r](n)},option:{tags:this.tags()},macro:this._macros()}))}return babelHelpers.createClass(e,[{key:"getName",value:function(){return this[_const.VIEWNAME]}},{key:"oncreated",value:function(){}},{key:"onready",value:function(){}},{key:"onunload",value:function(){}},{key:"getId",value:function(){return this[_const.IDNAME]}},{key:"getElement",value:function(){return this[_const.ELEMENTTAG]}},{key:"getParent",value:function(){return this[_const.PARENTVIEWTAG]}},{key:"getDDMContainer",value:function(){return this[_const.ELEMENTTAG]}},{key:"isRemoved",value:function(){return!0===this[_const.ISREMOVED]}},{key:"getThisClassName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.isRemoved())return null;var t=this[_const.CLASSNAME];return t?e?"".concat(t,"-").concat(e):t:e}},{key:"tags",value:function(){return{}}},{key:"getDDM",value:function(){return this[_const.DDMTAG]}},{key:"getDataSet",value:function(){return null}},{key:"_getParentUseProps",value:function(){return this[_const.USEPROPS]}},{key:"_getChangedProps",value:function(){return[]}},{key:"_getUsedProps",value:function(){return this.getDDM().getUseProps()}},{key:"_refresh",value:function(){var e=this;return this.isRemoved()?Promise.resolve():_util.default.queue(this.getDDM().modules().map(function(t){return function(){var i=t.element()[_const.VIEWTAG],n=t.getAttributes(),r=n.type,s=n.parameter||{},o=n.name||"",a=n.useProps||[];return!i||i.constructor!==r||i.isRemoved()||i.getName()!==o?(i&&!i.isRemoved()&&i._remove(),_factory.default.getViewInstance({viewClass:r,parent:e,dom:t.element(),name:o,useProps:a}).then(function(t){if(!t.isRemoved())return t.oncreated(),t.update(s).then(function(){return e.onchildadded&&e.onchildadded(t),t.onready&&t.onready(),t})})):(i&&(_util.default.isChanges(e._getChangedProps(),i._getParentUseProps())?(_log.default.info("[",i[_const.CLASSNAME],"] => render from parent"),i.update(s)):_log.default.info("[",i[_const.CLASSNAME],"] => no render from parent,the props that child used from parent have not changed")),Promise.resolve(i))}})).then(function(t){e.isRemoved()||(e[_const.CHILDRENTAG]=babelHelpers.toConsumableArray(t).filter(function(e){return void 0!==e}))})}},{key:"_macros",value:function(){return{}}},{key:"_remove",value:function(){var e=this;if(!this.isRemoved()){var t=this.getParent();t&&!t.isRemoved()&&(t[_const.CHILDRENTAG].splice(t[_const.CHILDRENTAG].indexOf(this),1),!0!==this[_const.PREREMOVED]&&t.onchildremoved&&t.onchildremoved(this)),this.removeAllChild&&this.removeAllChild(),this.onunload(),this.getThisClassName()&&this.getElement().classList.remove(this.getThisClassName()),this.getElement().innerHTML="",this.getDataSet()&&this.getDataSet()._remove(),Reflect.deleteProperty(this.getElement(),_const.VIEWTAG),Reflect.ownKeys(this).forEach(function(t){e[t]=null}),this[_const.ISREMOVED]=!0}}},{key:"_clean",value:function(){var e=this;if(this[_const.ISREMOVED]=!0,this.getParent()){var t=this.getParent().getChildren(),i=t.indexOf(this);-1!==i&&t.splice(i,1)}this.onunload&&this.onunload(),Reflect.ownKeys(this).forEach(function(t){t!==_const.ISREMOVED&&(e[t]=null)})}}]),e}(),ViewConnector=function(e){function t(e){var i;babelHelpers.classCallCheck(this,t),i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),_util.default.setProp(babelHelpers.assertThisInitialized(i),_const.CHILDRENTAG,[]),_util.default.setProp(babelHelpers.assertThisInitialized(i),_const.CONNECTS,[]),_util.default.setProp(babelHelpers.assertThisInitialized(i),_const.CHANGEPROPS,[]);var n={};return i.setContextDataSets(function(e,t,r){var s={};_util.default.isFunction(t)&&(t={service:t,dataset:_dataset.DataSet});var o=_util.default.getDataSetFromParent(babelHelpers.assertThisInitialized(i),t);o&&(i[_const.CONNECTS].push(o),s=o._addListener(babelHelpers.assertThisInitialized(i),e,r)),n[e]=s}),_util.default.setProp(babelHelpers.assertThisInitialized(i),_const.CONNECTSTATE,i.defaultData(n)),i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"defaultData",value:function(e){}},{key:"setContextDataSets",value:function(e){}},{key:"onconnectupdate",value:function(e,t){return e}},{key:"getCurrentState",value:function(){return this[_const.CONNECTSTATE]}},{key:"update",value:function(){return this.isRemoved()?Promise.reject():this.getDDM().isRendered()?(console.warn("View should not pass data to a ViewConnector,ViewConnector should connect the View DataSet to get the data instead."),Promise.resolve()):this._render()}},{key:"_render",value:function(){return this.isRemoved()?Promise.reject():(_log.default.info("=> [",this[_const.CLASSNAME]||this.getName(),"]"),this.getDDM().render(this.getCurrentState()),this._refresh())}},{key:"_macros",value:function(){return _macros2.default}},{key:"_remove",value:function(){var e=this;this[_const.CONNECTS].forEach(function(t){return t._removeListener(e)}),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_remove",this).call(this)}},{key:"_getChangedProps",value:function(){return this[_const.CHANGEPROPS]}}]),t}(BaseView);exports.ViewConnector=ViewConnector;var View=function(e){function t(e){var i;return babelHelpers.classCallCheck(this,t),i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),_util.default.setProp(babelHelpers.assertThisInitialized(i),_const.BINDERS,_metadata.default.getMetadataExtends("binder",i.constructor.prototype)),_util.default.setProp(babelHelpers.assertThisInitialized(i),_const.SUBSCRIBE,_metadata.default.getMetadataExtends("subscribe",i.constructor.prototype)),_util.default.setProp(babelHelpers.assertThisInitialized(i),_const.HANDLERS,_metadata.default.getMetadata("handler",i.constructor.prototype)),_util.default.setProp(babelHelpers.assertThisInitialized(i),_const.GROUPFUL,Reflect.ownKeys(i._macros()).length>0),i[_const.VIEWINFO].dataset&&_util.default.setProp(babelHelpers.assertThisInitialized(i),_const.DATASET,_dataset.DataSetHelper.getDataSet(i[_const.VIEWINFO].dataset,babelHelpers.assertThisInitialized(i))),i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onbeforeupdate",value:function(){}},{key:"onupdated",value:function(){}},{key:"getDataSet",value:function(){return this[_const.DATASET]}},{key:"triggerEvent",value:function(e){if(!this.isRemoved()){e.currentTarget=this;var t=this[_const.HANDLERS];return!t||!t[e.type]||this[t[e.type]](e)}}},{key:"dispatchEvent",value:function(e,t){var i=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.isRemoved()){var r=new ViewEvent(this,e,t);if(!0===n)for(var s=this;s&&(s.triggerEvent(r),r._goon);)s=s.getParent();else this.triggerEvent(r),this.isRemoved()||r._goon&&(this instanceof ViewGroup||this instanceof StaticViewGroup)&&this.getChildren().forEach(function(n){if(i.isRemoved())return!1;n.dispatchEvent(e,t,!1)})}}},{key:"getCurrentState",value:function(){return this.getDataSet()?this.getDataSet().getData():{}}},{key:"finder",value:function(e){return this.isRemoved()?[]:this.getDDM().finder(e)}},{key:"finders",value:function(e){return this.isRemoved()?[]:this.getDDM().finders(e)}},{key:"group",value:function(e){return this.isRemoved()?null:this.getDDM().group(e)}},{key:"groups",value:function(e){return this.isRemoved()?[]:this.getDDM().groups(e)}},{key:"isOuterView",value:function(){return!0===this[_const.OUTERVIEW]}},{key:"update",value:function(e){if(!this.isRemoved()){if(this.getDataSet()&&e)return this.getDataSet()._update(e);if(!this.getDDM().isRendered())return this._render()}return Promise.reject()}},{key:"_render",value:function(){return this.isRemoved()?Promise.reject():(_log.default.info("=> [",this[_const.CLASSNAME]||this.getName(),"]"),this.getDDM().render(this.getCurrentState()),this[_const.GROUPFUL]?this._refresh():Promise.resolve())}},{key:"_getChangedProps",value:function(){return this.getDataSet()?this.getDataSet().getChangedProps():[]}}]),t}(BaseView);exports.View=View;var ViewGroup=function(e){function t(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return babelHelpers.classCallCheck(this,t),e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i)),_util.default.setProp(babelHelpers.assertThisInitialized(e),_const.CHILDRENTAG,[]),e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onchildremoved",value:function(){}},{key:"onchildadded",value:function(){}},{key:"getChildAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.isRemoved()?null:this[_const.CHILDRENTAG][e]}},{key:"getChildrenByType",value:function(e){return!this.isRemoved()&&e?this.getChildren().filter(function(t){return t instanceof e}):[]}},{key:"getChildByName",value:function(e){return!this.isRemoved()&&e&&this.getChildren().filter(function(t){return t.getName()===e})[0]||null}},{key:"getChildren",value:function(){return this.isRemoved()?[]:this[_const.CHILDRENTAG]}},{key:"tags",value:function(){return{}}},{key:"_macros",value:function(){return _macros2.default}}]),t}(View);exports.ViewGroup=ViewGroup;var StaticViewGroup=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"addChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name,t.parameter,t.container,t.attrs;return _addChild(e,arguments[1],this,!1)}},{key:"removeChild",value:function(e){this.isRemoved()||-1!==this.getChildren().indexOf(e)&&(e.isRemoved()||e.getElement().parentNode.removeChild(e.getElement()));return this}},{key:"removeChildAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isRemoved()){var t=this.getChildren()[e];t&&this.removeChild(t)}return this}},{key:"removeChildByName",value:function(e){if(!this.isRemoved()&&e){var t=this.getChildByName(e);t&&this.removeChild(t)}return this}},{key:"removeAllChild",value:function(){if(!this.isRemoved())for(var e=this.getChildren();e&&e.length>0;){var t=e.shift();t.isRemoved()||t.getElement().parentNode.removeChild(t.getElement())}return this}},{key:"removeChildByType",value:function(e){if(!this.isRemoved()&&e)for(var t=this.getChildrenByType(e);t.length>0;)this.removeChild(t.shift());return this}},{key:"_macros",value:function(){return{}}},{key:"_refresh",value:function(){return Promise.resolve()}}]),t}(ViewGroup);exports.StaticViewGroup=StaticViewGroup;var BondViewGroup=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDDMContainer",value:function(){if(!this[_const.DDMCONTAINER]){var e=document.createElement("div");e.setAttribute("class",this.getThisClassName("ddmcontainer")),this.getElement().appendChild(e),_util.default.setProp(this,_const.DDMCONTAINER,e)}return this[_const.DDMCONTAINER]}},{key:"addChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name,t.parameter,t.container,t.attrs;return _addChild(e,arguments[1],this,!0)}},{key:"removeChild",value:function(e){if(!this.isRemoved()&&(-1!==this.getChildren().indexOf(e)&&!e.isRemoved())){if(this.getDDMContainer().contains(e.getElement()))throw Error("[ada] BondViewGroup can not remove child in the DDM container");e.getElement().parentNode.removeChild(e.getElement())}return this}},{key:"removeAllChild",value:function(){for(var e=this,t=this.getChildren().filter(function(t){if(!t.isRemoved()&&!e.getDDMContainer().contains(t.getElement()))return t});t&&t.length>0;){var i=t.shift();i.isRemoved()||i.getElement().parentNode.removeChild(i.getElement())}}},{key:"removeChildByType",value:function(e){if(!this.isRemoved()&&e)for(var t=this.getChildrenByType(e);t.length>0;)this.removeChild(t.shift());return this}},{key:"removeChildByName",value:function(e){if(!this.isRemoved()&&e){var t=this.getChildByName(e);t&&this.removeChild(t)}return this}}]),t}(ViewGroup);exports.BondViewGroup=BondViewGroup;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ModuleLoader=exports.Option=exports.Source=exports.ActiveSource=exports.Modules=void 0;var _request=require(0),_util=babelHelpers.interopRequireDefault(require(9)),Option={basePath:"",sourceMap:"",develop:!0};exports.Option=Option;var Persistence={target:null,get:function(){var e;Persistence.target||(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB?Persistence.database:window.localStorage?Persistence.storage:Persistence.empty,Persistence.target=e);return Persistence.target},empty:{getAll:function(){return Promise.resolve({})},saveAll:function(e){return Promise.resolve()},clean:function(){return Promise.resolve()}},storage:{getAll:function(){var e={};try{e=window.localStorage.getItem("ada-local-source")}catch(e){}return Promise.resolve(e)},saveAll:function(e){try{window.localStorage.setItem("ada-local-source",window.JSON.stringify(e))}catch(e){}return Promise.resolve()},clean:function(){try{window.localStorage.removeItem("ada-local-source")}catch(e){}return Promise.resolve()}},database:{db:null,info:{name:"ada",version:1,store:"ada-local-source",key:"name",value:"local"},ready:function(){return Persistence.database.db?Promise.resolve():(window.indexedDB||(window.indexedDB=window.mozIndexedDB||window.webkitIndexedDB),new Promise(function(e){var t=indexedDB.open(Persistence.database.info.name,Persistence.database.info.version);t.onupgradeneeded=function(e){var n=t.result;n.objectStoreNames.contains(Persistence.database.info.store)&&n.deleteObjectStore(Persistence.database.info.store),n.createObjectStore(Persistence.database.info.store,{keyPath:Persistence.database.info.key}).put({name:Persistence.database.info.value,data:{}})},t.onsuccess=function(n){Persistence.database.db=t.result,e()},t.onerror=function(){e()}}))},getAll:function(){var e=this;return new Promise(function(t){e.ready().then(function(){var e=Persistence.database.db.transaction([Persistence.database.info.store],"readwrite");e.onerror=function(e){t({})};var n=e.objectStore(Persistence.database.info.store).get(Persistence.database.info.value);n.onerror=function(e){t({})},n.onsuccess=function(e){t(n.result?n.result.data:{})}})})},saveAll:function(e){var t=this;return new Promise(function(n){t.ready().then(function(){var t=Persistence.database.db.transaction([Persistence.database.info.store],"readwrite");t.oncomplete=function(e){n()},t.onerror=function(e){n()},t.objectStore(Persistence.database.info.store).put({name:Persistence.database.info.value,data:e})})})},clean:function(){var e=this;return new Promise(function(t){e.ready().then(function(){var e=Persistence.database.db.transaction([Persistence.database.info.store],"readwrite");e.oncomplete=function(e){t()},e.onerror=function(e){t()},e.objectStore(Persistence.database.info.store).delete(Persistence.database.info.value)})})}}},ModuleLoader={installed:{},moduleFnsLoaded:{},getExcutor:function(e,t){var n=e.split("/").pop().split(".").pop(),o=t;return o="js"===n?t:"css"===n||"scss"===n||"less"===n?'var styles={_linkElement:null,active:function(){var et=document.getElementById("'.concat(e,'");if(!et){var _a = document.createElement("style");_a.setAttribute("media", "screen");_a.setAttribute("type", "text/css");_a.setAttribute("id","').concat(e.replace(/\//g,"-"),'");_a.appendChild(document.createTextNode(').concat(JSON.stringify(t),'));styles._linkElement=_a;document.getElementsByTagName("head")[0].appendChild(_a);}else{et.innerText="";et.appendChild(document.createTextNode(').concat(JSON.stringify(t),"));}}};if (/complete|loaded|interactive/.test(window.document.readyState)) {styles.active();} else {window.document.addEventListener('DOMContentLoaded', function () {styles.active();}, false);}module.exports={isReady:function(){return styles._linkElement!==null;},getElement:function(){return styles._linkElement;},remove:function(){if(styles._linkElement){styles._linkElement.parentNode.removeChild(styles._linkElement);}}};"):"json"===n?"module.exports=".concat(t):"html"===n||"text"===n?"module.exports=JSON.stringify(".concat(t,")"):t,new Function("module","exports","require","imports","babelHelpers",o)},getModuleDependenceInfo:function(e,t){var n=[];return{code:t=t.replace(/require\(.*?\)/g,function(e){var t=e.substring(8,e.length-1).replace(/['|"|`]/g,"").trim();return n.push(t),'require("'.concat(t,'")')}),paths:n}},getModuleDependenceMap:function(e){return Source.get(e).then(function(t){var n=ModuleLoader.getModuleDependenceInfo(e,t),o=n.paths,r=n.code,s=babelHelpers.defineProperty({},e,r),a=[];return o.map(function(e){ModuleLoader.installed[e]||a.push(ModuleLoader.getModuleDependenceMap(e))}),Promise.all(a).then(function(e){return Object.assign.apply(Object,[s].concat(babelHelpers.toConsumableArray(e))),s})})},excute:function(e){if(ModuleLoader.installed[e])return ModuleLoader.installed[e].exports;var t=ModuleLoader.installed[e]={path:e,exports:{}};return ModuleLoader.moduleFnsLoaded[e].call(t.exports,t,t.exports,ModuleLoader.excute,function(e){return ModuleLoader.load(e).then(function(e){return e.__esModule?e.default:e})},window.babelHelpers||{}),t.exports},load:function(e){var t=ModuleLoader.installed[e];return t?Promise.resolve(t.exports):ModuleLoader.getModuleDependenceMap(e).then(function(t){for(var n in t)ModuleLoader.moduleFnsLoaded[n]=ModuleLoader.getExcutor(n,t[n]);return ModuleLoader.excute(e)})}};exports.ModuleLoader=ModuleLoader;var Modules={excute:function(e){return ModuleLoader.load(e)},scan:function(e){if(e)for(var t in ModuleLoader.installed){if(!1===e(t,ModuleLoader.installed[t].exports))break}},scanClass:function(e){if(e)for(var t in ModuleLoader.installed){var n=ModuleLoader.installed[t];if(!n.exports.__esModule&&_util.default.isFunction(n.exports)&&!1===e(t,n.exports))break;for(var o in n.exports){var r=n.exports[o];if(_util.default.isFunction(r)&&!1===e(t,r))break}}},filter:function(e){var t=[];if(e)for(var n in ModuleLoader.installed){var o=ModuleLoader.installed[n],r=e(n,o.exports.__esModule?o.exports.default:o.exports);void 0!==r&&t.push(r)}return t},get:function(e){var t=ModuleLoader.installed[e];return t?t.exports.__esModule?t.exports.default:t.exports:null},has:function(e){return void 0!==ModuleLoader.installed[e]},set:function(e,t){return ModuleLoader.installed[e]={exports:t},this}};exports.Modules=Modules;var SourceQueue={tasks:[],isRunning:!1,add:function(e,t,n){this.tasks.push({path:e,fn:t,error:n}),this.run()},run:function(){var e=this;if(!this.isRunning){var t=this.tasks.shift();t&&(this.isRunning=!0,Source.getSource(t.path).then(function(n){e.isRunning=!1,t.fn(n),e.run()},function(n){e.isRunning=!1,t.error(n),e.run()}))}}},Source={isinit:!1,source:{},ready:function(){var e=this;return this.isinit?Promise.resolve():Persistence.get().getAll().then(function(t){return e.isinit=!0,e.source=Object.assign({},t,e.source),Persistence.target.saveAll(e.source)})},get:function(e){return new Promise(function(t,n){SourceQueue.add(e,function(e){t(e)},function(e){n(e)})})},decompress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.source||(this.source={}),Object.assign(this.source,e)},getRealPath:function(e){var t=e,n="";if(n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Option.sourceMap[e.split(".").shift()]:Option.sourceMap[_util.default.getMappedPath(e)],Option.develop)t="".concat(e,"?h=").concat((new Date).getTime());else{var o=e.split("/"),r=o.pop().split(".");o.push("".concat(n,".").concat(r[1])),t=o.join("/")}return"".concat("/"===Option.basePath[Option.basePath.length-1]?Option.basePath:Option.basePath+"/").concat(t)},getSourceByHash:function(e,t,n){var o=this,r=0,s=Reflect.ownKeys(Option.sourceMap.packages).filter(function(e){return-1!==Option.sourceMap.packages[e].indexOf(n)})[0];return s?(Option.sourceMap.packages[s].split("|").forEach(function(e){var t=Reflect.ownKeys(Option.sourceMap).filter(function(t){return Option.sourceMap[t]===e})[0];o.source[t]&&o.source[t].hash===e||(r+=1)}),r>1?(0,_request.get)("".concat(this.getRealPath(s+".js",!0))).then(function(e){var n=JSON.parse(e.substring(11,e.length-1));return Object.assign(o.source,n),Persistence.get().saveAll(o.source).then(function(){return o.source[t].code})}):(0,_request.get)("".concat(this.getRealPath(e))).then(function(e){return o.source[t]={code:e,hash:n},Persistence.get().saveAll(o.source).then(function(){return e})})):n?(0,_request.get)("".concat(this.getRealPath(e))).then(function(e){return o.source[t]={code:e,hash:n},Persistence.get().saveAll(o.source).then(function(){return e})}):(0,_request.get)("".concat(this.getRealPath(e)))},getSource:function(e){var t=this;return this.ready().then(function(){var n=_util.default.getMappedPath(e);if(t.source[n]){var o=t.source[n].hash,r=Option.sourceMap[n];return o&&r?r===o?t.source[n].code:t.getSourceByHash(e,n,r):(0,_request.get)("".concat(t.getRealPath(e)))}return Option.sourceMap?t.getSourceByHash(e,n,Option.sourceMap[n]):(0,_request.get)("".concat(t.getRealPath(e)))})}};exports.Source=Source;var ActiveSource={cache:{},excute:function(e){var t=this;return this.cache[e]?Promise.resolve(this.cache[e]):Source.get(e).then(function(n){return t.cache[e]=n,n})},has:function(e){return void 0!==this.cache[e]}};exports.ActiveSource=ActiveSource;var exportSource={setOption:function(e){Object.assign(Option,e)},loadModule:function(e){return Modules.excute(e)},loadSource:function(e){return ActiveSource.excute(e)},decompress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Source.decompress(e)}},_default=exportSource;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataSetHelper=exports.TransactDataSet=exports.DataSet=exports.Service=void 0;var _metadata=babelHelpers.interopRequireDefault(require(11)),_util=babelHelpers.interopRequireDefault(require(9)),_const=require(7),_collector=babelHelpers.interopRequireDefault(require(16)),_log=babelHelpers.interopRequireDefault(require(13)),Service=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"defaultData",value:function(){return{}}},{key:"update",value:function(e,t){return e}}]),e}();exports.Service=Service;var DataSet=function(){function e(){babelHelpers.classCallCheck(this,e),_util.default.setProp(this,_const.DATASETOWNER,null),_util.default.setProp(this,_const.DATASETDATA,null),_util.default.setProp(this,_const.DATASETSERVICE,null),_util.default.setProp(this,_const.DATASETLISTENER,[]),_util.default.setProp(this,_const.DATASETEDITS,[])}return babelHelpers.createClass(e,[{key:"commit",value:function(e,t){var n=this;return this[_const.DATASETOWNER].onbeforeupdate(),DataSetHelper.trigger(this,e,t).then(function(e){return n[_const.DATASETOWNER].onupdated(),e})}},{key:"getData",value:function(){return this[_const.DATASETDATA]||(this[_const.DATASETDATA]=this[_const.DATASETSERVICE].defaultData()),this[_const.DATASETDATA]}},{key:"toggleService",value:function(e){if(!(e.prototype instanceof this.defaultService()))throw Error("[ada] toggle service must be a subclass of this dataset default service class");this[_const.DATASETSERVICE]=new e}},{key:"getChangedProps",value:function(){return this[_const.DATASETEDITS]}},{key:"_addListener",value:function(e,t,n){var r=this,o={};if(-1!==this[_const.DATASETLISTENER].findIndex(function(t){return t.view===e}))throw Error("ViewConnector can only invoke connect once with the same DataSet filter");var a=new _collector.default(this[_const.DATASETDATA],n);return o=a.invoke(),setTimeout(function(){r[_const.DATASETLISTENER].push({useprops:a.getUsedPros(),view:e,name:t,fn:n})}),o}},{key:"_removeListener",value:function(e){var t=this[_const.DATASETLISTENER].findIndex(function(t){return t.view===e});-1!==t&&this[_const.DATASETLISTENER].splice(t,1)}},{key:"_update",value:function(e){return this.commit("update",e)}},{key:"_remove",value:function(){this[_const.DATASETDATA]=null,this[_const.DATASETOWNER]=null,this[_const.DATASETSERVICE]=null,this[_const.DATASETLISTENER]=[]}}]),e}();exports.DataSet=DataSet;var TransactDataSet=function(e){function t(){var e;return babelHelpers.classCallCheck(this,t),e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),_util.default.setProp(babelHelpers.assertThisInitialized(e),_const.DATASETRANSACTION,[]),e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"commit",value:function(e,n){return this[_const.DATASETRANSACTION].push({type:e,data:n}),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"commit",this).call(this,e,n)}},{key:"getTransactionList",value:function(){return this[_const.DATASETRANSACTION]}},{key:"rollback",value:function(e){var t=this.getTransactionList();return e||(e=t.length-1),DataSetHelper.travel(this,e,!0)}},{key:"travel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return DataSetHelper.travel(this,e,!1)}}]),t}(DataSet);exports.TransactDataSet=TransactDataSet;var DataSetHelper=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"getDataSet",value:function(e,t){var n=e.type,r=void 0===n?DataSet:n,o=e.service,a=void 0===o?Service:o,s=new r;if(s[_const.DATASETOWNER]=t,!(a.prototype instanceof Service))throw Error("[ada] must be a Service class");return s[_const.DATASETSERVICE]=new a,s[_const.DATASETSERVICE][_const.DATASETACTION]=Object.assign({update:"update"},_metadata.default.getMetadataExtends("action",s[_const.DATASETSERVICE].constructor.prototype)||{}),s}},{key:"trigger",value:function(t,n,r){var o=t[_const.DATASETSERVICE][_const.DATASETACTION][n];if(o&&t[_const.DATASETSERVICE][o]){var a=new _collector.default(t.getData(),t[_const.DATASETSERVICE][o]),s=a.invoke(r,t[_const.DATASETSERVICE]);return Promise.resolve().then(function(){return s}).then(function(n){return t[_const.DATASETDATA]=n||{},t[_const.DATASETEDITS]=a.getChangedProps(),e.dispatch(t).then(function(){return n})})}return console.warn("[ada] service action is undefined name is ".concat(n)),Promise.reject()}},{key:"dispatch",value:function(e){var t=e[_const.DATASETOWNER],n=Promise.resolve();return console.log(t._getChangedProps(),t._getUsedProps()),_util.default.isChanges(t._getChangedProps(),t._getUsedProps())||!t.getDDM().isRendered()?(_log.default.info("[",t[_const.CLASSNAME],"] => render from dataset"),n=n.then(function(){return e[_const.DATASETOWNER]._render()})):_log.default.info("[",t[_const.CLASSNAME],"] => no render from dataset,template has not use the changed props"),n=n.then(function(){return e[_const.DATASETLISTENER].filter(function(t){var n=_util.default.isChanges(e.getChangedProps(),t.useprops);return n?_log.default.info("[",t.view[_const.CLASSNAME],"->",t.name,"] => update"):_log.default.info("[",t.view[_const.CLASSNAME],"->",t.name,"] => no update,connector has not use the changed props"),n}).reduce(function(t,n){return t.then(function(){if(n.view.isRemoved())return Promise.resolve();var t=new _collector.default(e.getData(),n.fn),r=t.invoke();return n.useprops=t.getUsedPros(),t=new _collector.default(n.view.getCurrentState(),n.view.onconnectupdate),n.view[_const.CONNECTSTATE]=t.invoke({name:n.name,data:r},n.view),n.view[_const.CHANGEPROPS]=t.getChangedProps(),n.view._render()})},Promise.resolve())})}},{key:"travel",value:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t.getTransactionList();if(n>=0&&n<=o.length){var a=Promise.resolve();return n-=1,o=o.filter(function(e,t){return t<=n}),r&&(t[_const.DATASETRANSACTION]=o),(o=o.map(function(n){return function(){return e.trigger(t,n.type,n.data,!1)}})).length>0&&(a=a.then(function(){return o.reduce(function(e,t){return e.then(function(){return t()})},Promise.resolve())})),a.then(function(){return e.dispatch(t)}),a}return Promise.reject()}}]),e}();exports.DataSetHelper=DataSetHelper;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _metadata=babelHelpers.interopRequireDefault(require(11)),_loader=babelHelpers.interopRequireWildcard(require(2)),_const=require(7),_util=babelHelpers.interopRequireDefault(require(9)),_config=babelHelpers.interopRequireDefault(require(15)),factory={cleanView:function(e){e.querySelectorAll&&[e].concat(babelHelpers.toConsumableArray(e.querySelectorAll("[data-module]"))).reverse().forEach(function(e){e[_const.VIEWTAG]&&e[_const.VIEWTAG]._remove&&e[_const.VIEWTAG]._remove()})},getViewInstance:function(e){var t=e.viewClass,o=e.parent,r=e.dom,a=e.name,n=void 0===a?"":a,u=e.tag,i=void 0===u?"view":u,l=e.useProps,d=void 0===l?[]:l,c=_metadata.default.getMetadataExtends(i,t.prototype);c.scope||(c.scope="local"),void 0===c.cache&&(c.cache=!0);var s=Promise.resolve();return c.template&&(s=s.then(function(){return _loader.default.loadSource(c.template).then(function(e){c.template="local"===c.scope?_util.default.parseTemplate(e,c.className):e})})),c.style&&(s=s.then(function(){return _loader.default.loadSource(c.style).then(function(e){_util.default.excuteStyle("local"===c.scope?_util.default.parseStyle(e,c.className):e,"".concat(c.style.replace(/\//g,"-"),":").concat(c.className))})})),s.then(function(){c.className&&r.classList.add(c.className);var e=new t({parent:o,info:c,name:n,dom:r,useProps:d});return _util.default.setProp(r,_const.VIEWTAG,e),e})},getRootView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=function(){var o=window.document.createElement("div");o.setAttribute("id",_const.ROOTELEMENTNAME),o.setAttribute("class",_const.ROOTELEMENTNAME),o.setAttribute("data-module","ada-root"),window.document.body.appendChild(o);var r=o[_const.VIEWTAG];return r?Promise.resolve(r):factory.getViewInstance({viewClass:e,parent:null,dom:o,tag:"root",name:"root",useProps:[]}).then(function(e){return e.oncreated(),e.update(t).then(function(){return e.onready(),e})})};return new Promise(function(e,t){/complete|loaded|interactive/.test(window.document.readyState)?o().then(function(t){return e(t)}):window.document.addEventListener("DOMContentLoaded",function(){return o().then(function(t){return e(t)})},!1)})},boot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.root,o=void 0===t?"":t,r=e.basePath,a=void 0===r?"":r,n=e.parameter,u=void 0===n?{}:n,i=e.map,l=void 0===i?{}:i,d=e.develop,c=void 0===d||d;return _config.default.set({root:o,basePath:a,develop:c,parameter:u}),_loader.default.setOption({basePath:a,sourceMap:l,develop:c}),0===o.indexOf("./")&&(o=o.substring(2)),0===o.indexOf("/")&&(o=o.substring(1)),_loader.default.loadModule(o).then(function(){var e=null;return _loader.Modules.scanClass(function(t,o){if(_metadata.default.getMetadata("root",o.prototype))return e=o,!1}),e?factory.getRootView(e,u).then(function(e){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return t?new t(function(e){e.forEach(function(e){return babelHelpers.toConsumableArray(e.removedNodes).forEach(function(e){return factory.cleanView(e)})})}).observe(window.document,{childList:!0,subtree:!0}):window.document.addEventListener("DOMNodeRemoved",function(e){return factory.cleanView(e.target)}),e}):(console.error("root class can not find"),Promise.reject())})}},_default=factory;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _updater=babelHelpers.interopRequireDefault(require(17)),_controlbar=babelHelpers.interopRequireDefault(require(18)),_teminal=babelHelpers.interopRequireDefault(require(19)),client={state:!0,start:function(){if(window.EventSource){window.addEventListener("load",function(){_controlbar.default.start(),_teminal.default.init(),new EventSource("http://localhost:8080/ada/sse").addEventListener("message",function(e){try{var t=JSON.parse(e.data),o=t.log,r=[],a=[];o&&Reflect.ownKeys(o).forEach(function(e){var t=o[e];"done"===t?r.push(e):a.push({path:e,result:t})}),0===a.length?(_teminal.default.hide(),_controlbar.default.getState()?"edit"===t.type&&(_controlbar.default.actionStart(),_updater.default.refresh(t.files,t.map).then(function(){_controlbar.default.actionDone()}).catch(function(e){window.location.reload()})):console.log("%c[Ada] HMR is stopped","color:#3D78A7;font-weight:bold")):_teminal.default.showError(a),"reload"===t.type&&window.location.reload()}catch(e){window.location.reload()}})});var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;e?new e(function(e){var t=!1;e.forEach(function(e){babelHelpers.toConsumableArray(e.removedNodes).forEach(function(e){e.querySelectorAll&&e.querySelectorAll(".ada-hmr-controllbar").length>0&&(t=!0),t||(t=!!e.classList&&e.classList.contains("ada-hmr-controllbar"))})}),t&&(_controlbar.default.start(),_teminal.default.init())}).observe(window.document,{childList:!0,subtree:!0}):window.document.body.addEventListener("DOMNodeRemoved",function(e){var t=e.target,o=!1;t.querySelectorAll&&t.querySelectorAll(".ada-hmr-controllbar").length>0&&(o=!0),o||(o=!!t.classList&&t.classList.contains("ada-hmr-controllbar")),o&&(_controlbar.default.start(),_teminal.default.init())})}}};client.start();var _default={status:function(){return _controlbar.default.isrunning?"running":"stopped"},hideControllbar:function(){_controlbar.default.hide()},showControllbar:function(){_controlbar.default.show()}};exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DDM=exports.Template=exports.MapDom=void 0;var _event2=babelHelpers.interopRequireDefault(require(27)),_util=babelHelpers.interopRequireDefault(require(9)),_collector=babelHelpers.interopRequireDefault(require(16)),REGS={k:/\r/g,l:/\n/g,a:/&lt;/g,b:/&gt;/g,d:/<%|%>/g,e:/^=.*;$/,i:/\r\n/g,f:/>[\s]+</g,g:/<%[\s\S]*%>/,h:/\<\!\-\-[\s\S]*?\-\-\>/g,startdot:/&lt;/g,enddot:/&gt;/g,isDoctype:/\<\!DOCTYPE[\s\S]*?\>/g,isNote:/\<\!\-\-[\s\S]*?\-\-\>/g,isXmlTag:/\<\?[\s\S]*?\?\>/g,propcode:/\@\[\[[0-9]+\]\]\@/g,eventcode:/\$\[\[[0-9]+\]\]\$/g,assigncode:/\(\(\[[0-9]+\]\)\)/g,expresscode:/\[\[[0-9]+\]\]/g,nodecode:/\{\{node\}\}/g},SINGLETAG=["br","hr","img","input","param","link","meta","area","base","basefont","param","col","frame","embed","keygen","source"],TEMPLATECACHE=new Map,IDNAME="$$ID",DefaultMacros={self:function(t){var e=t.props;return{template:t.context._templateStr,data:e.data}}},DefaultAssignDirectives={html:function(t){return t}},Parser={beautySyntax:{syntaxs:{defaults:function(t){return"<%=".concat(t.substring(2,t.length-2),";%>")},log:function(t){return"<%console.log(".concat(t.join(" "),");%>")},html:function(t){return"<%=assign(html,".concat(t,");%>")},map:function(t){var e=t.shift();t.shift();var n=t.shift()||"$value",r=t.shift()||"$key",a="_"+_util.default.randomid(8);return"<%for(var ".concat(a," in ").concat(e,"){var ").concat(n,"=").concat(e,"[").concat(a,"];var ").concat(r,"=").concat(a,";%>")},"/map":function(){return"<%}%>"},list:function(t){var e=t.shift();t.shift();var n=t.shift()||"$item",r=t.shift()||"$index",a="_"+_util.default.randomid(8),o="_"+_util.default.randomid(6);return"<%if(".concat(e,"&&").concat(e,".length>=0)for(var ").concat(a,"=0,").concat(r,"=0,").concat(o,"=").concat(e,".length;").concat(a,"<").concat(o,";").concat(a,"++){var ").concat(n,"=").concat(e,"[").concat(a,"];").concat(r,"=").concat(a,";%>")},"/list":function(t){return"<%}%>"},if:function(t){return"<%if(".concat(t.join(" "),"){%>")},elseif:function(t){return"<%}else if(".concat(t.join(" "),"){%>")},else:function(){return"<%}else{%>"},"/if":function(){return"<%}%>"},break:function(){return"<%break;%>"},set:function(t){return"<%var ".concat(t.join(" "),";%>")}},parse:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\{\{[\s\S]+?\}\}/g,function(t){var e=t.substring(2,t.length-2).split(" "),n=e.shift();try{return Parser.beautySyntax.syntaxs[n]?Parser.beautySyntax.syntaxs[n](e):Parser.beautySyntax.syntaxs.defaults(t)}catch(t){console.log(t)}})}},nodeParser:{getNodeStr:function(t){var e={},n={},r={},a=[];return Reflect.ownKeys(t.props).forEach(function(o){if(o.startsWith("on")){var i=o.substring(2);e[i]=t.props[o],a.push(i)}else if(o.startsWith("@")){var c=o.substring(1);r[c]=t.props[o]}else"data-find"===o?n["data-find"]="".concat(IDNAME,'+":').concat(t.props["data-find"],'"'):"data-group"===o?n["data-group"]="".concat(IDNAME,'+":').concat(t.props["data-group"],'"'):"data-module"===o?n["data-module"]="".concat(IDNAME):n[o]='"'.concat(t.props[o],'"')}),a.length>0&&(n["data-bind"]="".concat(IDNAME,'+":').concat(a.join(","),'"')),'{tag:"'.concat(t.tag,'",attrs:{').concat(Reflect.ownKeys(n).map(function(t){return'"'.concat(t,'":').concat(n[t])}).join(","),"},events:{").concat(Reflect.ownKeys(e).map(function(t){return"".concat(t,":$").concat(e[t],"$")}).join(","),"},props:{").concat(Reflect.ownKeys(r).map(function(t){return'"'===r[t][0]?"".concat(t,":").concat(r[t]):"".concat(t,":@").concat(r[t],"@")}).join(","),"},children:[]}")},code:function(t,e){if(t.isTextNode){return/\(\[[0-9]+\]\)/.test(t.content)?t.content:'{content:"'.concat(t.content||"",'"}')}var n="",r="",a=Parser.nodeParser.getNodeStr(t);return t.parent?(n="$$NODE"+e,r="".concat(a,";$$CURRENT=").concat(n,";")):r="var ".concat(n="$$NODE"+e,"=").concat(a,";$$CURRENT=").concat(n,";"),t.children.forEach(function(t){if(t.isTextNode&&/\(\[[0-9]+\]\)/.test(t.content))r+=t.content;else{var a=e.split("_");e="".concat(a[0],"_").concat(a[1]/1+1);var o="$$NODE".concat(e),i=Parser.nodeParser.code(t,e);r+="var ".concat(o,"=").concat(i,"; ").concat(n,".children.push(").concat(o,"); $$CURRENT=").concat(n,";")}}),r}},getHTMLString:function(t){var e="";return t.forEach(function(t){e+=function t(e){var n="",r=-1!==SINGLETAG.indexOf(e.tag);if(void 0!==e.content)if(void 0===e.type)n=_util.default.encodeHTML(e.content)||"";else{var a=e.type,o=e.content;DefaultAssignDirectives[a]&&(o=DefaultAssignDirectives[a](e.content)),n='<div class="ada-assign-directive" data-assign-directive-type="'+a+'">'+(o||"")+"</div>"}else{var i=[];if(e.attrs&&Reflect.ownKeys(e.attrs).forEach(function(t,n){e.attrs[t]&&i.push(t+'="'+e.attrs[t]+'"')}),r)n="<"+e.tag+" "+i.join(" ")+"/>";else{var c=[];e.children.forEach(function(e){e&&c.push(t(e))}),n="<"+e.tag+" "+i.join(" ")+">"+c.join("")+"</"+e.tag+">"}}return n}(t)}),e},preparse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t=t.trim().replace(REGS.isNote,"").replace(REGS.isDoctype,"").replace(REGS.isXmlTag,"").replace(REGS.a,"<").replace(REGS.b,">").replace(REGS.h,"").replace(REGS.f,"><").replace(REGS.i,"").replace(REGS.k,"").replace(REGS.l,""),SINGLETAG.forEach(function(e){var n=new RegExp("<".concat(e," .*?>"),"g");t=t.replace(n,function(t){return t.substring(0,t.length-1)+"/>"})}),t},parseMacro:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(-1!==t.indexOf("<@")){for(var e,n=-1,r="",a="start",o="",i="",c="",s=!0,u="",l={},f=0,p=0,d=0,h=0,v=[];n<t.length;)r=t[++n],"start"!==a||"<"!==r||"@"!==t[n+1]?"tagstart"!==a||"@"!==r?"start"!==a||"<"!==r||"/"!==t[n+1]||"@"!==t[n+2]?"endtag"!==a||">"!==r?"tagname"!==a||" "!==r?"tagname"!==a||"/"!==r&&">"!==r?"propname"!==a||"="!==r?"propvalue"!==a||"'"!==r&&'"'!==r?"propvalueing"!==a||r!==e?("endtag"===a&&(u+=r),"tagname"===a&&(o+=r),"propname"===a&&(i+=r),"propvalueing"===a&&(c+=r)):(a="tagname",l[i]=c):(a="propvalueing",e=r,c=""):a="propvalue":(">"===r?(p=n+1,a="start",s=!0):"/"===r&&(p=n+2,a="start",s=!1),""!==o&&v.push({type:"tag",tagname:o,props:l,body:s,start:f,end:p})):(a="propname",i=""):(a="start",h=n+1,v.push({type:"endtag",tagname:u,start:d,end:h})):(d=n,a="endtag",u="",n+=2):(a="tagname",o="",l={}):(a="tagstart",f=n);var g=0,m=0,E=!1,b=null,y=[],_="",S=0;return Reflect.ownKeys(v).forEach(function(e){var n=v[e];"tag"===n.type&&!1===n.body&&!1===E&&(n.bodystr="",n.from=n.start,n.to=n.end,y.push(n)),"tag"===n.type&&!0===n.body&&(E=!0,null===b&&((b=n).from=n.start),0===g&&(n.start,m=n.end),g++),"endtag"===n.type&&0===--g&&(b.to=n.end,b.bodystr=t.substring(m,n.start),y.push(b),b=null,E=!1)}),y.forEach(function(e){var n=e.props,r=[],a=[],o=[];Reflect.ownKeys(n).forEach(function(t){var e=n[t],i="";if(REGS.g.test(e)){var c="";e.split(REGS.d).forEach(function(t,e){(e+1)%2==0?""!==t&&(c+="".concat(t,"+")):c+=""!==t?"'".concat(t,"'+"):t});var s=c.length>0?c.substring(0,c.length-1):"''";i=s.substring(1,s.length-1)}else i='"'.concat(e,'"');if(t.startsWith("on")){var u=t.substring(2);r.push({name:u,value:i})}else t.startsWith("@")?a.push('"'.concat(t.substring(1),'":').concat(i)):o.push('"'.concat(t,'":').concat(i))});var i=r.map(function(t){var e=t.value.split(/\(|\)/),n=e.shift();e.pop();var r=[],a=e.map(function(t){if(-1!==t.indexOf(" as ")){var e=t.split("as");return r.push("".concat(e[1].trim())),e[0].trim()}return r.push("".concat(t.split(".").pop())),t});return'"'.concat(t.name,'":{method:"').concat(n,'",parameters:[').concat(a.join(","),'],paranames:"').concat(r.join(","),'"}')});_+="".concat(t.substring(S,e.from),'\n                       <%var $$MACRORESULT=this._macro({tag:"').concat(e.tagname,'",props:{').concat(a.join(","),"},attrs:{").concat(o.join(","),"},events:{").concat(i.join(","),'},bodyStr:"').concat(e.bodystr,"\"});if($$MACRORESULT&&$$MACRORESULT.length){for(var $$INDEX=0;$$INDEX<$$MACRORESULT.length;$$INDEX++){{{node}}.children.push($$MACRORESULT[$$INDEX]);}}else{{{node}}.children.push({content:$$MACRORESULT||''});}%>"),S=e.to}),_+=t.substring(S,t.length)}return t},parseNode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t&&""!==t){for(var e=[],n=[],r=null,a="",o="",i="",c="",s=!1,u=!1,l=!1,f=!1,p=!1,d=0,h=t.length;d<h;d++){var v=t[d];if("\r"!==v&&"\n"!==v){if("<"===v){p=!0,""!==c.trim()&&(r={content:c.trim()||"",parent:e[e.length-1]||null,isTextNode:!0},e[e.length-1]?e[e.length-1].children.push(r):n.push(r),c=""),t[d+1]&&"/"===t[d+1]?f=!0:(r={tag:"",props:{},children:[],parent:null,hasProp:!1,isTextNode:!1},e.push(r),e.length-2>=0&&(e[e.length-2].children.push(r),r.parent=e[e.length-2]),s=!0);continue}if(" "===v){if(p&&(s&&(s=!1,r.tag=a.trim(),a=""),!u&&!l)){u=!0;continue}}else if("="===v)p&&(u=!1);else if("'"===v||'"'===v){if(!l&&p){l=v;continue}l===v&&(l=!1,r.hasProp=!0,r.props[o.trim()]=i.trim(),o="",i="")}else{if(">"===v){p=!1,u=!1,l=!1,s=!1,f&&(f=!1,"",1===e.length&&n.push(e[0]),e.pop()),r.hasProp||(""===r.tag&&(r.tag=a.trim()),a="");continue}if("/"===v){t[d+1]&&">"===t[d+1]?(p=!1,l=!1,u=!1,f=!1,s=!1,"",1===e.length&&n.push(e[0]),r.hasProp||(""===r.tag&&(r.tag=a.trim()),a=""),e.pop()):p?l&&(i+=v):c+=v;continue}}s&&(a+=v),u&&(o+=v),l&&(i+=v),f&&v,!p&&(c+=v)}}return c&&n.push({content:c||"",parent:null,isTextNode:!0}),n}return[]},code:function(){var t="",e=[],n=[],r='"use strict";\nvar $$RESULT=[],$$CURRENT=null;\n';return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(REGS.d).forEach(function(r,a){a%2!=0?REGS.e.test(r)?(t+=""+"[[".concat(e.length,"]]"),e.push(r)):(t+="(([".concat(n.length,"]))"),n.push(r)):t+=""+r}),Parser.parseNode(t).forEach(function(t,e){var n=e+"_0",a=Parser.nodeParser.code(t,n);r+=a+"\r\n",-1!==a.indexOf("$$NODE"+n)&&-1===a.indexOf("$$RESULT.push($$NODE"+n+")")&&(r+="$$RESULT.push($$NODE"+n+");\r\n")}),r=r.replace(REGS.assigncode,function(t,e,r){return n[t.substring(3,t.length-3)]}).replace(REGS.propcode,function(t,n,r){var a=e[t.substring(3,t.length-3)];return a&&"="===a[0]?a.substring(1,a.length-1):a}).replace(REGS.eventcode,function(t,n,r){var a=e[t.substring(3,t.length-3)];if(a&&"="===a[0]){var o=a.substring(1,a.length-1).split(/\(|\)/),i=[],c=[];return o[1]&&(i=o[1].split(",").map(function(t){return-1!==t.indexOf(" as ")?t.split("as").pop().trim():-1!==t.indexOf(".")?t.split(".").pop():t}),c=o[1].split(",").map(function(t){return-1!==t.indexOf(" as ")?t.split("as").shift().trim():t})),'{method:"'.concat(o[0].trim(),'",parameters:[').concat(c.join(",")||"",'],paranames:"').concat(i.join(","),'"}')}return a}).replace(REGS.expresscode,function(t,n,r){var a=e[t.substring(2,t.length-2)];if(a&&"="===a[0]){var o=a.substring(1,a.length-1);if(0===o.indexOf("assign(")){var i=(o=o.substring(7,o.length-1)).split(","),c=i.shift(),s=i.join(",");return'"+(('.concat(s,")!==undefined?(").concat(s,'):\'\'),"type":"').concat(c)}return'"+(('.concat(o,")!==undefined?(").concat(o,"):'')+\"")}return a}).replace(REGS.nodecode,function(t,e,n){return"$$CURRENT"}),r+="return $$RESULT;"},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="";return TEMPLATECACHE.has(t)?e=TEMPLATECACHE.get(t):(e=Parser.code(Parser.parseMacro(Parser.beautySyntax.parse(Parser.preparse(t)))),TEMPLATECACHE.set(t,e)),e}},Differ={childrenEvents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Set;return t.forEach(function(t){return function t(n){n.events&&(Reflect.ownKeys(n.events).forEach(function(t){return e.add(t)}),n.attrs&&n.attrs["data-module"]||n.children&&n.children.forEach(function(e){return t(e)}))}(t)}),Array.from(e)},diffNode:function(t,e,n,r){if(t&&e){var a=t.length;if(0===t.length)0!==e.length&&r.removeAll.push({path:n.join(",")});else{var o=[];t.length<e.length?t[0].attrs&&t[0].attrs.unique&&e[0].attrs&&e[0].attrs.unique?o=Differ.checkRemove(t,e).map(function(t,e){return r.bremove.push({path:n.join(",")+","+t}),t}):a=e.length:Differ.checkAdd(t,e).forEach(function(t){r.badd.push({path:n.join(","),node:t.node}),e.push(t.node)}),Differ.checkSort(t,e).map(function(t){return r.sort.push({path:n.join(",")+","+t.from,to:t.to,from:t.from}),t}).forEach(function(t){var n=e[t.from];e[t.from]=e[t.to],e[t.to]=n});var i=[];e.forEach(function(t,e){-1===o.indexOf(e)&&i.push(t)}),(e=i).length>t.length&&(a=e.length);for(var c=0;c<a;c++){if(n.push(c),t[c])if(e[c])if(t[c].attrs&&void 0!==t[c].attrs["data-module"]){if(void 0!==t[c].attrs["data-module"]){var s=Differ.checkNode(t[c],e[c]);"replace"===s?r.replace.push({path:n.join(","),node:t[c]}):!0!==s&&(r.removeAll.push({path:n.join(",")}),r.edit.push({path:n.join(","),attrs:s}))}}else{var u=Differ.checkNode(t[c],e[c]);e[c].attrs&&void 0!==e[c].attrs["data-module"]?r.replace.push({path:n.join(","),node:t[c]}):!0===u?Differ.diffNode(t[c].children,e[c].children,n,r):"replace"===u?r.replace.push({path:n.join(","),node:t[c]}):(r.edit.push({path:n.join(","),attrs:u}),Differ.diffNode(t[c].children,e[c].children,n,r))}else r.add.push({path:n.join(","),node:t[c]});else r.remove.push({path:n.join(","),node:e[c]});n.pop()}}}},checkAdd:function(t,e){var n=[];if(t[0]&&e[0]&&t[0].attrs&&t[0].attrs.unique&&e[0].attrs&&e[0].attrs.unique){var r=e.map(function(t){return t.attrs.unique});t.forEach(function(t,e){var a=t.attrs.unique;-1===r.indexOf(a)&&n.push({node:t,index:e})})}return n},checkSort:function(t,e){var n=[];if(t[0]&&e[0]&&t[0].attrs&&t[0].attrs.unique&&e[0].attrs&&e[0].attrs.unique){var r=t.map(function(t){return t.attrs.unique});e.forEach(function(t,e){var a=t.attrs.unique,o=r.indexOf(a);-1!==o&&o!==e&&n.push({node:t,from:e,to:o})})}return n},checkRemove:function(t,e){var n=[],r=t.map(function(t){return t.attrs.unique});return e.forEach(function(t,e){-1===r.indexOf(t.attrs.unique)&&n.push(e)}),n},checkNode:function(t,e){var n=!0;if(void 0!==t.content)n=t.content===e.content||"replace";else{if(t.tag===e.tag)return Differ.checkProps(t.attrs,e.attrs);n="replace"}return n},checkProps:function(t,e){var n=Object.keys(t),r=Object.keys(e),a={final:t},o=n.length,i=!1;n.length<r.length&&(o=r.length);for(var c=0;c<o;c++){var s=n[c];if(!s){i=!0;break}if(void 0===e[s]){i=!0;break}if(t[s]!==e[s]){i=!0;break}}return!i||a},diff:function(t,e){var n={add:[],replace:[],remove:[],edit:[],removeAll:[],bremove:[],badd:[],sort:[]};Differ.diffNode(t,e,[],n);return e.length=0,n}},Effecter={element:function(t,e){if("svg"===t.tag&&!e&&(e=!0),void 0!==t.content){if(e)return window.document.createElementNS("http://www.w3.org/2000/svg","text");if(void 0===t.type)return window.document.createTextNode(t.content);var n=t.type,r=t.content;DefaultAssignDirectives[n]&&(r=DefaultAssignDirectives[n](t.content));var a=window.document.createElement("div");return a.setAttribute("class","ada-assign-directive"),a.setAttribute("data-assign-directive",n),a.innerHTML=r||"",a}var o=null;for(var i in o=e?window.document.createElementNS("http://www.w3.org/2000/svg",t.tag):window.document.createElement(t.tag),t.attrs)if(e){var c=i.split(":");c.length>1?o.setAttributeNS("http://www.w3.org/1999/"+c[0],c[1],t.attrs[i]):o.setAttributeNS(null,c[0],t.attrs[i])}else o.setAttribute(i,t.attrs[i]);for(var s=0;s<t.children.length;s++)o.appendChild(Effecter.element(t.children[s],e));return o},effect:function(t,e){var n={};if(e.badd.forEach(function(e){var n=t;e.path.split(",").forEach(function(t){n=n.childNodes[t/1]}),n.appendChild(Effecter.element(e.node))}),e.sort.length>0){var r=e.sort.map(function(e){var n=t;return e.path.split(",").forEach(function(t){return n=n.childNodes[t/1]}),{node:n,to:e.to,from:e.from}}),a=babelHelpers.toConsumableArray(r[0].node.parentNode.childNodes);r.forEach(function(t){var e=a[t.to];a[t.to]=t.node,a[t.from]=e});for(var o=a[0].parentNode,i=document.createDocumentFragment(),c=0;c<a.length;c++)i.appendChild(a[c]);o.appendChild(i)}e.bremove.map(function(e){var n=t;return e.path.split(",").forEach(function(t){n=n.childNodes[t/1]}),n}).forEach(function(t){return t.parentNode.removeChild(t)}),e.replace.forEach(function(e){var n=t,r=!1;e.path.split(",").forEach(function(t){var a=n.childNodes[t/1];a?(n=a,r=!0):(r=!1,n.appendChild(Effecter.element(e.node)))}),r&&n.parentNode.replaceChild(Effecter.element(e.node),n)}),e.add.forEach(function(e){var r=t,a=e.path.split(",");a.pop();var o=a.join("");a.forEach(function(t){r=r.childNodes[t/1]}),n[o]?n[o].push({p:r,n:e.node}):n[o]=[{p:r,n:e.node}]}),e.edit.forEach(function(e){var n=t;e.path.split(",").forEach(function(t){return n=n.childNodes[t/1]});var r=e.attrs,a=[];if(n.attributes.getNamedItem)a=babelHelpers.toConsumableArray(n.attributes).map(function(t){return t.nodeName});else for(var o in n.attributes)a.push(o);Reflect.ownKeys(r.final).forEach(function(t){if(-1===t.indexOf(":")){if(n.getAttribute(t)!==r.final[t]){n.setAttribute(t,r.final[t]);try{n[t]=r.final[t]}catch(t){}}var e=a.indexOf(t);-1!==e&&a.splice(e,1)}else{var o=t.split(":"),i=o[1],c=o[0];n.getAttributeNS("http://www.w3.org/1999/"+c,i)!==r.final[t]&&n.setAttributeNS("http://www.w3.org/1999/"+c,i,r.final[t]);var s=a.indexOf(i);-1!==s&&a.splice(s,1),-1!==(s=a.indexOf(t))&&a.splice(s,1)}}),a.forEach(function(t){if(-1===t.indexOf(":"))n.removeAttribute(t);else{var e=t.split(":"),a=e[1],o=e[0];n.removeAttributeNS("http://www.w3.org/1999/"+o,a,r.final[tp])}})}),e.remove.map(function(e){var n=t,r=e.path.split(","),a=r.pop();return r.forEach(function(t){return n=n.childNodes[t/1]}),n.childNodes[a]}).forEach(function(t){return t.parentNode.removeChild(t)}),e.removeAll.forEach(function(e){var n=t;e.path&&e.path.split(",").forEach(function(t){n&&(n=n.childNodes[t/1])}),n&&(n.dataset.module||(n.innerHTML=""))}),Reflect.ownKeys(n).forEach(function(t){var e=n[t];if(e.length>0){var r=window.document.createDocumentFragment();e.forEach(function(t){return r.appendChild(Effecter.element(t.n))}),e[0].p.appendChild(r)}else e.p.appendChild(Effecter.element(e.n))})}},MapDom=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;babelHelpers.classCallCheck(this,t),this._container=e,this._dom=n}return babelHelpers.createClass(t,null,[{key:"getElementPath",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n&&n!==t;)e.push(babelHelpers.toConsumableArray(n.parentNode.childNodes).indexOf(n)),n=n.parentNode;return e.reverse()}}]),babelHelpers.createClass(t,[{key:"getAttributes",value:function(){return this._container._cross.getAttributeByPath(t.getElementPath(this._container._container,this._dom))}},{key:"getAttribute",value:function(t){return this.getAttributes()[t]}},{key:"getEventInfo",value:function(){return this._container._cross.getEventsByPath(t.getElementPath(this._container._container,this._dom))}},{key:"isListenedEvent",value:function(t){return void 0!==this.getEventInfo()[t]}},{key:"element",value:function(){return this._dom}},{key:"getElement",value:function(){return this._dom}},{key:"groupi",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return babelHelpers.toConsumableArray(this._dom.querySelectorAll('[data-groupi="'.concat(n,'"]'))).map(function(n){return new t(e._container,n)})}}]),t}();exports.MapDom=MapDom;var Template=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};babelHelpers.classCallCheck(this,t),this._id=r,this._currentState=null,this._beforeState=null,this._macrofn=Object.assign({},DefaultMacros,n),this._templateStr=e,this._code=Parser.parse(e),this._option=a,this._useprops=[]}return babelHelpers.createClass(t,[{key:"_macro",value:function(e){var n=e.tag,r=e.bodyStr,a=e.props,o=e.events,i=e.attrs;if(this._macrofn[n]){var c=this._macrofn[n]({attrs:i,events:o,props:a,bodyStr:r,parseBody:function(e){return""!==r?new t(r,this._macrofn,this._id).render(e):""}.bind(this),context:this,id:this._id,option:this._option});if(c&&c.template){var s=new t(c.template,this._macrofn,this._id).getCurrentState(c.data);if(1===s.length){var u=s[0],l=Reflect.ownKeys(o);return l.length>0&&(u.attrs["data-bind"]="".concat(this._id,":").concat(l.map(function(t){return t}).join(","))),Object.assign(u.props,a),Object.assign(u.events,o),Object.assign(u.attrs,i),[u]}throw new Error("[ada] macro must return only one node")}return c||""}return console.error("[ada] macro can not found ["+n+"] template is "+this._templateStr),""}},{key:"getAttributeByPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={children:this._currentState};return t.forEach(function(t){return e=e.children[t]}),e.props||null}},{key:"getEventsByPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={children:this._currentState};return t.forEach(function(t){return e=e.children[t]}),e.events||null}},{key:"getAllInfoByPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={children:this._currentState};return t.forEach(function(t){return e=e.children[t]}),{events:e.events,props:e.props}}},{key:"getCurrentEventMap",value:function(){return this._currentState?Differ.childrenEvents(this._currentState):[]}},{key:"getCurrentState",value:function(t){var e,n=["data"],r=[t];return n.unshift(IDNAME),n.push(this._code),r.unshift(this._id),(e=new(Function.prototype.bind.apply(Function,[null].concat(n)))).call.apply(e,[this].concat(r))}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._currentState&&(this._beforeState=this._currentState);var n=new _collector.default(t,this.getCurrentState);return this._currentState=n.invokeTemplate({},this),this._useprops=n.getUsedPros(),e&&this._beforeState?Differ.diff(this._currentState,this._beforeState):Parser.getHTMLString(this._currentState)}},{key:"isRendered",value:function(){return!this._templateStr||null!=this._beforeState}}]),t}();exports.Template=Template;var DDM=function(){function t(e){var n=e.id,r=e.container,a=void 0===r?null:r,o=e.templateStr,i=void 0===o?"":o,c=e.binders,s=void 0===c?{}:c,u=e.macro,l=void 0===u?{}:u,f=e.option,p=void 0===f?{}:f;babelHelpers.classCallCheck(this,t),this._id=n,this._container=a,this._cross=new Template(i,l,n,p),this._binders=s,this._isrender=!1}return babelHelpers.createClass(t,[{key:"_agentEvent",value:function(t){var e=this,n=this._container;_event2.default.unbind(n),t.forEach(function(t){_event2.default.canBubbleUp(t)?_event2.default.bind(n,t,function(t){for(var n=t.target,r=t.type,a=n,o=[];a&&a!==e._container&&a!==window;){var i=a.dataset.bind;if(i){var c=i.split(":"),s=c[0],u=c[1]?c[1].split(","):[];if(s===e.getId()&&-1!==u.indexOf(r)){var l=e._cross.getAllInfoByPath(MapDom.getElementPath(e._container,a)),f=l.events,p=l.props,d=f[t.type];d&&o.push({info:d,props:p})}}a=a.parentNode}o.forEach(function(n){var r=n.info,a=n.props,o=r.method,i=r.parameters,c=r.paranames;if(e._binders){var s={e:t,props:a};c.split(",").forEach(function(t,e){return s[t]=i[e]}),e._binders({method:o,parameters:s})}})}):_event2.default.bind(n,type,function(t){var n=t.target,r=t.type,a=n.dataset.bind;if(a){var o=a.split(":"),i=(o[0],o[1]?o[1].split(","):[]);if(e._cross.getId(),-1!==i.indexOf(r)){var c=e._cross.getAllInfoByPath(MapDom.getElementPath(e._container,n)),s=c.events,u=c.props,l=s[t.type];if(l){l.method;var f=l.parameters,p=l.paranames;if(e._binders){var d={e:t,props:u};p.split(",").forEach(function(t,e){return d[t]=f[e]}),e._binders({method:l.method,parameters:d})}}}}})})}},{key:"getId",value:function(){return this._id}},{key:"finder",value:function(t){return this.finders(t)[0]}},{key:"finders",value:function(t){var e=this,n="".concat(this._id,":").concat(t),r='[data-find="'.concat(n,'"]');return babelHelpers.toConsumableArray(this._container.querySelectorAll(r)).map(function(t){return new MapDom(e,t)})}},{key:"group",value:function(t){return this.groups(t)}},{key:"groups",value:function(t){var e=this,n="".concat(this._id,":").concat(t),r='[data-group="'.concat(n,'"]');return babelHelpers.toConsumableArray(this._container.querySelectorAll(r)).map(function(t){return new MapDom(e,t)})}},{key:"modules",value:function(){var t=this,e='[data-module="'.concat(this._id,'"]');return babelHelpers.toConsumableArray(this._container.querySelectorAll(e)).map(function(e){return new MapDom(t,e)})}},{key:"render",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._cross.render(t,n);return n&&this._cross.isRendered()?r&&Effecter.effect(this._container,r):r&&(this._container.innerHTML=r),this._agentEvent(this._cross.getCurrentEventMap()),this._isrender=!0,this}},{key:"getUseProps",value:function(){return this._cross._useprops}},{key:"isRendered",value:function(){return this._isrender}}],[{key:"setDefaultMacro",value:function(t,e){return DefaultMacros[t]=e,null}},{key:"setDefaultAssignDirective",value:function(t,e){return DefaultAssignDirectives[t]=e,function(t){Parser.beautySyntax.syntaxs[t]=function(e){return"<%=assign(".concat(t,",").concat(e,");%>")}}(t),null}}]),t}();exports.DDM=DDM;var _default=DDM;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CONNECTSTATE=exports.DATASETACTION=exports.CHANGEPROPS=exports.USEPROPS=exports.DATASETEDITS=exports.PROXY_STATE=exports.DATASETRANSACTION=exports.DATASETLISTENER=exports.DATASETSERVICE=exports.DATASETDATA=exports.DATASETOWNER=exports.VIEWNAME=exports.CONNECTS=exports.VIEWINFO=exports.HANDLERS=exports.SUBSCRIBE=exports.BINDERS=exports.DATASET=exports.OUTERVIEW=exports.GROUPFUL=exports.ROOTELEMENTNAME=exports.PREREMOVED=exports.ISREMOVED=exports.CLASSNAME=exports.DDMCONTAINER=exports.IDNAME=exports.CHILDRENTAG=exports.ELEMENTTAG=exports.PARENTVIEWTAG=exports.VIEWTAG=exports.DDMTAG=void 0;var DDMTAG=Symbol("ddm");exports.DDMTAG=DDMTAG;var VIEWTAG=Symbol("view");exports.VIEWTAG=VIEWTAG;var PARENTVIEWTAG=Symbol("parent");exports.PARENTVIEWTAG=PARENTVIEWTAG;var ELEMENTTAG=Symbol("node");exports.ELEMENTTAG=ELEMENTTAG;var CHILDRENTAG=Symbol("children");exports.CHILDRENTAG=CHILDRENTAG;var IDNAME=Symbol("viewid");exports.IDNAME=IDNAME;var DDMCONTAINER=Symbol("ddmbody");exports.DDMCONTAINER=DDMCONTAINER;var CLASSNAME=Symbol("class");exports.CLASSNAME=CLASSNAME;var ISREMOVED=Symbol("isremove");exports.ISREMOVED=ISREMOVED;var PREREMOVED=Symbol("preremoved");exports.PREREMOVED=PREREMOVED;var ROOTELEMENTNAME="ada-root";exports.ROOTELEMENTNAME=ROOTELEMENTNAME;var GROUPFUL=Symbol("groupful");exports.GROUPFUL=GROUPFUL;var OUTERVIEW=Symbol("outview");exports.OUTERVIEW=OUTERVIEW;var DATASET="dataset";exports.DATASET=DATASET;var BINDERS=Symbol("binders");exports.BINDERS=BINDERS;var SUBSCRIBE=Symbol("subscribe");exports.SUBSCRIBE=SUBSCRIBE;var HANDLERS=Symbol("handler");exports.HANDLERS=HANDLERS;var VIEWINFO=Symbol("viewinfo");exports.VIEWINFO=VIEWINFO;var CONNECTS=Symbol("connects");exports.CONNECTS=CONNECTS;var VIEWNAME=Symbol("name");exports.VIEWNAME=VIEWNAME;var DATASETOWNER=Symbol("owner");exports.DATASETOWNER=DATASETOWNER;var DATASETDATA=Symbol("data");exports.DATASETDATA=DATASETDATA;var DATASETSERVICE=Symbol("service");exports.DATASETSERVICE=DATASETSERVICE;var DATASETLISTENER=Symbol("listener");exports.DATASETLISTENER=DATASETLISTENER;var DATASETRANSACTION=Symbol("transaction");exports.DATASETRANSACTION=DATASETRANSACTION;var PROXY_STATE=Symbol("proxy");exports.PROXY_STATE=PROXY_STATE;var DATASETEDITS=Symbol("setprops");exports.DATASETEDITS=DATASETEDITS;var USEPROPS=Symbol("useprops");exports.USEPROPS=USEPROPS;var CHANGEPROPS=Symbol("changeprops");exports.CHANGEPROPS=CHANGEPROPS;var DATASETACTION=Symbol("action");exports.DATASETACTION=DATASETACTION;var CONNECTSTATE=Symbol("connectstate");exports.CONNECTSTATE=CONNECTSTATE;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dispatcher=void 0;var _view=require(1),_const=require(7),Dispatcher=function(){function e(){babelHelpers.classCallCheck(this,e),this._listener=[]}return babelHelpers.createClass(e,[{key:"observe",value:function(e){return e instanceof _view.View&&-1===this._listener.indexOf(e)&&this._listener.push(e),this}},{key:"unobserve",value:function(e){var t=this._listener.indexOf(e);return-1!==t&&this._listener.splice(t,1),this}},{key:"dispatch",value:function(e,t){this._listener=this._listener.filter(function(r){if(!r.isRemoved()){var i=r[_const.SUBSCRIBE][e];try{i&&r[i]&&r[i](t)}catch(e){console.error("[ada] dispatcher subscriber call error ",e)}return!0}})}}]),e}();exports.Dispatcher=Dispatcher;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _tags=babelHelpers.interopRequireDefault(require(14)),_dataset2=require(3),_const=require(7),QUREYREG=/(^|&).*=([^&]*)(&|$)/,TEMPLATEREG=/class=(["'])(?:(?=(\\?))\2.)*?\1/g,CUSTOMTAGREG_A=/<[\s\S]+?>/g,CUSTOMTAGREG_B=/<[0-9a-z_-]+?>/,CUSTOMTAGREG_C=/<[0-9a-z_-]+ .*?>/,CUSTOMTAGREG_D=/<\/[0-9a-z_-]+?>/,STYLEREG=/\{|\}/,STYLEREG_B=/\.[0-9a-zA-Z-]+/g,ISHTMLREG=/^\s*<(\w+|!)[^>]*>/,util={randomid:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return t<=2&&(t=7),Math.random().toString(36).slice(2,t+2)},isString:function(t){return"string"==typeof t&&t.constructor===String},setProp:function(t,e,n){Reflect.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})},isFunction:function(t){return"function"==typeof t&&t.constructor===window.Function},isEqual:function(t,e){if(null===t||void 0===t||null===e||void 0===e)return t===e;if(t.constructor!==e.constructor)return!1;if(t instanceof Function)return t===e;if(t instanceof RegExp)return t===e;if(t===e||t.valueOf()===e.valueOf())return!0;if(Array.isArray(t)&&t.length!==e.length)return!1;if(t instanceof Date)return!1;if(!(t instanceof Object))return!1;if(!(e instanceof Object))return!1;var n=Object.keys(t);return Object.keys(e).every(function(t){return-1!==n.indexOf(t)})&&n.every(function(n){return util.isEqual(t[n],e[n])})},queue:function(t){var e=null,n=[];return t.forEach(function(t){e=e?e.then(function(e){return n.push(e),t()}):t()}),e?e.then(function(t){return n.push(t),n}):Promise.resolve([])},isObject:function(t){return"object"===babelHelpers.typeof(t)&&"[object object]"===Object.prototype.toString.call(t).toLowerCase()&&!t.length},isPlainObject:function(t){return this.isObject(t)&&t.constructor.prototype===Object.prototype},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isQueryString:function(t){return util.isString(t)&&QUREYREG.test(t)},queryString:function(t){var e=[];if(t){for(var n in t){var r=t[n];util.isString(r)?e.push("".concat(n,"=").concat(window.encodeURIComponent(r))):util.isObject(r)||util.isArray(r)?e.push("".concat(n,"=").concat(window.encodeURIComponent(JSON.stringify(r)))):e.push("".concat(n,"=").concat(void 0!==r&&null!==r?window.encodeURIComponent(r.toString()):""))}return e.join("&")}return""},postData:function(t,e){if(t){if(t instanceof FormData||t instanceof Blob||t instanceof ArrayBuffer)return t;if(util.isObject(t)){var n=!1;for(var r in t)if(t[r]instanceof Blob||t[r]instanceof ArrayBuffer||t[r]instanceof File){n=!0;break}if(n){var i=new FormData;for(var a in t)t[a]instanceof Blob?i.append(a,t[a]):t[a]instanceof File?i.append(a,t[a]):util.isArray(t[a])||util.isObject(t[a])?i.append(a,window.encodeURIComponent(JSON.stringify(t[a]))):t[a]instanceof FormData||i.append(a,window.encodeURIComponent(t[a].toString()));return i}return e?util.queryString(t):JSON.stringify(t)}return util.isArray(t)?window.encodeURIComponent(JSON.stringify({key:t})):t}return null},parseTemplate:function(t,e){return e?t.replace(TEMPLATEREG,function(t){if(-1===t.indexOf("{{")){var n=t.substring(7,t.length-1).trim().split(" ").map(function(t){return":"===t[0]?t.substring(1):e+"-"+t}),r=t.substr(6,1);return"class=".concat(r).concat(n.join(" ")).concat(r)}var i=t.substring(9,t.length-3).trim();return'class="{{('.concat(i,").split(' ').map(key=>key?(key[0]!==':'?('").concat(e,"-'+key):key.substring(1)):'').join(' ')}}\"")}):t},parseCustomTag:function(t,e){return t.replace(CUSTOMTAGREG_A,function(t){return t.replace(CUSTOMTAGREG_B,function(t){var n=t.substring(1,t.length-1);return _tags.default.has(n)||void 0!==e[n]?'<@custom @customTagName="'.concat(n,'">'):(_tags.default.isRegularTag(n)||console.warn("[ada] tag [".concat(n,"] seemed not supported")),t)}).replace(CUSTOMTAGREG_C,function(t){var n=t.split(" "),r=n.shift().substring(1);return _tags.default.has(r)||void 0!==e[r]?(n.unshift('<@custom @customTagName="'.concat(r,'"')),n.join(" ")):(_tags.default.isRegularTag(r)||console.warn("[ada] tag [".concat(r,"] seemed not supported")),t)}).replace(CUSTOMTAGREG_D,function(t){var n=t.substring(2,t.length-1);return _tags.default.has(n)||void 0!==e[n]?"</@custom>":(_tags.default.isRegularTag(n)||console.warn("[ada] tag [".concat(n,"] seemed not supported")),t)})})},parseStyle:function(t,e){var n="",r=[],i=[];return t.split(STYLEREG).forEach(function(t){var e=t.trim();-1!==e.indexOf("@")&&(i.push([].concat(r)),r=[]),r.push(e)}),i.push(r),i.forEach(function(t){var r=!1,i=[];-1!==t[0].indexOf("@")&&(r=!0,n+=t[0]+"{",t.shift()),t.forEach(function(t,n){t=t.trim(),(n+1)%2!=0?i.push(t.replace(STYLEREG_B,function(t){return t.substring(1).trim()!==e?".".concat(e,"-").concat(t.substring(1)):t})):t&&i.push("{"+t+"}")}),n+=r?i.join("")+"}":i.join("")}),n},excuteStyle:function(t,e){if(!document.getElementById(e)){var n=document.createElement("style");n.setAttribute("media","screen"),n.setAttribute("type","text/css"),n.setAttribute("id",e),n.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(n)}},hashCode:function(t){for(var e=0,n=0;n<t.length;n++){e=(e<<5)-e+t.charCodeAt(n),e&=e}return e},encodeHTML:function(t){if(ISHTMLREG.test(t)){var e=document.createElement("div");return void 0!=e.textContent?e.textContent=t:e.innerText=t,e.innerHTML}return t},getMappedPath:function(t){return"P".concat(Math.abs(util.hashCode(t)))},extend:function(){var t,e,n,r,i,a,o=arguments[0]||{},u=1,c=arguments.length,s=!1;for("boolean"==typeof o&&(s=o,o=arguments[u]||{},u++),"object"===babelHelpers.typeof(o)||util.isFunction(o)||(o={}),u===c&&(o=this,u--);u<c;u++)if(null!=(t=arguments[u]))for(e in t)n=o[e],o!==(r=t[e])&&(s&&r&&(util.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,a=n&&Array.isArray(n)?n:[]):a=n&&util.isPlainObject(n)?n:{},o[e]=util.extend(s,a,r)):void 0!==r&&(o[e]=r));return o},clone:function(t){return this.isArray(t)?this.extend([],t):this.extend({},t)},isTargetDataSet:function(t,e){var n=!0;return t[_const.DATASETSERVICE]instanceof e.service||(n=!1),n&&e.type&&(t instanceof e.type||(n=!1)),n},checkDataSetMetaInfo:function(t){util.isFunction(t)&&(t={service:t});var e=!0,n="",r=Object.assign({type:_dataset2.DataSet,service:null},t);return util.isFunction(r.type)&&r.type.prototype instanceof _dataset2.DataSet||r.type===_dataset2.DataSet||(e=!1,n="[ada] dataset must be a class or subclass of  DataSet"),util.isFunction(r.service)&&(r.service.prototype instanceof _dataset2.Service||r.service===_dataset2.Service)||(e=!1,n="[ada] service must be a class or subclass of  Service"),{checked:e,errorInfo:n,info:r}},getDataSetFromParent:function(t,e){for(var n=null,r=t.getParent();r;){var i=r[_const.DATASET];if(i&&this.isTargetDataSet(i,e)){n=i;break}r=r.getParent()}return n},isProxy:function(t){return!!t&&!!t[_const.PROXY_STATE]},isChanges:function(t,e){if(t&&e&&t.length>0&&e.length>0){var n=t.map(function(t){var e=t.split(".");return e.length>1&&e.pop(),e.join(".")});return e.filter(function(t){return-1!==n.indexOf(t)}).length>0}return 0!==t.length&&0!==e.length}},_default=util;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.view=view,exports.root=root,exports.action=action,exports.handler=handler,exports.binder=binder,exports.subscribe=subscribe;var _util=babelHelpers.interopRequireDefault(require(9)),_metadata=babelHelpers.interopRequireDefault(require(11)),_tags=babelHelpers.interopRequireDefault(require(14));function setViewAnnotation(t,e){if(null===e||_util.default.isObject(e))return function(a){var n=e||{};if(n.dataset){var r=_util.default.checkDataSetMetaInfo(n.dataset),o=r.checked,i=r.errorInfo,u=r.info;if(!o)throw Error("[data] view dataset error ".concat(i));n.dataset=u}n.tagName&&_tags.default.set(n.tagName,a),_metadata.default.defineMetadata(t,n,a.prototype)};_metadata.default.defineMetadata(t,{},e.prototype)}function setMethodAnnotation(t,e){if(e)return function(a,n){var r=_metadata.default.getMetadata(t,a)||{};e.split(",").forEach(function(t){return r[t]=n}),_metadata.default.defineMetadata(t,r,a)};throw Error("[ada] annotation ".concat(e," name can not be empty"))}function view(){return setViewAnnotation("view",arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}function root(){return setViewAnnotation("root",arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}function action(t){return setMethodAnnotation("action",t)}function handler(t){return setMethodAnnotation("handler",t)}function binder(t){return setMethodAnnotation("binder",t)}function subscribe(t){return setMethodAnnotation("subscribe",name)}},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var METADATAKEY=Symbol("[[metadata]]"),Metadata={defineMetadata:function(e,t,a){-1===Reflect.ownKeys(a).indexOf(METADATAKEY)&&Reflect.defineProperty(a,METADATAKEY,{enumerable:!1,configurable:!1,writable:!1,value:{}}),a[METADATAKEY][e]=t},getMetadata:function(e,t){for(var a=t,r=void 0;a;){if(-1!==Reflect.ownKeys(a).indexOf(METADATAKEY)){r=a[METADATAKEY][e];break}a=Reflect.getPrototypeOf(a)}return r},getMetadataExtends:function(e,t){for(var a=t,r=[];a;)-1!==Reflect.ownKeys(a).indexOf(METADATAKEY)&&r.push(a[METADATAKEY][e]),a=Reflect.getPrototypeOf(a);return Object.assign.apply(Object,[{}].concat(babelHelpers.toConsumableArray(r.reverse())))}},_default=Metadata;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _tags=babelHelpers.interopRequireDefault(require(14)),_ddm=babelHelpers.interopRequireDefault(require(6));_ddm.default.setDefaultMacro("icon",function(t){var e=t.attrs;return{template:'<svg class="'.concat(e.class||"ada-icon",'"><use xlink:href="#').concat(e.id,'"></use></svg>'),props:{}}}),_ddm.default.setDefaultAssignDirective("icon",function(t){return'<svg class="icon"><use xlink:href="#'.concat(t,'"></use></svg>')});var macros={module:function(t){var e=t.bodyStr,a=t.props,o=(t.events,t.attrs),r=['data-module=""'];return Reflect.ownKeys(o).forEach(function(t){return r.push("".concat(t,'="').concat(t,'"'))}),{template:"<div ".concat(r.join(" "),">").concat(e,"</div>"),data:a}},custom:function(t){var e=t.bodyStr,a=t.props,o=(t.events,t.attrs),r=t.option,n=['data-module=""'];Reflect.ownKeys(o).forEach(function(t){return n.push("".concat(t,'="').concat(t,'"'))});var c="<div ".concat(n.join(" "),">").concat(e,"</div>"),s=a.customTagName,u=r.tags?r.tags[s]:null;if(u||(u=_tags.default.get(s)),!u)throw Error("[ada] tag [".concat(s,"] can not defined"));return a.type=u,{template:c,data:a}}},_default=macros;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _config=babelHelpers.interopRequireDefault(require(15)),Log={info:function(){},error:function(){},debug:function(){},warn:function(){}};_config.default.get().develop&&(Log={info:function(){for(var e,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];var a=["%c"+r.join(" ")];a.push("color:#D7D7D7;font-size:12px;"),(e=console).log.apply(e,a)},error:function(){var e;(e=console).error.apply(e,babelHelpers.toConsumableArray(args))},debug:function(){var e;(e=console).debug.apply(e,babelHelpers.toConsumableArray(args))},warn:function(){var e;(e=console).warn.apply(e,babelHelpers.toConsumableArray(args))}});var _default=Log;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var base={regularTags:[],tags:{},get:function(e){return this.tags[e]},set:function(e,t){this.tags[e]=t},has:function(e){return void 0!==this.get(e)},remove:function(e){var t=this;Reflect.ownKeys(this.tags).filter(function(r){return t.tags[r]===e}).forEach(function(e){return delete t.tags[e]})},isRegularTag:function(e){var t=!0;if(-1===this.regularTags.indexOf(e)){var r=document.createElement(e);r instanceof HTMLElement||r instanceof SVGElement?this.regularTags.push(e):t=!1}return t}},_default=base;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var config={root:"",basePath:"",parameter:{},develop:!0},ConfigManager={set:function(e){Object.assign(e,e)},get:function(){return config}},_default=ConfigManager;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _const=require(7),util={isProxy:function(e){return!!e&&!!e[_const.PROXY_STATE]},isProxyable:function(e){if(!e)return!1;if("object"!==babelHelpers.typeof(e))return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype},markChanged:function(e){e._modified||(e._modified=!0,e._copy=this.shallowCopy(e._data),Object.assign(e._copy,e._children),e._parent&&this.markChanged(e._parent))},shallowCopy:function(e){if(Array.isArray(e))return e.slice();var t=void 0===e.__proto__?Object.create(null):{};return Object.assign(t,e)},setPropName:function(e,t,r){t._parent?t[e]=[t._parent[e],r].join("."):t[e]=r},finalize:function(e){var t=this;if(this.isProxy(e)){var r=e[_const.PROXY_STATE];return!0===r._modified?!0===r._finalized?r._copy:(r._finalized=!0,Array.isArray(r._copy)&&r._copy.forEach(function(e,o){e!==r._data[o]&&(r._copy[o]=t.finalize(e))}),Reflect.ownKeys(r._copy).forEach(function(e){var o=r._copy[e];o!==r._data[e]&&(r._copy[e]=t.finalize(o))}),this.freeze(r._copy)):r._data}return this.finalizeNonProxiedObject(e),e},finalizeNonProxiedObject:function(e){var t=this;this.isProxyable(e)&&!Object.isFrozen(e)&&(Array.isArray(e)?e.forEach(function(r,o){t.isProxy(r)?e[o]=t.finalize(r):t.finalizeNonProxiedObject(r)}):Reflect.ownKeys(e).forEach(function(r){var o=e[r];t.isProxy(o)?e[r]=t.finalize(o):t.finalizeNonProxiedObject(o)}),this.freeze(e))},freeze:function(e){return e},createProxy:function(e,t,r){var o=Proxy.revocable(new State(t,r,e),handler),i=o.proxy,n=o.revoke;return e._revokes.push(n),i},cleanTemplateState:function(e,t){var r=this;Array.isArray(e)?e.forEach(function(e){r.cleanTemplateState(e,t)}):(e.props&&(util.isProxy(e.props.parameter)&&(e.props.useProps||(e.props.useProps=new Set),e.props.useProps.add(e.props.parameter[_const.PROXY_STATE]._prop)),Reflect.ownKeys(e.props.parameter||{}).forEach(function(t){var r=e.props.parameter[t];util.isProxy(r)&&(e.props.useProps||(e.props.useProps=new Set),e.props.useProps.add(r[_const.PROXY_STATE]._parent._prop))}),e.props.useProps&&(e.props.useProps=babelHelpers.toConsumableArray(e.props.useProps))),e.children&&e.children.forEach(function(e){return r.cleanTemplateState(e,t)}))},cleanCollector:function(e){e._revokes.forEach(function(e){return e()}),e._getprops=babelHelpers.toConsumableArray(e._getprops),e._setprops=babelHelpers.toConsumableArray(e._setprops)},isProxyProp:function(e){return"string"==typeof e||"number"==typeof e}},State=function e(t,r,o){babelHelpers.classCallCheck(this,e),this._data=r,this._parent=t,this._children={},this._modified=!1,this._copy=null,this._prop="",this._finalized=!1,this._collector=o},handler={get:function(e,t){if(t===_const.PROXY_STATE)return e;var r=e._data[t];if(util.isProxyProp(t)&&(util.setPropName("_prop",e,t),e._collector._getprops.add(e._prop)),e._modified){if((r=e._copy[t])===e._data[t]&&util.isProxyable(r))return e._copy[t]=util.createProxy(e._collector,e,r)}else{if(e._children[t])return e._children[t];var o=e._data[t];!util.isProxy(o)&&util.isProxyable(o)&&(r=e._children[t]=util.createProxy(e._collector,e,o))}return r},set:function(e,t,r){if(util.isProxyProp(t)&&(util.setPropName("_prop",e,t),e._data[t]!==r&&e._collector._setprops.add(e._prop)),!e._modified){if(e._data[t]&&e._data[t]===r||e._children[t]&&e._children[t]===r)return e._collector._setprops.delete(e._prop),!0;util.markChanged(e)}return e._copy[t]=r,!0},has:function(e,t){return t in e._data},ownKeys:function(e){return Reflect.ownKeys(e._data)},deleteProperty:function(e,t){return!0}},Collector=function(){function e(t,r){babelHelpers.classCallCheck(this,e),this.fn=r,this._revokes=[],this._root=util.createProxy(this,null,t),this._getprops=new Set,this._setprops=new Set}return babelHelpers.createClass(e,[{key:"getUsedPros",value:function(){return this._getprops}},{key:"getChangedProps",value:function(){return this._setprops}},{key:"invoke",value:function(e,t){var r=this,o=this.fn.call(t||{},this._root,e||{}),i=null;return void 0!==o&&o!==this._root?o.then?o.then(function(e){return util.cleanCollector(r),util.finalize(e)}):(i=util.finalize(o),util.cleanCollector(this),i):(i=util.finalize(this._root),util.cleanCollector(this),i)}},{key:"invokeTemplate",value:function(e,t){var r=this.fn.call(t,this._root,e),o=null;return util.cleanTemplateState(r,this),o=void 0!==r&&r!==this._root?util.finalize(r):util.finalize(this._root),util.cleanCollector(this),o}}]),e}(),_default=Collector;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _base=babelHelpers.interopRequireDefault(require(20)),updater={refresh:function(e,r){return _base.default.replaceAll(e,r)}},_default=updater;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _controllbar=babelHelpers.interopRequireDefault(require(21)),_controllbar2=babelHelpers.interopRequireDefault(require(22)),_controllerPlay=babelHelpers.interopRequireDefault(require(23)),_controllerPaus=babelHelpers.interopRequireDefault(require(24)),STOPSTATE="ada-hmr-controllbar-stop",s=window.localStorage.getItem("ada-hmr-state");void 0===s?(s=!0,window.localStorage.setItem("ada-hmr-state","0")):s="0"===s;var bar={bar:null,isrunning:s,start:function(){var e=this;_controllbar.default.active(),_controllerPlay.default.active(),_controllerPaus.default.active();var t=document.createElement("div");t.setAttribute("class","ada-hmr-controllbar"),t.innerHTML=_controllbar2.default,this.bar=document.body.appendChild(t);var a=window.localStorage.getItem("ada-hmr-position");return a=a?JSON.parse(a):{x:30,y:window.innerHeight-30},this.bar.style.left="".concat(a.x,"px"),this.bar.style.top="".concat(a.y,"px"),babelHelpers.toConsumableArray(this.bar.querySelectorAll(".ada-hmr-controllerbar-btn-paus"))[0].addEventListener("click",function(){e.isrunning=!1,e.bar.classList.add(STOPSTATE),window.localStorage.setItem("ada-hmr-state","1")}),babelHelpers.toConsumableArray(this.bar.querySelectorAll(".ada-hmr-controllerbar-btn-play"))[0].addEventListener("click",function(){e.isrunning=!0,e.bar.classList.remove(STOPSTATE),window.localStorage.setItem("ada-hmr-state","0")}),this.ismove=!1,this.offset={x:0,y:0},this.bar.addEventListener("mousedown",function(t){var a=e.bar.getBoundingClientRect();e.ismove=!0,e.offset={x:t.pageX-a.x,y:t.pageY-a.y}}),document.addEventListener("mousemove",function(t){e.ismove&&(e.bar.style.left="".concat(t.pageX-e.offset.x,"px"),e.bar.style.top="".concat(t.pageY-e.offset.y,"px"),t.stopPropagation(),t.preventDefault())}),document.addEventListener("mouseup",function(t){e.ismove&&(e.ismove=!1,window.localStorage.setItem("ada-hmr-position",JSON.stringify({x:t.pageX-e.offset.x,y:t.pageY-e.offset.y})))}),this.isrunning?this.bar.classList.remove(STOPSTATE):this.bar.classList.add(STOPSTATE),this},getState:function(){return this.isrunning},hide:function(){this.bar.style.display="none"},show:function(){this.bar.style.display="flex"},actionStart:function(){this.bar.classList.add("ada-hmr-controllbar-action")},actionDone:function(){this.bar.classList.remove("ada-hmr-controllbar-action")}},_default=bar;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _teminal=babelHelpers.interopRequireDefault(require(25)),_teminal2=babelHelpers.interopRequireDefault(require(26)),_ddm=babelHelpers.interopRequireDefault(require(6)),teminal={element:null,init:function(){_teminal.default.active()},showError:function(e){this.hide();var t=document.createElement("div");t.setAttribute("class","ada-hmr-teminal"),document.body.appendChild(t),e.forEach(function(e){e.result.stack&&(e.result.stack=e.result.stack.split("\n"))}),new _ddm.default({id:"ada-hmr-teminal",container:t,binders:{},templateStr:_teminal2.default,macro:{}}).render({info:e}),this.element=t},hide:function(){this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)}},_default=teminal;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _metadata=babelHelpers.interopRequireDefault(require(11)),_factory=babelHelpers.interopRequireDefault(require(4)),_util=babelHelpers.interopRequireDefault(require(9)),_loader=babelHelpers.interopRequireWildcard(require(2)),_const=require(7),_tags=babelHelpers.interopRequireDefault(require(14)),_const2=require(7),ExtendModule={getRootElement:function(){return window.document.getElementById(_const.ROOTELEMENTNAME)},isMapped:function(e,t){return void 0!==t[_util.default.getMappedPath(e)]},setViewPreremoveState:function(e){var t=this;e[_const2.PREREMOVED]=!0,e.getChildren&&e.getChildren().forEach(function(e){t.setViewPreremoveState(e)})},getViewsInModule:function(e){var t=[];return _loader.Modules.scanClass(function(o,n){var a=_metadata.default.getMetadata("view",n.prototype);a&&a.module===e&&t.push(n)}),t},getViewsInPageByType:function(e){var t=[];return babelHelpers.toConsumableArray(document.querySelectorAll("[data-module]")).forEach(function(o){var n=o[_const.VIEWTAG];n instanceof e&&t.push(n)}),t},getViewsByTemplateName:function(e){var t=this,o=[];_loader.Modules.scanClass(function(t,n){var a=_metadata.default.getMetadata("view",n.prototype);a&&a.template===e&&o.push(n)});var n=[];return o.forEach(function(e){n.push.apply(n,babelHelpers.toConsumableArray(t.getViewsInPageByType(e)))}),n},getViewsByStyleName:function(e){var t=this,o=[];_loader.Modules.scanClass(function(t,n){var a=_metadata.default.getMetadata("view",n.prototype);a&&a.style===e&&o.push(n)});var n=[];return o.forEach(function(e){n.push.apply(n,babelHelpers.toConsumableArray(t.getViewsInPageByType(e)))}),n},getChangeModules:function(e){var t=this,o=babelHelpers.toConsumableArray(e);return Reflect.ownKeys(_loader.ModuleLoader.moduleFnsLoaded).forEach(function(n){var a=_loader.ModuleLoader.moduleFnsLoaded[n].toString();e.forEach(function(e){new RegExp('require\\("'.concat(e,'"\\)')).test(a)&&-1===o.indexOf(n)&&(o.push(n),t.getChangeModules([n]).forEach(function(e){-1===o.indexOf(e)&&o.push(e)}))})}),o},getFutureChangedInfo:function(e){var t=e.map(function(e){return{file:e,clazz:_loader.Modules.get(e)}}),o=[],n=!1;babelHelpers.toConsumableArray(document.querySelectorAll("[data-module]")).forEach(function(e){var a=e[_const.VIEWTAG];if(a)for(var r=0;r<t.length;r++){var l=t[r];if(_util.default.isFunction(l.clazz)&&a instanceof l.clazz&&(e===document.getElementById("ada-root")&&(n=!0,o.length=0),o.push({element:e,construct:l.clazz,module:a,name:l.file}),n))break}});var a=[];return n?a=[o[0]]:o.forEach(function(e){var t=e.element,o=!1;a.forEach(function(e){e.element.contains(t)&&(o=!0)}),o||a.push(e)}),{infos:a,isroot:n}},uninstallModules:function(e){var t=this;e.forEach(function(e){delete _loader.ModuleLoader.installed[e],delete _loader.ModuleLoader.moduleFnsLoaded[e],t.getViewsInModule(e).forEach(function(e){return _tags.default.remove(e)})})},installModules:function(e){return _util.default.queue(e.map(function(e){return function(){return _loader.Modules.excute(e)}}))},uninstallTemplates:function(e){e.forEach(function(e){_loader.ActiveSource.cache[e]&&delete _loader.ActiveSource.cache[e]})},uninstallStyles:function(e){e.forEach(function(e){_loader.ActiveSource.cache[e]&&delete _loader.ActiveSource.cache[e]})},resetSourceMap:function(e){_loader.Option.sourceMap=e},resetViewTemplate:function(e){if(e.isRemoved())return Promise.resolve();var t=e.getElement(),o=e.constructor,n=_metadata.default.getMetadata("view",o.prototype);return this.resetView({element:t,view:e,clazz:o,isroot:void 0===n})},resetViewStyle:function(e){var t=_metadata.default.getMetadata("view",e.constructor.prototype);t||(t=_metadata.default.getMetadata("root",e.constructor.prototype));var o=Promise.resolve();if(t.style){var n="".concat(t.style.replace(/\//g,"-"),":").concat(t.className),a=document.getElementById(n);a&&a.parentNode.removeChild(a),o=o.then(function(){return _loader.default.loadSource(t.style).then(function(e){_util.default.excuteStyle(_util.default.parseStyle(e,t.className),n)})})}return o},resetView:function(e){var t=e.view,o=e.clazz,n=e.element,a=e.isroot;return t.isRemoved()||(this.setViewPreremoveState(t),t.getChildren&&t.getChildren().forEach(function(e){e.getElement().parentNode.removeChild(e.getElement())}),t.getElement().innerHTML=""),_factory.default.getViewInstance({viewClass:o,parent:t.getParent(),dom:n,name:t.getName(),tag:a?"root":"view"}).then(function(e){if(!t.isRemoved()){var o=t.getParent();if(o){var a=o.getChildren(),r=a.indexOf(t);-1!==r&&(a[r]=e)}return n[_const.VIEWTAG]=e,t._clean(),e.oncreated(),e.update().then(function(){return e.onready(),e})}})},replaceViews:function(e,t,o){var n=this,a=new Set,r=new Set;return this.uninstallTemplates(e),this.uninstallStyles(t),this.resetSourceMap(o),e.forEach(function(e){n.getViewsByTemplateName(e).forEach(function(e){a.add(e)})}),t.forEach(function(e){n.getViewsByStyleName(e).forEach(function(e){r.add(e)})}),a.size>0&&console.log("%c- Try to update [".concat(a.size,"] views[ template ]..."),"color:#3D78A7;font-weight:bold"),r.size>0&&console.log("%c- Try to update [".concat(r.size,"] views[ style ]..."),"color:#3D78A7;font-weight:bold"),a.size>0||r.size>0?_util.default.queue(babelHelpers.toConsumableArray(a).map(function(e){return function(){return n.resetViewTemplate(e)}}).concat(babelHelpers.toConsumableArray(r).map(function(e){return function(){return n.resetViewStyle(e)}}))).then(function(){return console.log("%c- Replace done.","color:#3D78A7;font-weight:bold"),[]}):(console.log("%c- No view to update","color:#3D78A7;font-weight:bold"),Promise.resolve(babelHelpers.toConsumableArray(e).concat(babelHelpers.toConsumableArray(t))))},replaceModules:function(e,t){var o=this,n=this.getChangeModules(e);console.log("%c- Affect ".concat(n.length>1?"modules":"module"," [").concat(n.join(","),"]"),"color:#3D78A7;font-weight:bold");var a=this.getFutureChangedInfo(n);return this.uninstallModules(n),this.resetSourceMap(t),console.log("%c- Reset ".concat(n.length>1?"modules":"module"," and reinstall ").concat(n.length>1?"them":"it","..."),"color:#3D78A7;font-weight:bold"),this.installModules(n).then(function(){if(a.infos.length>0)return console.log("%c- Install modules done,Reset page [".concat(a.isroot?"From ROOT":"From Entry","]..."),"color:#3D78A7;font-weight:bold"),console.log("%c- Try to update [".concat(a.infos.length,"] views..."),"color:#3D78A7;font-weight:bold"),_util.default.queue(a.infos.map(function(e){return function(){var t=e.element,n=e.module,r=e.name,l=_loader.Modules.get(r);return o.resetView({view:n,clazz:l,element:t,isroot:a.isroot})}})).then(function(){console.log("%c- Reset page done.","color:#3D78A7;font-weight:bold")});console.log("%c- Install modules done,No view to update","color:#3D78A7;font-weight:bold")})},replaceAll:function(e,t){var o=this,n=new Date,a={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate(),hour:n.getHours(),minus:n.getMinutes(),second:n.getSeconds()};Reflect.ownKeys(a).forEach(function(e){a[e]<10&&(a[e]="0".concat(a[e]))}),console.log("%c[Ada] Start HMR  ".concat(a.year,"-").concat(a.month,"-").concat(a.day," ").concat(a.hour,":").concat(a.minus,":").concat(a.second),"font-weight:bold");var r=[],l=[],c=[],u=Promise.resolve([]),i=[];return(e=e.filter(function(e){var n=o.isMapped(e,t);return n||i.push(e),n})).length>0?(e.forEach(function(e){var t=e.split(".").pop();"html"===t?r.push(e):-1!==["css","scss","less"].indexOf(t)?l.push(e):c.push(e)}),(r.length>0||l.length>0)&&(u=u.then(function(){return console.log("%c- Try to replace as template or style","color:#3D78A7;font-weight:bold"),o.replaceViews(r,l,t)})),u.then(function(e){var n=babelHelpers.toConsumableArray(e).concat(c);return n.length>0?(console.log("%c- Try to replace as module","color:#3D78A7;font-weight:bold"),o.replaceModules(n,t)):Promise.resolve()}).then(function(){console.log("%cAll done.","font-weight:bold")})):u.then(function(){i.length>0&&console.log("%c- ".concat(i.length>1?"files":"file"," [").concat(i.join(","),"] ").concat(i.length>1?"are":"is"," out map"),"color:#3D78A7;font-weight:bold"),console.log("%cAll done,Nothing to update.","font-weight:bold")})}},_default=ExtendModule;exports.default=_default;},function(module,exports,require,babelHelpers){module.exports={active:function(){var _a = document.createElement("style");_a.setAttribute("media", "screen");_a.setAttribute("type", "text/css");_a.appendChild(document.createTextNode(".ada-hmr-controllbar { position: fixed; left: 10px; z-index: 999999999; cursor: default; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-logocon { width: 30px; height: 30px; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-logo { margin-left: -135px; margin-top: -135px; transform: scale(0.1, 0.1); padding: 80px; display: inline-block; position: relative; box-shadow: 0 0 10px #676767; border-radius: 50%; background: white; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-box { width: 140px; display: inline-block; vertical-align: middle; text-align: right; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-box .ada-hmr-controllbar-logo-top { height: 40px; background: #4F79AE; border-radius: 30px 60px 0 30px; width: 120px; display: inline-block; vertical-align: top; transition: all ease-out 0.2s; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-box .ada-hmr-controllbar-logo-middle { height: 40px; margin: 10px 0 10px 0; border-radius: 60px 0 0 0; background: #4F79AE; transition: all ease-out 0.2s; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-box .ada-hmr-controllbar-logo-bottom { height: 40px; border-radius: 0 0 60px 60px; background: #4F79AE; transition: all ease-out 0.2s; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-circle { position: absolute; left: 0; top: 0; right: 0; bottom: 0; border: 10px solid #4F79AE; border-radius: 50%; animation: ada-hmr-controllbar-logo-rond 2s infinite; -webkit-animation: ada-hmr-controllbar-logo-rond 2s infinite; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-circle:after { content: \"\"; display: block; width: 40px; height: 40px; position: absolute; background-color: #3D78A7; border-radius: 50%; top: -40px; left: 70px; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-btns { position: absolute; left: 3px; top: 3px; text-align: center; display: none; background: #097CF5; border-radius: 12px; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-btns .ada-hmr-controllbar-btn { width: 24px; height: 24px; text-align: center; font-size: 12px; color: white; line-height: 27px; transition: all ease-out 0.3s; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-btns .ada-hmr-controllbar-btn .ada-hmr-controllbar-icon { display: inline-block; width: 1em; height: 1em; stroke-width: 0; stroke: currentColor; fill: currentColor; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-btns .ada-hmr-controllbar-btn.ada-hmr-controllerbar-btn-play { display: none; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-btns .ada-hmr-controllbar-btn.ada-hmr-controllerbar-btn-paus { display: inline-block; } .ada-hmr-controllbar .ada-hmr-controllbar-box .ada-hmr-controllbar-btns .ada-hmr-controllbar-btn:hover { color: #E5E5E5; } .ada-hmr-controllbar .ada-hmr-controllbar-box:hover .ada-hmr-controllbar-btns { display: flex; } .ada-hmr-controllbar.ada-hmr-controllbar-stop .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-circle:after { display: none; } .ada-hmr-controllbar.ada-hmr-controllbar-stop .ada-hmr-controllbar-box .ada-hmr-controllbar-btns .ada-hmr-controllbar-btn.ada-hmr-controllerbar-btn-play { display: inline-block; } .ada-hmr-controllbar.ada-hmr-controllbar-stop .ada-hmr-controllbar-box .ada-hmr-controllbar-btns .ada-hmr-controllbar-btn.ada-hmr-controllerbar-btn-paus { display: none; } .ada-hmr-controllbar.ada-hmr-controllbar-action .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-box .ada-hmr-controllbar-logo-top { background: #ffc66d; } .ada-hmr-controllbar.ada-hmr-controllbar-action .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-box .ada-hmr-controllbar-logo-middle { background: #ffc66d; } .ada-hmr-controllbar.ada-hmr-controllbar-action .ada-hmr-controllbar-box .ada-hmr-controllbar-logo .ada-hmr-controllbar-logo-box .ada-hmr-controllbar-logo-bottom { background: #ffc66d; } @keyframes ada-hmr-controllbar-logo-rond { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } @-webkit-keyframes ada-hmr-controllbar-logo-rond { 0% { -webkit-transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); } }"));document.head.appendChild(_a);}};},function(module,exports,require,babelHelpers){module.exports="<div class=\"ada-hmr-controllbar-box\">    <div class=\"ada-hmr-controllbar-logocon\">        <div class=\"ada-hmr-controllbar-logo\">            <div class=\"ada-hmr-controllbar-logo-box\">                <div class=\"ada-hmr-controllbar-logo-top\"></div>                <div class=\"ada-hmr-controllbar-logo-middle\"></div>                <div class=\"ada-hmr-controllbar-logo-bottom\"></div>            </div>            <div class=\"ada-hmr-controllbar-logo-circle\"></div>        </div>    </div>    <div class=\"ada-hmr-controllbar-btns\">        <div class=\"ada-hmr-controllbar-btn ada-hmr-controllerbar-btn-paus\">            <svg class=\"ada-hmr-controllbar-icon\">                <use xlink:href=\"#ada-hmr-controllbar-paus\"></use>            </svg>        </div>        <div class=\"ada-hmr-controllbar-btn ada-hmr-controllerbar-btn-play\">            <svg class=\"ada-hmr-controllbar-icon\">                <use xlink:href=\"#ada-hmr-controllbar-play\"></use>            </svg>        </div>    </div></div>"},function(module,exports,require,babelHelpers){var active=function(){var c=document.getElementById("ada-icon-container");if(!c){var c=document.createElement("div");c.setAttribute("id","ada-icon-container");c.style.cssText="width:0;height:0;";document.body.appendChild(c);}if(!document.getElementById("ada-hmr-controllbar-play")){var a=document.createElement("div");a.innerHTML="<svg style=\"width:0;height:0;overflow:hidden;\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><symbol   width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" id=\"ada-hmr-controllbar-play\"><title>ada-hmr-controllbar-play</title><path d=\"M15 10.001c0 0.299-0.305 0.514-0.305 0.514l-8.561 5.303c-0.624 0.409-1.134 0.106-1.134-0.669v-10.297c0-0.777 0.51-1.078 1.135-0.67l8.561 5.305c-0.001 0 0.304 0.215 0.304 0.514z\"></path></symbol></svg>";c.appendChild(a.childNodes[0]);}};module.exports={active:function(){if(/complete|loaded|interactive/.test(window.document.readyState)){active();}else{window.addEventListener("DOMContentLoaded",function(){active();});}},getIconId:function(){return "ada-hmr-controllbar-play";}};},function(module,exports,require,babelHelpers){var active=function(){var c=document.getElementById("ada-icon-container");if(!c){var c=document.createElement("div");c.setAttribute("id","ada-icon-container");c.style.cssText="width:0;height:0;";document.body.appendChild(c);}if(!document.getElementById("ada-hmr-controllbar-paus")){var a=document.createElement("div");a.innerHTML="<svg style=\"width:0;height:0;overflow:hidden;\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><symbol   width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" id=\"ada-hmr-controllbar-paus\"><title>ada-hmr-controllbar-paus</title><path d=\"M15 3h-2c-0.553 0-1 0.048-1 0.6v12.8c0 0.552 0.447 0.6 1 0.6h2c0.553 0 1-0.048 1-0.6v-12.8c0-0.552-0.447-0.6-1-0.6zM7 3h-2c-0.553 0-1 0.048-1 0.6v12.8c0 0.552 0.447 0.6 1 0.6h2c0.553 0 1-0.048 1-0.6v-12.8c0-0.552-0.447-0.6-1-0.6z\"></path></symbol></svg>";c.appendChild(a.childNodes[0]);}};module.exports={active:function(){if(/complete|loaded|interactive/.test(window.document.readyState)){active();}else{window.addEventListener("DOMContentLoaded",function(){active();});}},getIconId:function(){return "ada-hmr-controllbar-paus";}};},function(module,exports,require,babelHelpers){module.exports={active:function(){var _a = document.createElement("style");_a.setAttribute("media", "screen");_a.setAttribute("type", "text/css");_a.appendChild(document.createTextNode(".ada-hmr-teminal { position: fixed; left: 0; top: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.9); z-index: 999999999; font-family: 'Noto Sans SC Sliced', sans-serif; } .ada-hmr-teminal .ada-hmr-teminal-head { position: absolute; left: 0; top: 0; right: 0; padding: 0 10px 0 10px; font-size: 14px; color: white; line-height: 40px; } .ada-hmr-teminal .ada-hmr-teminal-content { position: absolute; left: 0; right: 0; bottom: 0; top: 40px; border-top: 1px solid #353538; overflow: auto; } .ada-hmr-teminal .ada-hmr-teminal-content .ada-hmr-teminal-content-item { padding: 0 10px 0 10px; } .ada-hmr-teminal .ada-hmr-teminal-content .ada-hmr-teminal-content-item .ada-hmr-teminal-content-item-title { line-height: 30px; color: #ffc66d; font-size: 12px; border-bottom: 1px solid white; } .ada-hmr-teminal .ada-hmr-teminal-content .ada-hmr-teminal-content-item .ada-hmr-teminal-content-item-content { color: #e20608; font-size: 12px; line-height: 14px; } .ada-hmr-teminal .ada-hmr-teminal-content .ada-hmr-teminal-content-item .ada-hmr-teminal-content-item-content .ada-hmr-teminal-content-item-content-inner { padding: 3px 20px 3px 0; } .ada-hmr-teminal .ada-hmr-teminal-content .ada-hmr-teminal-content-item .ada-hmr-teminal-content-item-content .ada-hmr-teminal-content-item-content-a { width: 70px; color: #a9b7c6; text-align: right; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; float: left; } .ada-hmr-teminal .ada-hmr-teminal-content .ada-hmr-teminal-content-item .ada-hmr-teminal-content-item-content .ada-hmr-teminal-content-item-content-b { margin-left: 80px; } .ada-hmr-teminal .ada-hmr-teminal-content .ada-hmr-teminal-content-item .ada-hmr-teminal-content-item-content .ada-hmr-teminal-content-item-content-b .ada-hmr-teminal-content-item-content-b-a { line-height: 15px; }"));document.head.appendChild(_a);}};},function(module,exports,require,babelHelpers){module.exports="<div class=\"ada-hmr-teminal-head\">ada-pack errors</div><div class=\"ada-hmr-teminal-content\">    {{list info as item}}    <div class=\"ada-hmr-teminal-content-item\">        <div class=\"ada-hmr-teminal-content-item-title\">{{item.path}}</div>        <div class=\"ada-hmr-teminal-content-item-content\">            <div class=\"ada-hmr-teminal-content-item-content-inner\">                <div class=\"ada-hmr-teminal-content-item-content-a\">name</div>                <div class=\"ada-hmr-teminal-content-item-content-b\">{{item.result.name}}</div>            </div>            <div class=\"ada-hmr-teminal-content-item-content-inner\">                <div class=\"ada-hmr-teminal-content-item-content-a\">message</div>                <div class=\"ada-hmr-teminal-content-item-content-b\">{{item.result.message}}</div>            </div>            <div class=\"ada-hmr-teminal-content-item-content-inner\">                <div class=\"ada-hmr-teminal-content-item-content-a\">stack</div>                <div class=\"ada-hmr-teminal-content-item-content-b\">                    {{list item.result.stack as stack}}                    <div class=\"ada-hmr-teminal-content-item-content-b-a\">{{stack}}</div>                    {{/list}}                </div>            </div>        </div>    </div>    {{/list}}</div>"},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var EVENTTYPES={HTMLEvents:"load,unload,abort,error,select,change,submit,reset,focus,blur,resize,scroll",MouseEvent:"click,mousedown,mouseup,mouseover,mousemove,mouseout",UIEvent:"DOMFocusIn,DOMFocusOut,DOMActivate",MutationEvent:"DOMSubtreeModified,DOMNodeInserted,DOMNodeRemoved,DOMNodeRemovedFromDocument,DOMNodeInsertedIntoDocument,DOMAttrModified,DOMCharacterDataModified"},UNBUBBLINGEVENT=["unload","abort","error","scroll","focus","blur","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","progress","load","loadend","pointerenter","pointerleave","rowexit","stop","finish","bounce","afterprint","propertychange","filterchange","readystatechange","losecapture","dragdrop","dragenter","dragexit","draggesture","dragover","RadioStateChange","close","command","contextmenu","overflow","overflowchanged","underflow","popuphidden","popuphiding","popupshowing","popupshown","commandupdate"];function eventHandler(e){var t=e.currentTarget.events[e.type];for(var n in t)t[n].call(e.currentTarget,e)}var helper={isEvent:function(e){var t={type:e,interfaceName:null};for(var n in EVENTTYPES)if(-1!==EVENTTYPES[n].indexOf(e)){t.interfaceName=n;break}return t},trigger:function(e,t,n){var r=helper.isEvent(t);if(r.interfaceName){var o=document.createEvent(r.interfaceName);switch(r.interfaceName){case"MouseEvent":o.initMouseEvent(t,!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);break;case"HTMLEvents":o.initEvent(t,!0,!1,window);break;case"UIEvents":o.initUIEvents(t,!0,!1,window,null);break;case"MutationEvent ":o.initMutationEvent(t,!0,!1,window,null,null,null,null)}e.dispatchEvent(o)}else{var a=document.createEvent("CustomEvent");a.initCustomEvent(t,!0,!0,n),e.dispatchEvent(a)}return e},canBubbleUp:function(e){return-1===UNBUBBLINGEVENT.indexOf(e)},bind:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.events||(e.events={}),e.events[t]?e.events[t].push(n):(e.events[t]=[],e.events[t].push(n)),e.addEventListener(t,eventHandler,r),e},unbind:function(e,t,n){if(e.events)if(t&&""!==t){var r=e.events[t];r&&(e.removeEventListener(t,eventHandler,!1),n?r.splice(r.indexOf(n),1):r.length=0)}else{e.events;Reflect.ownKeys(e.events).forEach(function(t){e.removeEventListener(t,eventHandler,!1),e.events[t].length=0})}return e}},_default=helper;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={DDM:!0,util:!0,ajax:!0,get:!0,post:!0,BondViewGroup:!0,StaticViewGroup:!0,View:!0,ViewGroup:!0,ViewConnector:!0,DataSet:!0,DataSetHelper:!0,Service:!0,TransactDataSet:!0,Dispatcher:!0};Object.defineProperty(exports,"ajax",{enumerable:!0,get:function(){return _request.ajax}}),Object.defineProperty(exports,"get",{enumerable:!0,get:function(){return _request.get}}),Object.defineProperty(exports,"post",{enumerable:!0,get:function(){return _request.post}}),Object.defineProperty(exports,"BondViewGroup",{enumerable:!0,get:function(){return _view.BondViewGroup}}),Object.defineProperty(exports,"StaticViewGroup",{enumerable:!0,get:function(){return _view.StaticViewGroup}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return _view.View}}),Object.defineProperty(exports,"ViewGroup",{enumerable:!0,get:function(){return _view.ViewGroup}}),Object.defineProperty(exports,"ViewConnector",{enumerable:!0,get:function(){return _view.ViewConnector}}),Object.defineProperty(exports,"DataSet",{enumerable:!0,get:function(){return _dataset.DataSet}}),Object.defineProperty(exports,"DataSetHelper",{enumerable:!0,get:function(){return _dataset.DataSetHelper}}),Object.defineProperty(exports,"Service",{enumerable:!0,get:function(){return _dataset.Service}}),Object.defineProperty(exports,"TransactDataSet",{enumerable:!0,get:function(){return _dataset.TransactDataSet}}),Object.defineProperty(exports,"Dispatcher",{enumerable:!0,get:function(){return _dispatcher.Dispatcher}}),exports.default=exports.util=exports.DDM=void 0;var _request=require(0),_view=require(1),_loader=babelHelpers.interopRequireWildcard(require(2)),_dataset=require(3),_factory=babelHelpers.interopRequireDefault(require(4)),_client=babelHelpers.interopRequireDefault(require(5)),_ddm=babelHelpers.interopRequireDefault(require(6)),_const=require(7),_dispatcher=require(8),_util=babelHelpers.interopRequireDefault(require(9)),_annotation=require(10);Object.keys(_annotation).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(_exportNames,e)||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _annotation[e]}}))});var ada={modules:_loader.Modules,boot:_factory.default.boot,unpack:function(e){_loader.default.decompress(e)},installModule:function(e,t){_loader.Modules.set(e,t)},view:function(e){return e[_const.VIEWTAG]},client:_client.default},util={randomid:_util.default.randomid,hashCode:_util.default.hashCode,isString:_util.default.isString,isFunction:_util.default.isFunction,isEqual:_util.default.isEqual,isObject:_util.default.isObject,isPlainObject:_util.default.isPlainObject,isArray:_util.default.isArray,isQueryString:_util.default.isQueryString,excuteStyle:_util.default.excuteStyle,encodeHTML:_util.default.encodeHTML,extend:_util.default.extend};exports.util=util;var DDM={setDefaultMacro:_ddm.default.setDefaultMacro,setDefaultAssignDirective:_ddm.default.setDefaultAssignDirective};exports.DDM=DDM,window.Ada=ada;var _default=ada;exports.default=_default;}],"adajs");