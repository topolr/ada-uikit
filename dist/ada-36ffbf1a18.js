/*! adajs[Publish] 2.0.0 https://github.com/topolr/ada | https://github.com/topolr/ada/blob/master/LICENSE */
/* babelHelper version:7.0.0-beta.53 */
(function(global){var REACT_ELEMENT_TYPE,babelHelpers={};function _typeof(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?babelHelpers.typeof=_typeof=function(e){return typeof e}:babelHelpers.typeof=_typeof=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _createRawReactElement(e,r,t,n){REACT_ELEMENT_TYPE||(REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,a=arguments.length-3;if(r||0===a||(r={children:void 0}),r&&o)for(var l in o)void 0===r[l]&&(r[l]=o[l]);else r||(r=o||{});if(1===a)r.children=n;else if(a>1){for(var i=new Array(a),s=0;s<a;s++)i[s]=arguments[s+3];r.children=i}return{$$typeof:REACT_ELEMENT_TYPE,type:e,key:void 0===t?null:""+t,ref:null,props:r,_owner:null}}function _asyncIterator(e){var r;if("function"==typeof Symbol){if(Symbol.asyncIterator&&null!=(r=e[Symbol.asyncIterator]))return r.call(e);if(Symbol.iterator&&null!=(r=e[Symbol.iterator]))return r.call(e)}throw new TypeError("Object is not async iterable")}function _AwaitValue(e){this.wrapped=e}function AsyncGenerator(e){var r,t;function n(r,t){try{var a=e[r](t),l=a.value,i=l instanceof babelHelpers.AwaitValue;Promise.resolve(i?l.wrapped:l).then(function(e){i?n("next",e):o(a.done?"return":"normal",e)},function(e){n("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":r.resolve({value:o,done:!0});break;case"throw":r.reject(o);break;default:r.resolve({value:o,done:!1})}(r=r.next)?n(r.key,r.arg):t=null}this._invoke=function(e,o){return new Promise(function(a,l){var i={key:e,arg:o,resolve:a,reject:l,next:null};t?t=t.next=i:(r=t=i,n(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function _wrapAsyncGenerator(e){return function(){return new babelHelpers.AsyncGenerator(e.apply(this,arguments))}}function _awaitAsyncGenerator(e){return new babelHelpers.AwaitValue(e)}function _asyncGeneratorDelegate(e,r){var t={},n=!1;function o(t,o){return n=!0,o=new Promise(function(r){r(e[t](o))}),{done:!1,value:r(o)}}return"function"==typeof Symbol&&Symbol.iterator&&(t[Symbol.iterator]=function(){return this}),t.next=function(e){return n?(n=!1,e):o("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return o("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return o("return",e)}),t}function asyncGeneratorStep(e,r,t,n,o,a,l){try{var i=e[a](l),s=i.value}catch(e){return void t(e)}i.done?r(s):Promise.resolve(s).then(n,o)}function _asyncToGenerator(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var a=e.apply(r,t);function l(e){asyncGeneratorStep(a,n,o,l,i,"next",e)}function i(e){asyncGeneratorStep(a,n,o,l,i,"throw",e)}l(void 0)})}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}function _defineEnumerableProperties(e,r){for(var t in r){(a=r[t]).configurable=a.enumerable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,t,a)}if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(r),o=0;o<n.length;o++){var a,l=n[o];(a=r[l]).configurable=a.enumerable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,l,a)}return e}function _defaults(e,r){for(var t=Object.getOwnPropertyNames(r),n=0;n<t.length;n++){var o=t[n],a=Object.getOwnPropertyDescriptor(r,o);a&&a.configurable&&void 0===e[o]&&Object.defineProperty(e,o,a)}return e}function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _extends(){return babelHelpers.extends=_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},_extends.apply(this,arguments)}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){babelHelpers.defineProperty(e,r,t[r])})}return e}function _inherits(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&babelHelpers.setPrototypeOf(e,r)}function _inheritsLoose(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r}function _getPrototypeOf(e){return babelHelpers.getPrototypeOf=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _setPrototypeOf(e,r){return babelHelpers.setPrototypeOf=_setPrototypeOf=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e},_setPrototypeOf(e,r)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(e,r,t){return isNativeReflectConstruct()?babelHelpers.construct=_construct=Reflect.construct:babelHelpers.construct=_construct=function(e,r,t){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(e,n));return t&&babelHelpers.setPrototypeOf(o,t.prototype),o},_construct.apply(null,arguments)}function _wrapNativeSuper(e){var r="function"==typeof Map?new Map:void 0;return babelHelpers.wrapNativeSuper=_wrapNativeSuper=function(e){if(null===e)return null;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return babelHelpers.construct(e,arguments,babelHelpers.getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),babelHelpers.setPrototypeOf(t,e)},_wrapNativeSuper(e)}function _instanceof(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};n.get||n.set?Object.defineProperty(r,t,n):r[t]=e[t]}return r.default=e,r}function _newArrowCheck(e,r){if(e!==r)throw new TypeError("Cannot instantiate an arrow function")}function _objectDestructuringEmpty(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function _objectWithoutPropertiesLoose(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}function _objectWithoutProperties(e,r){if(null==e)return{};var t,n,o=babelHelpers.objectWithoutPropertiesLoose(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,r){return!r||"object"!=typeof r&&"function"!=typeof r?babelHelpers.assertThisInitialized(e):r}function _superPropBase(e,r){for(;!Object.prototype.hasOwnProperty.call(e,r)&&null!==(e=babelHelpers.getPrototypeOf(e)););return e}function _get(e,r,t){return"undefined"!=typeof Reflect&&Reflect.get?babelHelpers.get=_get=Reflect.get:babelHelpers.get=_get=function(e,r,t){var n=babelHelpers.superPropBase(e,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(t):o.value}},_get(e,r,t||e)}function set(e,r,t,n){return(set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,r,t,n){var o,a=babelHelpers.superPropBase(e,r);if(a){if((o=Object.getOwnPropertyDescriptor(a,r)).set)return o.set.call(n,t),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,r)){if(!o.writable)return!1;o.value=t,Object.defineProperty(n,r,o)}else babelHelpers.defineProperty(n,r,t);return!0})(e,r,t,n)}function _set(e,r,t,n,o){if(!set(e,r,t,n||e)&&o)throw new Error("failed to set property");return t}function _taggedTemplateLiteral(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}function _taggedTemplateLiteralLoose(e,r){return r||(r=e.slice(0)),e.raw=r,e}function _temporalRef(e,r){if(e===babelHelpers.temporalUndefined)throw new ReferenceError(r+" is not defined - temporal dead zone");return e}function _readOnlyError(e){throw new Error('"'+e+'" is read-only')}function _classNameTDZError(e){throw new Error('Class "'+e+'" cannot be referenced in computed property keys.')}function _slicedToArray(e,r){return babelHelpers.arrayWithHoles(e)||babelHelpers.iterableToArrayLimit(e,r)||babelHelpers.nonIterableRest()}function _slicedToArrayLoose(e,r){return babelHelpers.arrayWithHoles(e)||babelHelpers.iterableToArrayLimitLoose(e,r)||babelHelpers.nonIterableRest()}function _toArray(e){return babelHelpers.arrayWithHoles(e)||babelHelpers.iterableToArray(e)||babelHelpers.nonIterableRest()}function _toConsumableArray(e){return babelHelpers.arrayWithoutHoles(e)||babelHelpers.iterableToArray(e)||babelHelpers.nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _iterableToArrayLimit(e,r){var t=[],n=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(t.push(l.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return t}function _iterableToArrayLimitLoose(e,r){for(var t,n=[],o=e[Symbol.iterator]();!(t=o.next()).done&&(n.push(t.value),!r||n.length!==r););return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _skipFirstGeneratorNext(e){return function(){var r=e.apply(this,arguments);return r.next(),r}}function _toPropertyKey(e){return"symbol"==typeof e?e:String(e)}function _initializerWarningHelper(e,r){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and set to use loose mode. To use proposal-class-properties in spec mode with decorators, wait for the next major version of decorators in stage 2.")}function _initializerDefineProperty(e,r,t,n){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function _applyDecoratedDescriptor(e,r,t,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce(function(t,n){return n(e,r,t)||t},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,r,a),a=null),a}babelHelpers.typeof=_typeof,babelHelpers.jsx=_createRawReactElement,babelHelpers.asyncIterator=_asyncIterator,babelHelpers.AwaitValue=_AwaitValue,"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)},babelHelpers.AsyncGenerator=AsyncGenerator,babelHelpers.wrapAsyncGenerator=_wrapAsyncGenerator,babelHelpers.awaitAsyncGenerator=_awaitAsyncGenerator,babelHelpers.asyncGeneratorDelegate=_asyncGeneratorDelegate,babelHelpers.asyncToGenerator=_asyncToGenerator,babelHelpers.classCallCheck=_classCallCheck,babelHelpers.createClass=_createClass,babelHelpers.defineEnumerableProperties=_defineEnumerableProperties,babelHelpers.defaults=_defaults,babelHelpers.defineProperty=_defineProperty,babelHelpers.extends=_extends,babelHelpers.objectSpread=_objectSpread,babelHelpers.inherits=_inherits,babelHelpers.inheritsLoose=_inheritsLoose,babelHelpers.getPrototypeOf=_getPrototypeOf,babelHelpers.setPrototypeOf=_setPrototypeOf,babelHelpers.construct=_construct,babelHelpers.wrapNativeSuper=_wrapNativeSuper,babelHelpers.instanceof=_instanceof,babelHelpers.interopRequireDefault=_interopRequireDefault,babelHelpers.interopRequireWildcard=_interopRequireWildcard,babelHelpers.newArrowCheck=_newArrowCheck,babelHelpers.objectDestructuringEmpty=_objectDestructuringEmpty,babelHelpers.objectWithoutPropertiesLoose=_objectWithoutPropertiesLoose,babelHelpers.objectWithoutProperties=_objectWithoutProperties,babelHelpers.assertThisInitialized=_assertThisInitialized,babelHelpers.possibleConstructorReturn=_possibleConstructorReturn,babelHelpers.superPropBase=_superPropBase,babelHelpers.get=_get,babelHelpers.set=_set,babelHelpers.taggedTemplateLiteral=_taggedTemplateLiteral,babelHelpers.taggedTemplateLiteralLoose=_taggedTemplateLiteralLoose,babelHelpers.temporalRef=_temporalRef,babelHelpers.readOnlyError=_readOnlyError,babelHelpers.classNameTDZError=_classNameTDZError,babelHelpers.temporalUndefined={},babelHelpers.slicedToArray=_slicedToArray,babelHelpers.slicedToArrayLoose=_slicedToArrayLoose,babelHelpers.toArray=_toArray,babelHelpers.toConsumableArray=_toConsumableArray,babelHelpers.arrayWithoutHoles=_arrayWithoutHoles,babelHelpers.arrayWithHoles=_arrayWithHoles,babelHelpers.iterableToArray=_iterableToArray,babelHelpers.iterableToArrayLimit=_iterableToArrayLimit,babelHelpers.iterableToArrayLimitLoose=_iterableToArrayLimitLoose,babelHelpers.nonIterableSpread=_nonIterableSpread,babelHelpers.nonIterableRest=_nonIterableRest,babelHelpers.skipFirstGeneratorNext=_skipFirstGeneratorNext,babelHelpers.toPropertyKey=_toPropertyKey,babelHelpers.initializerWarningHelper=_initializerWarningHelper,babelHelpers.initializerDefineProperty=_initializerDefineProperty,babelHelpers.applyDecoratedDescriptor=_applyDecoratedDescriptor;var id=0;function _classPrivateFieldKey(e){return"__private_"+id+++"_"+e}function _classPrivateFieldBase(e,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw new TypeError("attempted to use private field on non-instance");return e}function _classPrivateFieldGet(e,r){if(!r.has(e))throw new TypeError("attempted to get private field on non-instance");return r.get(e)}function _classPrivateFieldSet(e,r,t){if(!r.has(e))throw new TypeError("attempted to set private field on non-instance");return r.set(e,t),t}babelHelpers.classPrivateFieldLooseKey=_classPrivateFieldKey,babelHelpers.classPrivateFieldLooseBase=_classPrivateFieldBase,babelHelpers.classPrivateFieldGet=_classPrivateFieldGet,babelHelpers.classPrivateFieldSet=_classPrivateFieldSet;global.babelHelpers=babelHelpers;})(window);
/* ada core */
(function (map,moduleName) {var Installed={};var requireModule = function (index) {if (Installed[index]) {return Installed[index].exports;}var module = Installed[index] = {exports: {}};map[index].call(module.exports, module, module.exports, requireModule,window.babelHelpers);return module.exports;};var mod=requireModule(map.length-1);window&&window.Ada.installModule(moduleName,mod);})([function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ajax=ajax,exports.get=get,exports.post=post,exports.put=put,exports.patch=patch,exports._get=_get,exports.default=exports.config=void 0;var _util=require(7),_util2=require(7),EVENTYPES=["readystatechange","loadstart","progress","abort","error","load","timeout","loadend"],config={root:"",headers:{},timeout:5e4,urlencode:!1,transformRequest:null,transformResponse:null};exports.config=config;var request=function(){function e(t){var r=t.data,o=void 0===r?{}:r,n=t.body,s=void 0===n?"":n,a=t.url,i=void 0===a?"":a,u=t.method,l=void 0===u?"post":u,d=t.dataType,p=void 0===d?"text":d,f=t.timeout,c=void 0===f?3e6:f,v=t.headers,g=void 0===v?{}:v,h=t.events,m=void 0===h?{}:h,x=t.mimeType,y=void 0===x?"":x,R=t.urlencode,q=void 0!==R&&R,j=t.transformRequest,_=void 0===j?null:j,b=t.transformResponse,T=void 0===b?null:b;babelHelpers.classCallCheck(this,e);var E=new XMLHttpRequest;if(this._xhr=E,y&&E.overrideMimeType(y),s)_&&_(s,E);else if("get"===l){var w=(0,_util.queryString)(o);i+=-1!==i.indexOf("?")?""===w?"":"&"+w:""===w?"":"?"+w}else _&&_(o,E),o=(0,_util.postData)(o,q);E.open(l,i),E.responseType=p,E.timeout=c,E.setRequestHeader("X-Requested-With","XMLHttpRequest"),Reflect.ownKeys(g).forEach(function(e){E.setRequestHeader(e,g[e])}),"post"===l&&(q?E.setRequestHeader("Content-type","application/x-www-form-urlencoded"):E.setRequestHeader("Content-type","application/json")),EVENTYPES.forEach(function(e){E.addEventListener(e,function(e){var t=m[e.type];t?t({xhr:E,e:e,dataType:p,headers:g,mimeType:y,transformResponse:T}):"load"===e.type&&T&&T(E.response,E)},!1)}),E.send(s||o)}return babelHelpers.createClass(e,[{key:"abort",value:function(){this._xhr.abort()}}]),e}();function formatOption(e){return e.url=config.root+e.url,e.timeout=config.timeout,e.urlencode=config.urlencode,e.transformRequest=config.transformRequest,e.transformResponse=config.transformResponse,Object.assign(e.headers||{},config.headers),e}function ajax(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(r,o){t.events||(t.events={});var n=t.events.error,s=t.events.load;t.events=Object.assign(t.events,{error:function(e){n&&n(e),o(e)},load:function(n){var a=n.xhr,i=n.dataType,u=n.transformResponse,l=a.status;if(s&&s(),l>=200&&l<300||304===l||0===l){var d=a.response;if((0,_util2.isString)(d)&&"json"===i)try{d=JSON.parse(a.responseText)}catch(e){throw Error("[topolr] ajax unvaliable json string,url is '"+t.url+"' "+e)}if(u){var p=u(d,a);p?p.result?r(p.data):o(p.error):r(d)}else r(d)}else o(e)}}),new request(t)})}function _get(e){return ajax({url:e,data:{},method:"get"})}function fire(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;return Object.assign(r,{url:e,data:t,method:o,dataType:n}),ajax(formatOption(r))}function get(e){return fire(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"get")}function post(e){return fire(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"post","json")}function put(e){return fire(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"put")}function patch(e){return fire(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},"patch")}var _default=request;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ViewConnector=exports.BondViewGroup=exports.StaticViewGroup=exports.ViewGroup=exports.View=void 0;var _metadata=babelHelpers.interopRequireDefault(require(11)),_ddm=babelHelpers.interopRequireDefault(require(5)),_util=require(7),_const=require(12),_factory=babelHelpers.interopRequireDefault(require(4)),_dataset=require(3),_collector=babelHelpers.interopRequireDefault(require(13)),_log=require(14),macros={module:function(e){var t=e.bodyStr,n=e.props,i=(e.events,e.attrs),r=['data-module=""'];return Reflect.ownKeys(i).forEach(function(e){return r.push("".concat(e,'="').concat(e,'"'))}),{template:"<div ".concat(r.join(" "),">").concat(t,"</div>"),data:n}}},tags={module:{template:function(e){var t=e.bodyStr,n=(e.props,e.events,e.attrs),i=['data-module=""'];return Reflect.ownKeys(n).forEach(function(e){return i.push("".concat(e,'="').concat(e,'"'))}),"<div ".concat(i.join(" "),">").concat(t,"</div>")},selfClose:!1}};function _addChild(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,i=void 0===n?"":n,r=t.parameter,s=void 0===r?{}:r,o=t.container,a=void 0===o?null:o,l=t.attrs,u=void 0===l?{}:l,c=arguments.length>2?arguments[2]:void 0,h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!c.isRemoved()){a||(a=window.document.body);var d=document.createElement("div");if(d.setAttribute("data-module","out:".concat(c.getId())),Reflect.ownKeys(u).forEach(function(e){return d.setAttribute(e,u[e])}),h&&c.getDDMContainer().contains(a))throw Error("[ada] BondViewGroup can not append child in the DDM container element");return a.appendChild(d),_factory.default.getViewInstance({viewClass:e,parent:c,name:i,dom:d,useProps:[]}).then(function(e){if(!e.isRemoved())return(0,_util.setProp)(e,_const.OUTERVIEW,!0),Promise.resolve().then(function(){return e.oncreated()}).then(function(){return e.update(s).then(function(){c.getChildren().push(e)}).then(function(){return c.onchildadded(e)}).then(function(){return e.onready()}).then(function(){return e})})})}}var ViewEvent=function(){function e(t,n,i){babelHelpers.classCallCheck(this,e),this.target=t,this.data=i,this.type=n,this._goon=!0,this.currentTarget=null}return babelHelpers.createClass(e,[{key:"stopPropagation",value:function(){this._goon=!1}}]),e}(),ClassNames=function(){function e(t){babelHelpers.classCallCheck(this,e),this._view=t}return babelHelpers.createClass(e,[{key:"add",value:function(e){return this._view.getElement().classList.add(this._view.getThisClassName(e)),this}},{key:"remove",value:function(e){return this._view.getElement().classList.remove(this._view.getThisClassName(e)),this}},{key:"has",value:function(e){return this._view.getElement().classList.contains(this._view.getThisClassName(e))}},{key:"toggle",value:function(e){return this._view.getElement().classList.toggle(this._view.getThisClassName(e)),this}}]),e}(),BaseView=function(){function e(t){var n=this,i=t.parent,r=void 0===i?null:i,s=t.dom,o=void 0===s?window.document.body:s,a=t.info,l=void 0===a?{}:a,u=t.name,c=void 0===u?"":u,h=t.useProps,d=void 0===h?[]:h;babelHelpers.classCallCheck(this,e),(0,_util.setProp)(this,_const.IDNAME,(0,_util.randomid)(10)),(0,_util.setProp)(this,_const.PARENTVIEWTAG,r),(0,_util.setProp)(this,_const.ELEMENTTAG,o),(0,_util.setProp)(this,_const.ISREMOVED,!1),(0,_util.setProp)(this,_const.PREREMOVED,!1),(0,_util.setProp)(this,_const.VIEWINFO,l),(0,_util.setProp)(this,_const.VIEWNAME,c),(0,_util.setProp)(this,_const.USEPROPS,d),l.className&&(0,_util.setProp)(this,_const.CLASSNAME,l.className),(0,_util.setProp)(this,_const.DDMTAG,new _ddm.default({id:this.getId(),container:this.getDDMContainer(),templateStr:l.template||"",binders:function(e){var t=e.method,i=e.parameters,r=(n[_const.BINDERS]||{})[t];r&&n[r]&&n[r](i)},option:{tags:Object.assign(this.tags(),this._tags())},macro:this._macros(),precise:this[_const.VIEWINFO].precise})),this.className=new ClassNames(this)}return babelHelpers.createClass(e,[{key:"getName",value:function(){return this[_const.VIEWNAME]}},{key:"oncreated",value:function(){}},{key:"onready",value:function(){}},{key:"onupdated",value:function(){}},{key:"onunload",value:function(){}},{key:"getId",value:function(){return this[_const.IDNAME]}},{key:"getElement",value:function(){return this[_const.ELEMENTTAG]}},{key:"getParent",value:function(){return this[_const.PARENTVIEWTAG]}},{key:"getDDMContainer",value:function(){return this[_const.ELEMENTTAG]}},{key:"isRemoved",value:function(){return!0===this[_const.ISREMOVED]}},{key:"getThisClassName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.isRemoved())return null;var t=this[_const.CLASSNAME];return t?e?"".concat(t,"-").concat(e):t:e}},{key:"tags",value:function(){return{}}},{key:"getDDM",value:function(){return this[_const.DDMTAG]}},{key:"getDataSet",value:function(){return null}},{key:"isRendered",value:function(){return this.getDDM().isRendered()}},{key:"getClassName",value:function(){if(this[_const.VIEWINFO].module){var e=this[_const.VIEWINFO].module.split(".");return e.pop(),e.join(".").replace(/\//g,".")+"."+this.constructor.name}return this.constructor.name}},{key:"_triggerEvent",value:function(e){if(!this.isRemoved()){e.currentTarget=this;var t=this[_const.HANDLERS];t&&t[e.type]&&this[t[e.type]](e)}}},{key:"_getParentUseProps",value:function(){return this[_const.USEPROPS]}},{key:"_getChangedProps",value:function(){return[]}},{key:"_getUsedProps",value:function(){return this.getDDM().getUseProps()}},{key:"_refresh",value:function(){var e=this;if(this.isRemoved())return Promise.resolve();var t=[];return this.getDDM().modules().reduce(function(n,i){return n.then(function(){var t=i.element()[_const.VIEWTAG],n=i.getAttributes(),r=n.type,s=n.parameter,o=n.name||"",a=n.useProps?babelHelpers.toConsumableArray(n.useProps):[];if(!t||t.constructor!==r||t.isRemoved()||t.getName()!==o){var l=Promise.resolve();return t&&!t.isRemoved()&&(l=l.then(function(){return t._remove()})),l=l.then(function(){return _factory.default.getViewInstance({viewClass:r,parent:e,dom:i.element(),name:o,useProps:a}).then(function(t){if(!t.isRemoved())return Promise.resolve().then(function(){return t.oncreated()}).then(function(){return t.update(s).then(function(){if(e.onchildadded)return e.onchildadded(t)}).then(function(){return t.onready()}).then(function(){return t})})})})}return t&&n.hasOwnProperty("parameter")&&(0,_util.isSubModuleChange)(e._getChangedProps(),t._getParentUseProps())?t.update(s).then(function(){return t}):Promise.resolve(t)}).then(function(e){return t.push(e)})},Promise.resolve()).then(function(){if(!e.isRemoved())return e[_const.CHILDRENTAG]=babelHelpers.toConsumableArray(e[_const.CHILDRENTAG].filter(function(e){return!e.isRemoved()})).concat(babelHelpers.toConsumableArray(t.concat().filter(function(e){return void 0!==e}))),e.onupdated()})}},{key:"_macros",value:function(){return{}}},{key:"_tags",value:function(){return{}}},{key:"_remove",value:function(){var e=this;if(!this.isRemoved()){var t=Promise.resolve(),n=this.getParent();return n&&!n.isRemoved()&&(n[_const.CHILDRENTAG].splice(n[_const.CHILDRENTAG].indexOf(this),1),!0!==this[_const.PREREMOVED]&&n.onchildremoved&&(t=t.then(function(){return n.onchildremoved(e)}))),t=t.then(function(){return e.removeAllChild&&e.removeAllChild(),e.onunload()}).then(function(){e.getThisClassName()&&e.getElement().classList.remove(e.getThisClassName()),e.getElement().innerHTML="",e[_const.DATASET]&&e[_const.DATASET]._remove(),Reflect.deleteProperty(e.getElement(),_const.VIEWTAG),Reflect.ownKeys(e).forEach(function(t){e[t]=null}),e[_const.ISREMOVED]=!0})}return Promise.resolve()}},{key:"_clean",value:function(){var e=this;if(this[_const.ISREMOVED]=!0,this.getParent()){var t=this.getParent().getChildren(),n=t.indexOf(this);-1!==n&&t.splice(n,1)}this.onunload&&this.onunload(),Reflect.ownKeys(this).forEach(function(t){t!==_const.ISREMOVED&&(e[t]=null)})}}]),e}(),ViewConnector=function(e){function t(e){var n;return babelHelpers.classCallCheck(this,t),n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),_const.CHILDRENTAG,[]),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),_const.CONNECTS,[]),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),_const.CHANGEPROPS,[]),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),_const.CONNECTSTATE,n.setContextDataSets(function(e,t,i){var r={};(0,_util.isFunction)(e)&&(e={service:e,dataset:_dataset.DataSet});var s=(0,_util.getDataSetFromParent)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),e);return s&&(n[_const.CONNECTS].push(s),r=s._addListener(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),t,i)),r})||{}),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setContextDataSets",value:function(e){}},{key:"onupdate",value:function(e,t){return e}},{key:"getCurrentState",value:function(){return this[_const.CONNECTSTATE]}},{key:"update",value:function(e){return this.isRemoved()?Promise.reject("view is removed"):this._updateFromParent((0,_util.protectData)(e))}},{key:"_updateFromParent",value:function(e){var t=new _collector.default({data:this.getCurrentState(),fn:this.onupdate});return this[_const.CONNECTSTATE]=t.invoke(e,this),this[_const.CHANGEPROPS]=t.getChangedProps(),(0,_util.isSubModuleChange)(this._getChangedProps(),this._getUsedProps())?this._render():this.isRendered()?Promise.resolve():this._render()}},{key:"_updateFromConnect",value:function(e){var t=e.data,n=void 0===t?{}:t,i=e.setter,r=new _collector.default({data:this.getCurrentState(),fn:i});return this[_const.CONNECTSTATE]=r.invoke(n,this),this[_const.CHANGEPROPS]=r.getChangedProps(),(0,_util.isSubModuleChange)(this._getChangedProps(),this._getUsedProps())?this._render():Promise.resolve()}},{key:"_render",value:function(){return this.getDDM().render(this.getCurrentState()),this._refresh()}},{key:"_macros",value:function(){return macros}},{key:"_tags",value:function(){return tags}},{key:"_remove",value:function(){var e=this;return this[_const.CONNECTS].forEach(function(t){return t._removeListener(e)}),babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"_remove",this).call(this)}},{key:"_getChangedProps",value:function(){return this[_const.CHANGEPROPS]}}]),t}(BaseView);exports.ViewConnector=ViewConnector;var View=function(e){function t(e){var n;return babelHelpers.classCallCheck(this,t),n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e)),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),_const.BINDERS,_metadata.default.getMetadataExtends("binder",n.constructor.prototype)),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),_const.SUBSCRIBE,_metadata.default.getMetadataExtends("subscribe",n.constructor.prototype)),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),_const.HANDLERS,_metadata.default.getMetadata("handler",n.constructor.prototype)),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),_const.GROUPFUL,Reflect.ownKeys(n._macros()).length>0),n[_const.VIEWINFO].dataset&&(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)),_const.DATASET,_dataset.DataSetHelper.getDataSet(n[_const.VIEWINFO].dataset,babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(n)))),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onbeforecommit",value:function(){}},{key:"oncommited",value:function(){}},{key:"getDataSet",value:function(){return this[_const.DATASET]}},{key:"dispatchEvent",value:function(e,t){if(!this.isRemoved())for(var n=new ViewEvent(this,e,t),i=this;i&&(i._triggerEvent(n),n._goon);)i=i.getParent()}},{key:"getCurrentState",value:function(){return this[_const.DATASET]?this[_const.DATASET].getData():{}}},{key:"finder",value:function(e){return this.isRemoved()?[]:this.getDDM().finder(e)}},{key:"finders",value:function(e){return this.isRemoved()?[]:this.getDDM().finders(e)}},{key:"group",value:function(e){return this.isRemoved()?null:this.getDDM().group(e)}},{key:"groups",value:function(e){return this.isRemoved()?[]:this.getDDM().groups(e)}},{key:"isOuterView",value:function(){return!0===this[_const.OUTERVIEW]}},{key:"update",value:function(e){return this.isRemoved()?Promise.reject("view is removed"):this._updateFromParent(e)}},{key:"commit",value:function(e,t){return this[_const.DATASET]?this[_const.DATASET].commit(e,t):null}},{key:"_updateFromParent",value:function(e){return this[_const.DATASET]&&e?this.commit("update",e):this.isRendered()?Promise.resolve():this._render()}},{key:"_updateFromDataSet",value:function(){return this.isRendered()?(0,_util.isSubModuleChange)(this._getChangedProps(),this._getUsedProps())?this._render():Promise.resolve():this._render()}},{key:"_updateForceFromDataSet",value:function(){return this._render()}},{key:"_render",value:function(){return this.getDDM().render(this.getCurrentState()),this[_const.GROUPFUL]?this._refresh():(this.onupdated(),Promise.resolve())}},{key:"_getChangedProps",value:function(){return this[_const.DATASET]?this[_const.DATASET].getChangedProps():[]}}]),t}(BaseView);exports.View=View;var ViewGroup=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return babelHelpers.classCallCheck(this,t),e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,n)),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(e)),_const.CHILDRENTAG,[]),e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onchildremoved",value:function(){}},{key:"onchildadded",value:function(){}},{key:"getChildAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.isRemoved()?null:this[_const.CHILDRENTAG][e]}},{key:"getChildrenByType",value:function(e){return!this.isRemoved()&&e?this.getChildren().filter(function(t){return t instanceof e}):[]}},{key:"getChildByName",value:function(e){return!this.isRemoved()&&e&&this.getChildren().filter(function(t){return t.getName()===e})[0]||null}},{key:"getChildren",value:function(){return this.isRemoved()?[]:this[_const.CHILDRENTAG]}},{key:"tags",value:function(){return{}}},{key:"_macros",value:function(){return macros}},{key:"_tags",value:function(){return tags}}]),t}(View);exports.ViewGroup=ViewGroup;var StaticViewGroup=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"addChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name,t.parameter,t.container,t.attrs;return _addChild(e,arguments[1],this,!1)}},{key:"removeChild",value:function(e){this.isRemoved()||-1!==this.getChildren().indexOf(e)&&(e.isRemoved()||e.getElement().parentNode.removeChild(e.getElement()));return this}},{key:"removeChildAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isRemoved()){var t=this.getChildren()[e];t&&this.removeChild(t)}return this}},{key:"removeChildByName",value:function(e){if(!this.isRemoved()&&e){var t=this.getChildByName(e);t&&this.removeChild(t)}return this}},{key:"removeAllChild",value:function(){if(!this.isRemoved())for(var e=this.getChildren();e&&e.length>0;){var t=e.shift();t.isRemoved()||t.getElement().parentNode.removeChild(t.getElement())}return this}},{key:"removeChildByType",value:function(e){if(!this.isRemoved()&&e)for(var t=this.getChildrenByType(e);t.length>0;)this.removeChild(t.shift());return this}},{key:"_macros",value:function(){return{}}},{key:"_tags",value:function(){return{}}},{key:"_refresh",value:function(){return Promise.resolve()}}]),t}(ViewGroup);exports.StaticViewGroup=StaticViewGroup;var BondViewGroup=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDDMContainer",value:function(){if(!this[_const.DDMCONTAINER]){var e=document.createElement("div");e.setAttribute("class",this.getThisClassName("ddmcontainer")),this.getElement().appendChild(e),(0,_util.setProp)(this,_const.DDMCONTAINER,e)}return this[_const.DDMCONTAINER]}},{key:"addChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name,t.parameter,t.container,t.attrs;return _addChild(e,arguments[1],this,!0)}},{key:"removeChild",value:function(e){if(!this.isRemoved()&&(-1!==this.getChildren().indexOf(e)&&!e.isRemoved())){if(this.getDDMContainer().contains(e.getElement()))throw Error("[ada] BondViewGroup can not remove child in the DDM container");e.getElement().parentNode.removeChild(e.getElement())}return this}},{key:"removeAllChild",value:function(){for(var e=this,t=this.getChildren().filter(function(t){if(!t.isRemoved()&&!e.getDDMContainer().contains(t.getElement()))return t});t&&t.length>0;){var n=t.shift();n.isRemoved()||n.getElement().parentNode.removeChild(n.getElement())}}},{key:"removeChildByType",value:function(e){if(!this.isRemoved()&&e)for(var t=this.getChildrenByType(e);t.length>0;)this.removeChild(t.shift());return this}},{key:"removeChildByName",value:function(e){if(!this.isRemoved()&&e){var t=this.getChildByName(e);t&&this.removeChild(t)}return this}}]),t}(ViewGroup);exports.BondViewGroup=BondViewGroup;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ModuleLoader=exports.Source=exports.ActiveSource=exports.Modules=void 0;var _request=require(0),_util=require(7),_config=require(9),Persistence={target:null,get:function(){var e;Persistence.target||(e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB?Persistence.database:window.localStorage?Persistence.storage:Persistence.empty,Persistence.target=e);return Persistence.target},empty:{getAll:function(){return Promise.resolve({})},saveAll:function(e){return Promise.resolve()},clean:function(){return Promise.resolve()}},storage:{getAll:function(){var e={};try{e=window.localStorage.getItem("ada-local-source")}catch(e){}return Promise.resolve(e)},saveAll:function(e){try{window.localStorage.setItem("ada-local-source",window.JSON.stringify(e))}catch(e){}return Promise.resolve()},clean:function(){try{window.localStorage.removeItem("ada-local-source")}catch(e){}return Promise.resolve()}},database:{db:null,info:{name:"ada",version:1,store:"ada-local-source",key:"name",value:"local"},ready:function(){return Persistence.database.db?Promise.resolve():(window.indexedDB||(window.indexedDB=window.mozIndexedDB||window.webkitIndexedDB),new Promise(function(e){var t=indexedDB.open(Persistence.database.info.name,Persistence.database.info.version);t.onupgradeneeded=function(e){var n=t.result;n.objectStoreNames.contains(Persistence.database.info.store)&&n.deleteObjectStore(Persistence.database.info.store),n.createObjectStore(Persistence.database.info.store,{keyPath:Persistence.database.info.key}).put({name:Persistence.database.info.value,data:{}})},t.onsuccess=function(n){Persistence.database.db=t.result,e()},t.onerror=function(){e()}}))},getAll:function(){var e=this;return new Promise(function(t){e.ready().then(function(){var e=Persistence.database.db.transaction([Persistence.database.info.store],"readwrite");e.onerror=function(e){t({})};var n=e.objectStore(Persistence.database.info.store).get(Persistence.database.info.value);n.onerror=function(e){t({})},n.onsuccess=function(e){t(n.result?n.result.data:{})}})})},saveAll:function(e){var t=this;return new Promise(function(n){t.ready().then(function(){var t=Persistence.database.db.transaction([Persistence.database.info.store],"readwrite");t.oncomplete=function(e){n()},t.onerror=function(e){n()},t.objectStore(Persistence.database.info.store).put({name:Persistence.database.info.value,data:e})})})},clean:function(){var e=this;return new Promise(function(t){e.ready().then(function(){var e=Persistence.database.db.transaction([Persistence.database.info.store],"readwrite");e.oncomplete=function(e){t()},e.onerror=function(e){t()},e.objectStore(Persistence.database.info.store).delete(Persistence.database.info.value)})})}}},ModuleLoader={installed:{},moduleFnsLoaded:{},getExcutor:function(e,t){var n=e.split("/").pop().split(".").pop(),r=t;return r="js"===n?t:"css"===n||"scss"===n||"less"===n?'var styles={_linkElement:null,active:function(){var et=document.getElementById("'.concat(e,'");if(!et){var _a = document.createElement("style");_a.setAttribute("media", "screen");_a.setAttribute("type", "text/css");_a.setAttribute("id","').concat(e.replace(/\//g,"-"),'");_a.appendChild(document.createTextNode(').concat(JSON.stringify(t),'));styles._linkElement=_a;document.getElementsByTagName("head")[0].appendChild(_a);}else{et.innerText="";et.appendChild(document.createTextNode(').concat(JSON.stringify(t),"));}}};if (/complete|loaded|interactive/.test(window.document.readyState)) {styles.active();} else {window.document.addEventListener('DOMContentLoaded', function () {styles.active();}, false);}module.exports={isReady:function(){return styles._linkElement!==null;},getElement:function(){return styles._linkElement;},remove:function(){if(styles._linkElement){styles._linkElement.parentNode.removeChild(styles._linkElement);}}};"):"json"===n?"module.exports=".concat(t):"html"===n||"text"===n?"module.exports=JSON.stringify(".concat(t,")"):t,new Function("module","exports","require","imports","babelHelpers",r)},getModuleDependenceInfo:function(e,t){var n=[];return{code:t=t.replace(/require\(.*?\)/g,function(e){var t=e.substring(8,e.length-1).replace(/['|"|`]/g,"").trim();return n.push(t),'require("'.concat(t,'")')}),paths:n}},getModuleDependenceMap:function(e){return Source.get(e).then(function(t){var n=ModuleLoader.getModuleDependenceInfo(e,t),r=n.paths,o=n.code,s=babelHelpers.defineProperty({},e,o),a=[];return r.map(function(e){ModuleLoader.installed[e]||a.push(ModuleLoader.getModuleDependenceMap(e))}),Promise.all(a).then(function(e){return Object.assign.apply(Object,[s].concat(babelHelpers.toConsumableArray(e))),s})})},excute:function(e){if(ModuleLoader.installed[e])return ModuleLoader.installed[e].exports;var t=ModuleLoader.installed[e]={path:e,exports:{}};return ModuleLoader.moduleFnsLoaded[e].call(t.exports,t,t.exports,ModuleLoader.excute,function(e){return ModuleLoader.load(e).then(function(e){return e.__esModule?e.default:e})},window.babelHelpers||{}),t.exports},load:function(e){var t=ModuleLoader.installed[e];return t?Promise.resolve(t.exports):ModuleLoader.getModuleDependenceMap(e).then(function(t){for(var n in t)ModuleLoader.moduleFnsLoaded[n]=ModuleLoader.getExcutor(n,t[n]);return ModuleLoader.excute(e)})}};exports.ModuleLoader=ModuleLoader;var Modules={excute:function(e){return ModuleLoader.load(e)},scan:function(e){if(e)for(var t in ModuleLoader.installed){if(!1===e(t,ModuleLoader.installed[t].exports))break}},scanClass:function(e){if(e)for(var t in ModuleLoader.installed){var n=ModuleLoader.installed[t];if(!n.exports.__esModule&&(0,_util.isFunction)(n.exports)&&!1===e(t,n.exports))break;for(var r in n.exports){var o=n.exports[r];if((0,_util.isFunction)(o)&&!1===e(t,o))break}}},filter:function(e){var t=[];if(e)for(var n in ModuleLoader.installed){var r=ModuleLoader.installed[n],o=e(n,r.exports.__esModule?r.exports.default:r.exports);void 0!==o&&t.push(o)}return t},get:function(e){var t=ModuleLoader.installed[e];return t?t.exports.__esModule?t.exports.default:t.exports:null},has:function(e){return void 0!==ModuleLoader.installed[e]},set:function(e,t){return ModuleLoader.installed[e]={exports:t},this}};exports.Modules=Modules;var SourceQueue={tasks:[],isRunning:!1,add:function(e,t,n){this.tasks.push({path:e,fn:t,error:n}),this.run()},run:function(){var e=this;if(!this.isRunning){var t=this.tasks.shift();t&&(this.isRunning=!0,Source.getSource(t.path).then(function(n){e.isRunning=!1,t.fn(n),e.run()},function(n){e.isRunning=!1,t.error(n),e.run()}))}}},Source={isinit:!1,source:{},ready:function(){var e=this;return this.isinit?Promise.resolve():Persistence.get().getAll().then(function(t){return e.isinit=!0,e.source=Object.assign({},t,e.source),Persistence.target.saveAll(e.source)})},get:function(e){return new Promise(function(t,n){SourceQueue.add(e,function(e){t(e)},function(e){n(e)})})},decompress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.source||(this.source={}),Object.assign(this.source,e)},getRealPath:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,r="",o=_config.base.get();if(r=t?o.sourceMap[e.split(".").shift()]:o.sourceMap[(0,_util.getMappedPath)(e)],o.develop)n="".concat(e,"?h=").concat((new Date).getTime());else{var s=e.split("/"),a=s.pop().split(".");s.push("".concat(r,".").concat(a[1])),n=s.join("/")}return"".concat("/"===o.basePath[o.basePath.length-1]?o.basePath:o.basePath+"/").concat(n)},getSourceByHash:function(e,t,n){var r=this,o=0,s=_config.base.get(),a=Reflect.ownKeys(s.sourceMap.packages).filter(function(e){return-1!==s.sourceMap.packages[e].indexOf(n)})[0];return a?(s.sourceMap.packages[a].split("|").forEach(function(e){var t=Reflect.ownKeys(s.sourceMap).filter(function(t){return s.sourceMap[t]===e})[0];r.source[t]&&r.source[t].hash===e||(o+=1)}),o>1?(0,_request._get)("".concat(this.getRealPath(a+".js",!0))).then(function(e){var n=JSON.parse(e.substring(11,e.length-1));return Object.assign(r.source,n),Persistence.get().saveAll(r.source).then(function(){return r.source[t].code})}):(0,_request._get)("".concat(this.getRealPath(e))).then(function(e){return r.source[t]={code:e,hash:n},Persistence.get().saveAll(r.source).then(function(){return e})})):n?(0,_request._get)("".concat(this.getRealPath(e))).then(function(e){return r.source[t]={code:e,hash:n},Persistence.get().saveAll(r.source).then(function(){return e})}):(0,_request._get)("".concat(this.getRealPath(e)))},getSource:function(e){var t=this;return this.ready().then(function(){var n=(0,_util.getMappedPath)(e),r=_config.base.get();if(t.source[n]){var o=t.source[n].hash,s=r.sourceMap[n];return o&&s?s===o?t.source[n].code:t.getSourceByHash(e,n,s):(0,_request._get)("".concat(t.getRealPath(e)))}return r.sourceMap?t.getSourceByHash(e,n,r.sourceMap[n]):(0,_request._get)("".concat(t.getRealPath(e)))})}};exports.Source=Source;var ActiveSource={cache:{},excute:function(e){var t=this;return this.cache[e]?Promise.resolve(this.cache[e]):Source.get(e).then(function(n){return t.cache[e]=n,n})},has:function(e){return void 0!==this.cache[e]}};exports.ActiveSource=ActiveSource;var exportSource={loadModule:function(e){return Modules.excute(e)},loadSource:function(e){return ActiveSource.excute(e)},decompress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Source.decompress(e)}},_default=exportSource;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DataSetHelper=exports.TransactDataSet=exports.DataSet=exports.Service=void 0;var _metadata=babelHelpers.interopRequireDefault(require(11)),_util=require(7),_const=require(12),_collector=babelHelpers.interopRequireDefault(require(13)),_log=require(14),Service=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,[{key:"defaultData",value:function(){return{}}},{key:"onupdate",value:function(t,e){return t}}]),t}();exports.Service=Service;var DataSet=function(){function t(){babelHelpers.classCallCheck(this,t),(0,_util.setProp)(this,_const.DATASETOWNER,null),(0,_util.setProp)(this,_const.DATASETDATA,null),(0,_util.setProp)(this,_const.DATASETSERVICE,null),(0,_util.setProp)(this,_const.DATASETLISTENER,[]),(0,_util.setProp)(this,_const.DATASETEDITS,[]),(0,_util.setProp)(this,_const.DATASETISCOMMIT,null),(0,_util.setProp)(this,_const.DATASETCOMMITCOUNT,0)}return babelHelpers.createClass(t,[{key:"commit",value:function(t,e){var n=this;return this[_const.DATASETCOMMITCOUNT]++,this[_const.DATASETISCOMMIT]?this[_const.DATASETISCOMMIT]=this[_const.DATASETISCOMMIT].then(function(){return DataSetHelper.commit(n,t,e)}):this[_const.DATASETISCOMMIT]=DataSetHelper.commit(this,t,e),this[_const.DATASETISCOMMIT]}},{key:"getData",value:function(){return this[_const.DATASETDATA]||(this[_const.DATASETDATA]=this[_const.DATASETSERVICE].defaultData()),this[_const.DATASETDATA]}},{key:"getComputeData",value:function(t){var e=this[_const.DATASETSERVICE][_const.DATASETCOMPUTE][t];if(e&&this[_const.DATASETSERVICE][e])return this[_const.DATASETSERVICE][e](this.getData());throw Error("[ada] servie")}},{key:"toggleService",value:function(t){if(!(t.prototype instanceof this.defaultService()))throw Error("[ada] toggle service must be a subclass of this dataset default service class");this[_const.DATASETSERVICE]=new t}},{key:"getChangedProps",value:function(){return this[_const.DATASETEDITS]}},{key:"_addListener",value:function(t,e,n){var s=this,r={};if(-1!==this[_const.DATASETLISTENER].findIndex(function(e){return e.view===t}))throw Error("ViewConnector can only invoke connect once with the same DataSet filter");var T=new _collector.default({data:this[_const.DATASETDATA],fn:e,precise:10});return r=T.invoke(),setTimeout(function(){s[_const.DATASETLISTENER].push({useprops:T.getUsedPros(),view:t,getter:e,setter:n})}),r}},{key:"_removeListener",value:function(t){var e=this[_const.DATASETLISTENER].findIndex(function(e){return e.view===t});-1!==e&&this[_const.DATASETLISTENER].splice(e,1)}},{key:"_remove",value:function(){this[_const.DATASETDATA]=null,this[_const.DATASETOWNER]=null,this[_const.DATASETSERVICE]=null,this[_const.DATASETLISTENER]=[]}},{key:"_setState",value:function(t){this[_const.DATASETDATA]=t}}]),t}();exports.DataSet=DataSet;var TransactDataSet=function(t){function e(){var t;return babelHelpers.classCallCheck(this,e),t=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this)),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(t)),_const.DATASETRANSACTION,[]),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(t)),_const.DATASETRANSACTIONSTATE,[]),(0,_util.setProp)(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(t)),_const.DATASETRANSACTIONSTEP,0),t}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"commit",value:function(t,n){return this[_const.DATASETRANSACTION].push({type:t,data:n}),babelHelpers.get(babelHelpers.getPrototypeOf(e.prototype),"commit",this).call(this,t,n)}},{key:"transactionSize",value:function(){return 1/0}},{key:"getCurrentStep",value:function(){return this[_const.DATASETRANSACTIONSTEP]}},{key:"getCurrentCommit",value:function(){return this[_const.DATASETRANSACTION][this.getCurrentStep()]}},{key:"getTransactionList",value:function(){return this[_const.DATASETRANSACTION]}},{key:"rollback",value:function(t){var e=this;return this[_const.DATASETRANSACTIONSTATE].length>0?(this[_const.DATASETRANSACTION].splice(0,t),this[_const.DATASETRANSACTIONSTATE].splice(0,t),this[_const.DATASETRANSACTIONSTEP]=this[_const.DATASETRANSACTIONSTATE].length,this[_const.DATASETDATA]=this[_const.DATASETRANSACTIONSTATE][this[_const.DATASETRANSACTIONSTATE].length-1],this[_const.DATASETOWNER]._updateForceFromDataSet().then(function(){return DataSetHelper.dispatchForce(e).then(function(){return e[_const.DATASETEDITS]=[],e[_const.DATASETDATA]})})):Promise.resolve(this.getData())}},{key:"travel",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this[_const.DATASETRANSACTIONSTATE].length>0&&this[_const.DATASETRANSACTIONSTATE][e]?(this[_const.DATASETRANSACTIONSTEP]=e,this[_const.DATASETDATA]=this[_const.DATASETRANSACTIONSTATE][e],this[_const.DATASETOWNER]._updateForceFromDataSet().then(function(){return DataSetHelper.dispatchForce(t).then(function(){return t[_const.DATASETEDITS]=[],t[_const.DATASETDATA]})})):Promise.resolve(this.getData())}},{key:"_setState",value:function(t){this[_const.DATASETRANSACTIONSTATE].length>this.transactionSize()&&this[_const.DATASETRANSACTIONSTATE].shift(),this[_const.DATASETRANSACTIONSTATE].push(t),this[_const.DATASETRANSACTIONSTEP]=this[_const.DATASETRANSACTIONSTATE].length-1,this[_const.DATASETDATA]=t}}]),e}(DataSet);exports.TransactDataSet=TransactDataSet;var DataSetHelper=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"getDataSet",value:function(t,e){var n=t.type,s=void 0===n?DataSet:n,r=t.service,T=void 0===r?Service:r,o=new s;if(o[_const.DATASETOWNER]=e,!(T.prototype instanceof Service))throw Error("[ada] must be a Service class");return o[_const.DATASETSERVICE]=new T,o[_const.DATASETSERVICE][_const.DATASETACTION]=Object.assign({update:"onupdate"},_metadata.default.getMetadataExtends("action",o[_const.DATASETSERVICE].constructor.prototype)||{}),o[_const.DATASETSERVICE][_const.DATASETCOMPUTE]=_metadata.default.getMetadataExtends("compute",o[_const.DATASETSERVICE].constructor.prototype)||{},o}},{key:"commit",value:function(e,n,s){return Promise.resolve().then(function(){return e[_const.DATASETOWNER].onbeforecommit(n)}).then(function(){return t.trigger(e,n,s).then(function(t){return e[_const.DATASETCOMMITCOUNT]--,0===e[_const.DATASETCOMMITCOUNT]&&(e[_const.DATASETISCOMMIT]=null),Promise.resolve().then(function(){return e[_const.DATASETOWNER]&&e[_const.DATASETOWNER].oncommited(n)}).then(function(){return t})},function(t){return console.error(t),e[_const.DATASETCOMMITCOUNT]--,0===e[_const.DATASETCOMMITCOUNT]&&(e[_const.DATASETISCOMMIT]=null),Promise.resolve().then(function(){return e[_const.DATASETOWNER]&&e[_const.DATASETOWNER].oncommited(n)}).then(function(){return t})})})}},{key:"trigger",value:function(e,n,s){var r=e[_const.DATASETSERVICE][_const.DATASETACTION][n];if(r&&e[_const.DATASETSERVICE][r]){var T=new _collector.default({data:e.getData(),fn:e[_const.DATASETSERVICE][r]});return Promise.resolve().then(function(){return T.invoke((0,_util.protectData)(s),e[_const.DATASETSERVICE])}).then(function(n){if(e[_const.DATASETOWNER])return e._setState(n||{}),e[_const.DATASETEDITS]=T.getChangedProps(),e[_const.DATASETOWNER]._updateFromDataSet().then(function(){return t.dispatch(e).then(function(){return e[_const.DATASETEDITS]=[],n})})})}return Promise.reject("[ada] service action is undefined name is ".concat(n))}},{key:"dispatch",value:function(e){return t.dispatchDatasetListeners(e[_const.DATASETLISTENER].filter(function(t){return(0,_util.isChanges)(e.getChangedProps(),t.useprops)}))}},{key:"dispatchForce",value:function(e){return t.dispatchDatasetListeners(e[_const.DATASETLISTENER])}},{key:"dispatchDatasetListeners",value:function(t){return t.reduce(function(t,e){return t.then(function(){if(e.view.isRemoved())return Promise.resolve();var t=new _collector.default({data:dataset.getData(),fn:e.getter,precise:10}),n=t.invoke();return e.useprops=t.getUsedPros(),e.view._updateFromConnect({data:n,setter:e.setter})})},Promise.resolve())}}]),t}();exports.DataSetHelper=DataSetHelper;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _metadata=babelHelpers.interopRequireDefault(require(11)),_loader=babelHelpers.interopRequireWildcard(require(2)),_const=require(12),_util=require(7),_config=require(9),factory={cleanView:function(e){if(e.querySelectorAll)return[e].concat(babelHelpers.toConsumableArray(e.querySelectorAll("[data-module]"))).reverse().reduce(function(e,t){return e.then(function(){return t[_const.VIEWTAG]&&t[_const.VIEWTAG]._remove?t[_const.VIEWTAG]._remove():Promise.resolve()})},Promise.resolve())},getViewInstance:function(e){var t=e.viewClass,o=e.parent,r=e.dom,n=e.name,a=void 0===n?"":n,i=e.tag,u=void 0===i?"view":i,s=e.useProps,c=void 0===s?[]:s,l=_metadata.default.getMetadataExtends(u,t.prototype);l.scope||(l.scope="local"),void 0===l.precise&&(l.precise=3);var d=Promise.resolve();return l.template&&(d=d.then(function(){return _loader.default.loadSource(l.template).then(function(e){l.template="local"===l.scope?(0,_util.parseTemplate)(e,l.className):e})})),l.style&&(d=d.then(function(){return _loader.default.loadSource(l.style).then(function(e){(0,_util.excuteStyle)("local"===l.scope?(0,_util.parseStyle)(e,l.className):e,"".concat(l.style.replace(/\//g,"-"),":").concat(l.className))})})),d.then(function(){l.className&&r.classList.add(l.className);var e=new t({parent:o,info:l,name:a,dom:r,useProps:c});return(0,_util.setProp)(r,_const.VIEWTAG,e),e})},getRootView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=function(){var o=window.document.createElement("div");o.setAttribute("id",_const.ROOTELEMENTNAME),o.setAttribute("class",_const.ROOTELEMENTNAME),o.setAttribute("data-module","ada-root"),window.document.body.appendChild(o);var r=o[_const.VIEWTAG];return r?Promise.resolve(r):factory.getViewInstance({viewClass:e,parent:null,dom:o,tag:"root",name:"root",useProps:[]}).then(function(e){return e.oncreated(),e.update(t).then(function(){return e.onready(),e})})};return new Promise(function(e,t){/complete|loaded|interactive/.test(window.document.readyState)?o().then(function(t){return e(t)}):window.document.addEventListener("DOMContentLoaded",function(){return o().then(function(t){return e(t)})},!1)})},boot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.root,o=void 0===t?"":t,r=e.basePath,n=void 0===r?"":r,a=e.parameter,i=void 0===a?{}:a,u=e.map,s=void 0===u?{}:u,c=e.develop,l=void 0===c||c;return _config.base.set({root:o,basePath:n,develop:l,parameter:i,sourceMap:s}),0===o.indexOf("./")&&(o=o.substring(2)),0===o.indexOf("/")&&(o=o.substring(1)),_loader.default.loadModule(o).then(function(){var e=null;return _loader.Modules.scanClass(function(t,o){if(_metadata.default.getMetadata("root",o.prototype))return e=o,!1}),e?factory.getRootView(e,i).then(function(e){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return t?new t(function(e){e.forEach(function(e){return babelHelpers.toConsumableArray(e.removedNodes).reduce(function(e,t){return e.then(function(){return factory.cleanView(t)})},Promise.resolve())})}).observe(window.document,{childList:!0,subtree:!0}):window.document.addEventListener("DOMNodeRemoved",function(e){return factory.cleanView(e.target)}),e}):(console.error("root class can not find"),Promise.reject())})}},_default=factory;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DDM=exports.Template=exports.MapDom=void 0;var _event2=babelHelpers.interopRequireDefault(require(15)),_util=require(7),_collector=babelHelpers.interopRequireDefault(require(13)),_const=require(12),REGS={k:/\r/g,l:/\n/g,a:/&lt;/g,b:/&gt;/g,d:/<%|%>/g,e:/^=.*;$/,i:/\r\n/g,f:/>[\s]+</g,g:/<%[\s\S]*%>/,h:/\<\!\-\-[\s\S]*?\-\-\>/g,startdot:/&lt;/g,enddot:/&gt;/g,isDoctype:/\<\!DOCTYPE[\s\S]*?\>/g,isNote:/\<\!\-\-[\s\S]*?\-\-\>/g,isXmlTag:/\<\?[\s\S]*?\?\>/g,propcode:/\@\[\[[0-9]+\]\]\@/g,eventcode:/\$\[\[[0-9]+\]\]\$/g,assigncode:/\(\(\[[0-9]+\]\)\)/g,expresscode:/\[\[[0-9]+\]\]/g,nodecode:/\{\{node\}\}/g,prop:/[0-9a-z]+((\.)([0-9a-z_]+))+/g,customA:/<[\s\S]+?>/g,customB:/<[0-9a-z_-]+?>/,customC:/<[0-9a-z_-]+ .*?>/,customD:/<\/[0-9a-z_-]+?>/},SINGLETAG=["br","hr","img","input","param","link","meta","area","base","basefont","param","col","frame","embed","keygen","source"],TEMPLATECACHE=new Map,IDNAME="$$ID",SelfCloseTags=SINGLETAG.concat(),DefaultMacros={self:function(t){var e=t.props;return{template:t.context._templateStr,data:e.data}},custom:function(t){var e=t.bodyStr,n=t.props,r=t.events,a=t.attrs,o=t.option,i="",s=n.customTagName,c=o.tags?o.tags[s]:null;if(c||(c=Tags.get(s)),(0,_util.isFunction)(c)){var u=['data-module=""'];if(Reflect.ownKeys(a).forEach(function(t){return u.push("".concat(t,'="').concat(t,'"'))}),i="<div ".concat(u.join(" "),">").concat(e,"</div>"),!c)throw Error("[ada] tag [".concat(s,"] can not defined"));n.type=c}else{if(!c.template)throw Error("[ada] tag [".concat(s,"] can not defined with function of generate template"));i=c.template({bodyStr:e,props:n,events:r,attrs:a,option:o,generateOption:c.option})}return{template:i,data:n}}},DefaultAssignDirectives={html:function(t){return t}},DefaultFunctionNames=["classname"],DefaultFunctionFns=[function(t,e){if(Array.isArray(e)){var n=[e.shift()];return e.forEach(function(e){!0===t[e]&&n.push(e)}),n.join(" ")}var r=[];return e.def&&r.push(e.def),Reflect.ownKeys(e).forEach(function(e){!0===t[e]&&r.push(e)}),r.join(" ")}],Tags={regularTags:[],tags:{icon:{template:function(t){var e=t.attrs;return'<svg class="'.concat(e.class||"ada-icon",'"><use xlink:href="#').concat(e.id,'"></use></svg>')},selfClose:!0}},get:function(t){return this.tags[t]},set:function(t,e){this.tags[t]=e,(0,_util.isFunction)(e)||e.selfClose&&SelfCloseTags.push(t)},has:function(t){return void 0!==this.get(t)},remove:function(t){var e=this;Reflect.ownKeys(this.tags).filter(function(n){return e.tags[n]===t}).forEach(function(t){return delete e.tags[t]})},isRegularTag:function(t){var e=!0;if(-1===this.regularTags.indexOf(t)){var n=document.createElement(t);n instanceof HTMLElement||n instanceof SVGElement?this.regularTags.push(t):e=!1}return e}},Parser={beautySyntax:{syntaxs:{defaults:function(t){return"<%=".concat(t.substring(2,t.length-2),";%>")},log:function(t){return"<%console.log(".concat(t.join(" "),");%>")},html:function(t){return"<%=assign(html,".concat(t,");%>")},map:function(t){var e=t.shift();t.shift();var n=t.shift()||"$value",r=t.shift()||"$key",a="_"+(0,_util.randomid)(8);return"<%for(var ".concat(a," in ").concat(e,"){var ").concat(n,"=").concat(e,"[").concat(a,"];var ").concat(r,"=").concat(a,";%>")},"/map":function(){return"<%}%>"},list:function(t){var e=t.shift();t.shift();var n=t.shift()||"$item",r=t.shift()||"$index",a="_"+(0,_util.randomid)(8),o="_"+(0,_util.randomid)(6);return"<%if(".concat(e,"&&").concat(e,".length>=0)for(var ").concat(a,"=0,").concat(r,"=0,").concat(o,"=").concat(e,".length;").concat(a,"<").concat(o,";").concat(a,"++){var ").concat(n,"=").concat(e,"[").concat(a,"];").concat(r,"=").concat(a,";%>")},"/list":function(t){return"<%}%>"},if:function(t){return"<%if(".concat(t.join(" "),"){%>")},elseif:function(t){return"<%}else if(".concat(t.join(" "),"){%>")},else:function(){return"<%}else{%>"},"/if":function(){return"<%}%>"},break:function(){return"<%break;%>"},set:function(t){return"<%var ".concat(t.join(" "),";%>")}},parse:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\{\{[\s\S]+?\}\}/g,function(t){var e=t.substring(2,t.length-2).split(" "),n=e.shift();try{return Parser.beautySyntax.syntaxs[n]?Parser.beautySyntax.syntaxs[n](e):Parser.beautySyntax.syntaxs.defaults(t)}catch(t){console.log(t)}})}},nodeParser:{getNodeStr:function(t){var e={},n={},r={},a=[];return Reflect.ownKeys(t.props).forEach(function(o){if(o.startsWith("on")){var i=o.substring(2);e[i]=t.props[o],a.push(i)}else if(o.startsWith("@")){var s=o.substring(1);r[s]=t.props[o]}else"data-find"===o?n["data-find"]="".concat(IDNAME,'+":').concat(t.props["data-find"],'"'):"data-group"===o?n["data-group"]="".concat(IDNAME,'+":').concat(t.props["data-group"],'"'):"data-module"===o?n["data-module"]="".concat(IDNAME):n[o]='"'.concat(t.props[o],'"')}),a.length>0&&(n["data-bind"]="".concat(IDNAME,'+":').concat(a.join(","),'"')),'{tag:"'.concat(t.tag,'",attrs:{').concat(Reflect.ownKeys(n).map(function(t){return'"'.concat(t,'":').concat(n[t])}).join(","),"},events:{").concat(Reflect.ownKeys(e).map(function(t){return"".concat(t,":$").concat(e[t],"$")}).join(","),"},props:{").concat(Reflect.ownKeys(r).map(function(t){return'"'===r[t][0]?"".concat(t,":").concat(r[t]):"".concat(t,":@").concat(r[t],"@")}).join(","),"},children:[]}")},code:function(t,e){if(t.isTextNode){return/\(\[[0-9]+\]\)/.test(t.content)?t.content:'{content:"'.concat(t.content||"",'"}')}var n="",r="",a=Parser.nodeParser.getNodeStr(t);return t.parent?(n="$$NODE"+e,r="".concat(a,";$$CURRENT=").concat(n,";")):r="var ".concat(n="$$NODE"+e,"=").concat(a,";$$CURRENT=").concat(n,";"),t.children.forEach(function(t){if(t.isTextNode&&/\(\[[0-9]+\]\)/.test(t.content))r+=t.content;else{var a=e.split("_");e="".concat(a[0],"_").concat(a[1]/1+1);var o="$$NODE".concat(e),i=Parser.nodeParser.code(t,e);r+="var ".concat(o,"=").concat(i,"; ").concat(n,".children.push(").concat(o,"); $$CURRENT=").concat(n,";")}}),r}},getHTMLString:function(t){var e="";return t.forEach(function(t){e+=function t(e){var n="",r=-1!==SINGLETAG.indexOf(e.tag);if(void 0!==e.content)if(void 0===e.type)n=(0,_util.encodeHTML)(e.content)||"";else{var a=e.type,o=e.content;DefaultAssignDirectives[a]&&(o=DefaultAssignDirectives[a](e.content)),n='<div class="ada-assign-directive" data-assign-directive-type="'+a+'">'+(o||"")+"</div>"}else{var i=[];if(e.attrs&&Reflect.ownKeys(e.attrs).forEach(function(t,n){e.attrs[t]&&i.push(t+'="'+e.attrs[t]+'"')}),r)n="<"+e.tag+" "+i.join(" ")+"/>";else{var s=[];e.children.forEach(function(e){e&&s.push(t(e))}),n="<"+e.tag+" "+i.join(" ")+">"+s.join("")+"</"+e.tag+">"}}return n}(t)}),e},preparse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=this.parseCustomTag(t.trim(),e).replace(REGS.isNote,"").replace(REGS.isDoctype,"").replace(REGS.isXmlTag,"").replace(REGS.a,"<").replace(REGS.b,">").replace(REGS.h,"").replace(REGS.f,"><").replace(REGS.i,"").replace(REGS.k,"").replace(REGS.l,""),babelHelpers.toConsumableArray(SelfCloseTags).concat(babelHelpers.toConsumableArray(Reflect.ownKeys(e).filter(function(t){var n=e[t];if(!(0,_util.isFunction)(n))return!0===n.selfClose}))).forEach(function(e){var n=new RegExp("<".concat(e," .*?>"),"g");t=t.replace(n,function(t){return t.substring(0,t.length-1)+"/>"})}),t},parseCustomTag:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.replace(REGS.customA,function(t){return t.replace(REGS.customB,function(t){var n=t.substring(1,t.length-1);return Tags.has(n)||void 0!==e[n]?'<@custom @customTagName="'.concat(n,'">'):(Tags.isRegularTag(n)||console.warn("[ada] tag [".concat(n,"] seemed not supported")),t)}).replace(REGS.customC,function(t){var n=t.split(" "),r=n.shift().substring(1);return Tags.has(r)||void 0!==e[r]?(n.unshift('<@custom @customTagName="'.concat(r,'"')),n.join(" ")):(Tags.isRegularTag(r)||console.warn("[ada] tag [".concat(r,"] seemed not supported")),t)}).replace(REGS.customD,function(t){var n=t.substring(2,t.length-1);return Tags.has(n)||void 0!==e[n]?"</@custom>":(Tags.isRegularTag(n)||console.warn("[ada] tag [".concat(n,"] seemed not supported")),t)})})},parseMacro:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(-1!==t.indexOf("<@")){for(var e,n=-1,r="",a="start",o="",i="",s="",c=!0,u="",l={},f=0,p=0,d=0,h=0,v=[];n<t.length;)r=t[++n],"start"!==a||"<"!==r||"@"!==t[n+1]?"tagstart"!==a||"@"!==r?"start"!==a||"<"!==r||"/"!==t[n+1]||"@"!==t[n+2]?"endtag"!==a||">"!==r?"tagname"!==a||" "!==r?"tagname"!==a||"/"!==r&&">"!==r?"propname"!==a||"="!==r?"propvalue"!==a||"'"!==r&&'"'!==r?"propvalueing"!==a||r!==e?("endtag"===a&&(u+=r),"tagname"===a&&(o+=r),"propname"===a&&(i+=r),"propvalueing"===a&&(s+=r)):(a="tagname",l[i]=s):(a="propvalueing",e=r,s=""):a="propvalue":(">"===r?(p=n+1,a="start",c=!0):"/"===r&&(p=n+2,a="start",c=!1),""!==o&&v.push({type:"tag",tagname:o,props:l,body:c,start:f,end:p})):(a="propname",i=""):(a="start",h=n+1,v.push({type:"endtag",tagname:u,start:d,end:h})):(d=n,a="endtag",u="",n+=2):(a="tagname",o="",l={}):(a="tagstart",f=n);var g=0,m=0,E=!1,b=null,_=[],y="",S=0;return Reflect.ownKeys(v).forEach(function(e){var n=v[e];"tag"===n.type&&!1===n.body&&!1===E&&(n.bodystr="",n.from=n.start,n.to=n.end,_.push(n)),"tag"===n.type&&!0===n.body&&(E=!0,null===b&&((b=n).from=n.start),0===g&&(n.start,m=n.end),g++),"endtag"===n.type&&0===--g&&(b.to=n.end,b.bodystr=t.substring(m,n.start),_.push(b),b=null,E=!1)}),_.forEach(function(e){var n=e.props,r=[],a=[],o=[],i=[];Reflect.ownKeys(n).forEach(function(t){var e=n[t],s="";if(REGS.g.test(e)){var c="";e.split(REGS.d).forEach(function(t,e){(e+1)%2==0?""!==t&&(c+="".concat(t,"+")):c+=""!==t?"'".concat(t,"'+"):t});var u=c.length>0?c.substring(0,c.length-1):"''";s=u.substring(1,u.length-1)}else s='"'.concat(e,'"');if(t.startsWith("on")){var l=t.substring(2);r.push({name:l,value:s})}else if(t.startsWith("@")){if(a.push('"'.concat(t.substring(1),'":').concat(s)),"parameter"===t.substring(1).trim()){var f=s.match(REGS.prop);f&&f.forEach(function(t){var e=t.split(".");e.pop(),i.push('"'.concat(t,'":').concat(t)),i.push('"'.concat(e.join("."),'":').concat(e.join(".")))})}}else o.push('"'.concat(t,'":').concat(s))});var s=r.map(function(t){var e=t.value.split(/\(|\)/),n=e.shift();e.pop();var r=[],a=e.map(function(t){if(-1!==t.indexOf(" as ")){var e=t.split("as");return r.push("".concat(e[1].trim())),e[0].trim()}return r.push("".concat(t.split(".").pop())),t});return'"'.concat(t.name,'":{method:"').concat(n,'",parameters:[').concat(a.join(","),'],paranames:"').concat(r.join(","),'"}')});y+="".concat(t.substring(S,e.from),'\n                       <%var $$MACRORESULT=this._macro({tag:"').concat(e.tagname,'",props:{').concat(a.join(","),"},attrs:{").concat(o.join(","),"},events:{").concat(s.join(","),'},bodyStr:"').concat(e.bodystr,'",uses:{').concat(i.join(","),"}});if($$MACRORESULT&&$$MACRORESULT.length){for(var $$INDEX=0;$$INDEX<$$MACRORESULT.length;$$INDEX++){{{node}}.children.push($$MACRORESULT[$$INDEX]);}}else{{{node}}.children.push({content:$$MACRORESULT||''});}%>"),S=e.to}),y+=t.substring(S,t.length)}return t},parseNode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t&&""!==t){for(var e=[],n=[],r=null,a="",o="",i="",s="",c=!1,u=!1,l=!1,f=!1,p=!1,d=0,h=t.length;d<h;d++){var v=t[d];if("\r"!==v&&"\n"!==v){if("<"===v){p=!0,""!==s.trim()&&(r={content:s.trim()||"",parent:e[e.length-1]||null,isTextNode:!0},e[e.length-1]?e[e.length-1].children.push(r):n.push(r),s=""),t[d+1]&&"/"===t[d+1]?f=!0:(r={tag:"",props:{},children:[],parent:null,hasProp:!1,isTextNode:!1},e.push(r),e.length-2>=0&&(e[e.length-2].children.push(r),r.parent=e[e.length-2]),c=!0);continue}if(" "===v){if(p&&(c&&(c=!1,r.tag=a.trim(),a=""),!u&&!l)){u=!0;continue}}else if("="===v)p&&(u=!1);else if("'"===v||'"'===v){if(!l&&p){l=v;continue}l===v&&(l=!1,r.hasProp=!0,r.props[o.trim()]=i.trim(),o="",i="")}else{if(">"===v){p=!1,u=!1,l=!1,c=!1,f&&(f=!1,"",1===e.length&&n.push(e[0]),e.pop()),r.hasProp||(""===r.tag&&(r.tag=a.trim()),a="");continue}if("/"===v){t[d+1]&&">"===t[d+1]?(p=!1,l=!1,u=!1,f=!1,c=!1,"",1===e.length&&n.push(e[0]),r.hasProp||(""===r.tag&&(r.tag=a.trim()),a=""),e.pop()):p?l&&(i+=v):s+=v;continue}}c&&(a+=v),u&&(o+=v),l&&(i+=v),f&&v,!p&&(s+=v)}}return s&&n.push({content:s||"",parent:null,isTextNode:!0}),n}return[]},code:function(){var t="",e=[],n=[],r='"use strict";\nvar $$RESULT=[],$$CURRENT=null;\n';return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(REGS.d).forEach(function(r,a){a%2!=0?REGS.e.test(r)?(t+=""+"[[".concat(e.length,"]]"),e.push(r)):(t+="(([".concat(n.length,"]))"),n.push(r)):t+=""+r}),Parser.parseNode(t).forEach(function(t,e){var n=e+"_0",a=Parser.nodeParser.code(t,n);r+=a+"\r\n",-1!==a.indexOf("$$NODE"+n)&&-1===a.indexOf("$$RESULT.push($$NODE"+n+")")&&(r+="$$RESULT.push($$NODE"+n+");\r\n")}),r=r.replace(REGS.assigncode,function(t,e,r){return n[t.substring(3,t.length-3)]}).replace(REGS.propcode,function(t,n,r){var a=e[t.substring(3,t.length-3)];return a&&"="===a[0]?a.substring(1,a.length-1):a}).replace(REGS.eventcode,function(t,n,r){var a=e[t.substring(3,t.length-3)];if(a&&"="===a[0]){var o=a.substring(1,a.length-1).split(/\(|\)/),i=[],s=[];return o[1]&&(i=o[1].split(",").map(function(t){return-1!==t.indexOf(" as ")?t.split("as").pop().trim():-1!==t.indexOf(".")?t.split(".").pop():t}),s=o[1].split(",").map(function(t){return-1!==t.indexOf(" as ")?t.split("as").shift().trim():t})),'{method:"'.concat(o[0].trim(),'",parameters:[').concat(s.join(",")||"",'],paranames:"').concat(i.join(","),'"}')}return a}).replace(REGS.expresscode,function(t,n,r){var a=e[t.substring(2,t.length-2)];if(a&&"="===a[0]){var o=a.substring(1,a.length-1);if(0===o.indexOf("assign(")){var i=(o=o.substring(7,o.length-1)).split(","),s=i.shift(),c=i.join(",");return'"+(('.concat(c,")!==undefined?(").concat(c,'):\'\'),"type":"').concat(s)}return'"+(('.concat(o,")!==undefined?(").concat(o,"):'')+\"")}return a}).replace(REGS.nodecode,function(t,e,n){return"$$CURRENT"}),r+="return $$RESULT;"},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n="";return TEMPLATECACHE.has(t)?n=TEMPLATECACHE.get(t):(n=Parser.code(Parser.parseMacro(Parser.beautySyntax.parse(Parser.preparse(t,e)))),TEMPLATECACHE.set(t,n)),n}},Differ={childrenEvents:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Set;return t.forEach(function(t){return function t(n){n.events&&(Reflect.ownKeys(n.events).forEach(function(t){return e.add(t)}),n.attrs&&n.attrs["data-module"]||n.children&&n.children.forEach(function(e){return t(e)}))}(t)}),Array.from(e)},diffNode:function(t,e,n,r){if(t&&e){var a=t.length;if(0===t.length)0!==e.length&&r.removeAll.push({path:n.join(",")});else{var o=[];t.length<e.length?t[0].attrs&&t[0].attrs.uid&&e[0].attrs&&e[0].attrs.uid?o=Differ.checkRemove(t,e).map(function(t,e){return r.bremove.push({path:n.join(",")+","+t}),t}):a=e.length:Differ.checkAdd(t,e).forEach(function(t){r.badd.push({path:n.join(","),node:t.node}),e.push(t.node)}),Differ.checkSort(t,e).map(function(t){return r.sort.push({path:n.join(",")+","+t.from,to:t.to,from:t.from}),t}).forEach(function(t){var n=e[t.from];e[t.from]=e[t.to],e[t.to]=n});var i=[];e.forEach(function(t,e){-1===o.indexOf(e)&&i.push(t)}),(e=i).length>t.length&&(a=e.length);for(var s=0;s<a;s++){if(n.push(s),t[s])if(e[s])if(t[s].attrs&&void 0!==t[s].attrs["data-module"]){if(void 0!==t[s].attrs["data-module"]){var c=Differ.checkNode(t[s],e[s]);"replace"===c?r.replace.push({path:n.join(","),node:t[s]}):!0!==c&&(r.removeAll.push({path:n.join(",")}),r.edit.push({path:n.join(","),attrs:c}))}}else{var u=Differ.checkNode(t[s],e[s]);e[s].attrs&&void 0!==e[s].attrs["data-module"]?r.replace.push({path:n.join(","),node:t[s]}):!0===u?Differ.diffNode(t[s].children,e[s].children,n,r):"replace"===u?r.replace.push({path:n.join(","),node:t[s]}):(r.edit.push({path:n.join(","),attrs:u}),Differ.diffNode(t[s].children,e[s].children,n,r))}else r.add.push({path:n.join(","),node:t[s]});else r.remove.push({path:n.join(","),node:e[s]});n.pop()}}}},checkAdd:function(t,e){var n=[];if(t[0]&&e[0]&&t[0].attrs&&t[0].attrs.uid&&e[0].attrs&&e[0].attrs.uid){var r=e.map(function(t){return t.attrs.uid});t.forEach(function(t,e){var a=t.attrs.uid;-1===r.indexOf(a)&&n.push({node:t,index:e})})}return n},checkSort:function(t,e){var n=[];if(t[0]&&e[0]&&t[0].attrs&&t[0].attrs.uid&&e[0].attrs&&e[0].attrs.uid){var r=t.map(function(t){return t.attrs.uid});e.forEach(function(t,e){var a=t.attrs.uid,o=r.indexOf(a);-1!==o&&o!==e&&n.push({node:t,from:e,to:o})})}return n},checkRemove:function(t,e){var n=[],r=t.map(function(t){return t.attrs.uid});return e.forEach(function(t,e){-1===r.indexOf(t.attrs.uid)&&n.push(e)}),n},checkNode:function(t,e){var n=!0;if(void 0!==t.content)n=t.content===e.content||"replace";else{if(t.tag===e.tag)return Differ.checkProps(t.attrs,e.attrs);n="replace"}return n},checkProps:function(t,e){var n=Object.keys(t),r=Object.keys(e),a={final:t},o=n.length,i=!1;n.length<r.length&&(o=r.length);for(var s=0;s<o;s++){var c=n[s];if(!c){i=!0;break}if(void 0===e[c]){i=!0;break}if(t[c]!==e[c]){i=!0;break}}return!i||a},diff:function(t,e){var n={add:[],replace:[],remove:[],edit:[],removeAll:[],bremove:[],badd:[],sort:[]};Differ.diffNode(t,e,[],n);return e=[],n}},Effecter={element:function(t,e){if("svg"===t.tag&&!e&&(e=!0),void 0!==t.content){if(e)return window.document.createElementNS("http://www.w3.org/2000/svg","text");if(void 0===t.type)return window.document.createTextNode(t.content);var n=t.type,r=t.content;DefaultAssignDirectives[n]&&(r=DefaultAssignDirectives[n](t.content));var a=window.document.createElement("div");return a.setAttribute("class","ada-assign-directive"),a.setAttribute("data-assign-directive",n),a.innerHTML=r||"",a}var o=null;for(var i in o=e?window.document.createElementNS("http://www.w3.org/2000/svg",t.tag):window.document.createElement(t.tag),t.attrs)if(e){var s=i.split(":");s.length>1?o.setAttributeNS("http://www.w3.org/1999/"+s[0],s[1],t.attrs[i]):o.setAttributeNS(null,s[0],t.attrs[i])}else o.setAttribute(i,t.attrs[i]);for(var c=0;c<t.children.length;c++)o.appendChild(Effecter.element(t.children[c],e));return o},effect:function(t,e){var n={};if(e.badd.forEach(function(e){var n=t;e.path.split(",").forEach(function(t){n=n.childNodes[t/1]}),n.appendChild(Effecter.element(e.node))}),e.sort.length>0){var r=e.sort.map(function(e){var n=t;return e.path.split(",").forEach(function(t){return n=n.childNodes[t/1]}),{node:n,to:e.to,from:e.from}}),a=babelHelpers.toConsumableArray(r[0].node.parentNode.childNodes);r.forEach(function(t){var e=a[t.to];a[t.to]=t.node,a[t.from]=e});for(var o=a[0].parentNode,i=document.createDocumentFragment(),s=0;s<a.length;s++)i.appendChild(a[s]);o.appendChild(i)}e.bremove.map(function(e){var n=t;return e.path.split(",").forEach(function(t){n=n.childNodes[t/1]}),n}).forEach(function(t){return t.parentNode.removeChild(t)}),e.replace.forEach(function(e){var n=t,r=!1;e.path.split(",").forEach(function(t){var a=n.childNodes[t/1];a?(n=a,r=!0):(r=!1,n.appendChild(Effecter.element(e.node)))}),r&&n.parentNode.replaceChild(Effecter.element(e.node),n)}),e.add.forEach(function(e){var r=t,a=e.path.split(",");a.pop();var o=a.join("");a.forEach(function(t){r=r.childNodes[t/1]}),n[o]?n[o].push({p:r,n:e.node}):n[o]=[{p:r,n:e.node}]}),e.edit.forEach(function(e){var n=t;e.path.split(",").forEach(function(t){return n=n.childNodes[t/1]});var r=e.attrs,a=[];if(n.attributes.getNamedItem)a=babelHelpers.toConsumableArray(n.attributes).map(function(t){return t.nodeName});else for(var o in n.attributes)a.push(o);Reflect.ownKeys(r.final).forEach(function(t){if(-1===t.indexOf(":")){if(n.getAttribute(t)!==r.final[t]){n.setAttribute(t,r.final[t]);try{n[t]=r.final[t]}catch(t){}}var e=a.indexOf(t);-1!==e&&a.splice(e,1)}else{var o=t.split(":"),i=o[1],s=o[0];n.getAttributeNS("http://www.w3.org/1999/"+s,i)!==r.final[t]&&n.setAttributeNS("http://www.w3.org/1999/"+s,i,r.final[t]);var c=a.indexOf(i);-1!==c&&a.splice(c,1),-1!==(c=a.indexOf(t))&&a.splice(c,1)}}),a.forEach(function(t){if(-1===t.indexOf(":"))n.removeAttribute(t);else{var e=t.split(":"),a=e[1],o=e[0];n.removeAttributeNS("http://www.w3.org/1999/"+o,a,r.final[tp])}})}),e.remove.map(function(e){var n=t,r=e.path.split(","),a=r.pop();return r.forEach(function(t){return n=n.childNodes[t/1]}),n.childNodes[a]}).forEach(function(t){return t.parentNode.removeChild(t)}),e.removeAll.forEach(function(e){var n=t;e.path&&e.path.split(",").forEach(function(t){n&&(n=n.childNodes[t/1])}),n&&(n.dataset.module||(n.innerHTML=""))}),Reflect.ownKeys(n).forEach(function(t){var e=n[t];if(e.length>0){var r=window.document.createDocumentFragment();e.forEach(function(t){return r.appendChild(Effecter.element(t.n))}),e[0].p.appendChild(r)}else e.p.appendChild(Effecter.element(e.n))})}},MapDom=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;babelHelpers.classCallCheck(this,t),this._container=e,this._dom=n}return babelHelpers.createClass(t,null,[{key:"getElementPath",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n&&n!==t;)e.push(babelHelpers.toConsumableArray(n.parentNode.childNodes).indexOf(n)),n=n.parentNode;return e.reverse()}}]),babelHelpers.createClass(t,[{key:"getAttributes",value:function(){return this._container._cross.getAttributeByPath(t.getElementPath(this._container._container,this._dom))}},{key:"getAttribute",value:function(t){return this.getAttributes()[t]}},{key:"getEventInfo",value:function(){return this._container._cross.getEventsByPath(t.getElementPath(this._container._container,this._dom))}},{key:"isListenedEvent",value:function(t){return void 0!==this.getEventInfo()[t]}},{key:"element",value:function(){return this._dom}},{key:"getElement",value:function(){return this._dom}},{key:"groupi",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return babelHelpers.toConsumableArray(this._dom.querySelectorAll('[data-groupi="'.concat(n,'"]'))).map(function(n){return new t(e._container,n)})}}]),t}();exports.MapDom=MapDom;var Template=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;babelHelpers.classCallCheck(this,t),this._id=r,this._currentState=null,this._beforeState=null,this._macrofn=Object.assign({},DefaultMacros,n),this._templateStr=e,this._code=Parser.parse(e,a.tags),this._option=a,this._useprops=[],this._precise=o}return babelHelpers.createClass(t,[{key:"_macro",value:function(e){var n=e.tag,r=e.bodyStr,a=e.props,o=e.events,i=e.attrs,s=e.uses;if(this._macrofn[n]){var c=new Set;if(a.parameter){var u=a.parameter[_const.PROXYSTATE];u?u._parent&&c.add(u._prop):Array.isArray(u)?u.forEach(function(t){t[_const.PROXYSTATE]&&t[_const.PROXYSTATE]._parent&&c.add(t[_const.PROXYSTATE]._prop)}):(0,_util.isPlainObject)(u)&&Reflect.ownKeys(u).forEach(function(t){var e=u[t];e[_const.PROXYSTATE]&&e[_const.PROXYSTATE]._parent&&c.add(e[_const.PROXYSTATE]._prop)})}Reflect.ownKeys(s).map(function(t){var e=s[t];if(e&&e[_const.PROXYSTATE]&&e[_const.PROXYSTATE]._prop)c.add(e[_const.PROXYSTATE]._prop);else{var n=t.split("."),r=n.pop(),a=n.join("."),o=s[a];o&&o[_const.PROXYSTATE]&&c.add(o[_const.PROXYSTATE]._prop+"."+r)}}),a.useProps=babelHelpers.toConsumableArray(c);var l=this._macrofn[n]({attrs:i,events:o,props:a,bodyStr:r,parseBody:function(e){return""!==r?new t(r,this._macrofn,this._id).render(e):""}.bind(this),context:this,id:this._id,option:this._option});if(l&&l.template){var f=new t(l.template,this._macrofn,this._id).getCurrentState(l.data);if(1===f.length){var p=f[0],d=Reflect.ownKeys(o);return d.length>0&&(p.attrs["data-bind"]="".concat(this._id,":").concat(d.map(function(t){return t}).join(","))),Object.assign(p.props,a),Object.assign(p.events,o),Object.assign(p.attrs,i),[p]}throw new Error("[ada] macro must return only one node")}return l||""}return console.error("[ada] macro can not found ["+n+"] template is "+this._templateStr),""}},{key:"getAttributeByPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={children:this._currentState};return t.forEach(function(t){return e=e.children[t]}),e.props||null}},{key:"getEventsByPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={children:this._currentState};return t.forEach(function(t){return e=e.children[t]}),e.events||null}},{key:"getAllInfoByPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={children:this._currentState};return t.forEach(function(t){return e=e.children[t]}),{events:e.events,props:e.props}}},{key:"getCurrentEventMap",value:function(){return this._currentState?Differ.childrenEvents(this._currentState):[]}},{key:"getCurrentState",value:function(t){var e,n=[IDNAME,"data"].concat(DefaultFunctionNames,[this._code]),r=[this._id,t].concat(DefaultFunctionFns);return(e=babelHelpers.construct(Function,babelHelpers.toConsumableArray(n))).call.apply(e,[this].concat(babelHelpers.toConsumableArray(r)))}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._currentState&&(this._beforeState=this._currentState);var n=new _collector.default({data:t,fn:this.getCurrentState,precise:this._precise});return this._currentState=n.invoke({},this),this._useprops=n.getUsedPros(),e&&this._beforeState?Differ.diff(this._currentState,this._beforeState):Parser.getHTMLString(this._currentState)}},{key:"isRendered",value:function(){return!this._templateStr||null!=this._beforeState}}]),t}();exports.Template=Template;var DDM=function(){function t(e){var n=e.id,r=e.container,a=void 0===r?null:r,o=e.templateStr,i=void 0===o?"":o,s=e.binders,c=void 0===s?{}:s,u=e.macro,l=void 0===u?{}:u,f=e.option,p=void 0===f?{}:f,d=e.precise,h=void 0===d?3:d;babelHelpers.classCallCheck(this,t),this._id=n,this._container=a,this._cross=new Template(i,l,n,p,h),this._binders=c,this._isrender=!1}return babelHelpers.createClass(t,[{key:"_agentEvent",value:function(t){var e=this,n=this._container;_event2.default.unbind(n),t.forEach(function(t){_event2.default.canBubbleUp(t)?_event2.default.bind(n,t,function(t){for(var n=t.target,r=t.type,a=n,o=[];a&&a!==e._container&&a!==window;){var i=a.dataset.bind;if(i){var s=i.split(":"),c=s[0],u=s[1]?s[1].split(","):[];if(c===e.getId()&&-1!==u.indexOf(r)){var l=e._cross.getAllInfoByPath(MapDom.getElementPath(e._container,a)),f=l.events,p=l.props,d=f[t.type];d&&o.push({info:d,props:p})}}a=a.parentNode}o.forEach(function(n){var r=n.info,a=n.props,o=r.method,i=r.parameters,s=r.paranames;if(e._binders){var c={e:t,props:a};s.split(",").forEach(function(t,e){return c[t]=i[e]}),e._binders({method:o,parameters:c})}})}):_event2.default.bind(n,type,function(t){var n=t.target,r=t.type,a=n.dataset.bind;if(a){var o=a.split(":"),i=(o[0],o[1]?o[1].split(","):[]);if(e._cross.getId(),-1!==i.indexOf(r)){var s=e._cross.getAllInfoByPath(MapDom.getElementPath(e._container,n)),c=s.events,u=s.props,l=c[t.type];if(l){l.method;var f=l.parameters,p=l.paranames;if(e._binders){var d={e:t,props:u};p.split(",").forEach(function(t,e){return d[t]=f[e]}),e._binders({method:l.method,parameters:d})}}}}})})}},{key:"getId",value:function(){return this._id}},{key:"finder",value:function(t){return this.finders(t)[0]}},{key:"finders",value:function(t){var e=this,n="".concat(this._id,":").concat(t),r='[data-find="'.concat(n,'"]');return babelHelpers.toConsumableArray(this._container.querySelectorAll(r)).map(function(t){return new MapDom(e,t)})}},{key:"group",value:function(t){return this.groups(t)}},{key:"groups",value:function(t){var e=this,n="".concat(this._id,":").concat(t),r='[data-group="'.concat(n,'"]');return babelHelpers.toConsumableArray(this._container.querySelectorAll(r)).map(function(t){return new MapDom(e,t)})}},{key:"modules",value:function(){var t=this,e='[data-module="'.concat(this._id,'"]');return babelHelpers.toConsumableArray(this._container.querySelectorAll(e)).map(function(e){return new MapDom(t,e)})}},{key:"render",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._cross.render(t,n);return n&&this._cross.isRendered()?r&&Effecter.effect(this._container,r):r&&(this._container.innerHTML=r),this._agentEvent(this._cross.getCurrentEventMap()),this._isrender=!0,this}},{key:"getUseProps",value:function(){return this._cross._useprops}},{key:"isRendered",value:function(){return this._isrender}}],[{key:"setDefaultMacro",value:function(t,e){return DefaultMacros[t]=e,null}},{key:"setDefaultAssignDirective",value:function(t,e){return DefaultAssignDirectives[t]=e,function(t){Parser.beautySyntax.syntaxs[t]=function(e){return"<%=assign(".concat(t,",").concat(e,");%>")}}(t),null}},{key:"setDefaultFunctions",value:function(t,e){var n=DefaultFunctionNames.indexOf(t);-1===n?(DefaultFunctionNames.push(t),DefaultFunctionFns.push(e)):DefaultFunctionFns[n]=e}},{key:"setDefaultTag",value:function(t,e){Tags.set(t,e)}}]),t}();exports.DDM=DDM;var _default=DDM;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dispatcher=void 0;var _view=require(1),_const=require(12),Dispatcher=function(){function e(){babelHelpers.classCallCheck(this,e),this._listener=[]}return babelHelpers.createClass(e,[{key:"observe",value:function(e){return e instanceof _view.View&&-1===this._listener.indexOf(e)&&this._listener.push(e),this}},{key:"unobserve",value:function(e){var t=this._listener.indexOf(e);return-1!==t&&this._listener.splice(t,1),this}},{key:"dispatch",value:function(e,t){this._listener.forEach(function(i){if(!i.isRemoved()){var r=i[_const.SUBSCRIBE][e];try{r&&i[r]&&i[r](t)}catch(e){console.error("[ada] dispatcher subscriber call error ",e)}}}),this._listener=this._listener.filter(function(e){return!e.isRemoved()})}}]),e}();exports.Dispatcher=Dispatcher;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isString=isString,exports.isFunction=isFunction,exports.isEqual=isEqual,exports.isObject=isObject,exports.isPlainObject=isPlainObject,exports.isArray=isArray,exports.isQueryString=isQueryString,exports.queue=queue,exports.randomid=randomid,exports.setProp=setProp,exports.queryString=queryString,exports.postData=postData,exports.parseTemplate=parseTemplate,exports.parseStyle=parseStyle,exports.excuteStyle=excuteStyle,exports.hashCode=hashCode,exports.encodeHTML=encodeHTML,exports.getMappedPath=getMappedPath,exports.extend=extend,exports.clone=clone,exports.isTargetDataSet=isTargetDataSet,exports.checkDataSetMetaInfo=checkDataSetMetaInfo,exports.getDataSetFromParent=getDataSetFromParent,exports.isChanges=isChanges,exports.isSubModuleChange=isSubModuleChange,exports.protectData=protectData;var _dataset2=require(3),_const=require(12),_passable=babelHelpers.interopRequireDefault(require(8)),_config=require(9),QUREYREG=/(^|&).*=([^&]*)(&|$)/,TEMPLATEREG=/class=(["'])(?:(?=(\\?))\2.)*?\1/g,STYLEREG=/\{|\}/,STYLEREG_B=/\.[0-9a-zA-Z-]+/g,ISHTMLREG=/^\s*<(\w+|!)[^>]*>/;function isString(e){return"string"==typeof e&&e.constructor===String}function isFunction(e){return"function"==typeof e&&e.constructor===window.Function}function isEqual(e,t){if(null===e||void 0===e||null===t||void 0===t)return e===t;if(e.constructor!==t.constructor)return!1;if(e instanceof Function)return e===t;if(e instanceof RegExp)return e===t;if(e===t||e.valueOf()===t.valueOf())return!0;if(Array.isArray(e)&&e.length!==t.length)return!1;if(e instanceof Date)return!1;if(!(e instanceof Object))return!1;if(!(t instanceof Object))return!1;var n=Object.keys(e);return Object.keys(t).every(function(e){return-1!==n.indexOf(e)})&&n.every(function(n){return isEqual(e[n],t[n])})}function isObject(e){return"object"===babelHelpers.typeof(e)&&"[object object]"===Object.prototype.toString.call(e).toLowerCase()&&!e.length}function isPlainObject(e){return isObject(e)&&e.constructor.prototype===Object.prototype}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function isQueryString(e){return isString(e)&&QUREYREG.test(e)}function queue(e){var t=null,n=[];return e.forEach(function(e){t=t?t.then(function(t){return n.push(t),e()}):e()}),t?t.then(function(e){return n.push(e),n}):Promise.resolve([])}function randomid(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return e<=2&&(e=7),Math.random().toString(36).slice(2,e+2)}function setProp(e,t,n){Reflect.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function queryString(e){var t=[];if(e){for(var n in e){var r=e[n];isString(r)?t.push("".concat(n,"=").concat(window.encodeURIComponent(r))):isObject(r)||isArray(r)?t.push("".concat(n,"=").concat(window.encodeURIComponent(JSON.stringify(r)))):t.push("".concat(n,"=").concat(void 0!==r&&null!==r?window.encodeURIComponent(r.toString()):""))}return t.join("&")}return""}function postData(e,t){if(e){if(e instanceof FormData||e instanceof Blob||e instanceof ArrayBuffer)return e;if(isObject(e)){var n=!1;for(var r in e)if(e[r]instanceof Blob||e[r]instanceof ArrayBuffer||e[r]instanceof File){n=!0;break}if(n){var o=new FormData;for(var i in e)e[i]instanceof Blob?o.append(i,e[i]):e[i]instanceof File?o.append(i,e[i]):isArray(e[i])||isObject(e[i])?o.append(i,window.encodeURIComponent(JSON.stringify(e[i]))):e[i]instanceof FormData||o.append(i,window.encodeURIComponent(e[i].toString()));return o}return t?queryString(e):JSON.stringify(e)}return isArray(e)?window.encodeURIComponent(JSON.stringify(e)):e}return null}function parseTemplate(e,t){return t?e.replace(TEMPLATEREG,function(e){if(-1===e.indexOf("{{")){var n=e.substring(7,e.length-1).trim().split(" ").map(function(e){return":"===e[0]?e.substring(1):t+"-"+e}),r=e.substr(6,1);return"class=".concat(r).concat(n.join(" ")).concat(r)}var o=e.substring(9,e.length-3).trim();return'class="{{('.concat(o,").split(' ').map(key=>key?(key[0]!==':'?('").concat(t,"-'+key):key.substring(1)):'').join(' ')}}\"")}):e}function parseStyle(e,t){var n="",r=[],o=[];return e.split(STYLEREG).forEach(function(e){var t=e.trim();-1!==t.indexOf("@")&&(o.push([].concat(r)),r=[]),r.push(t)}),o.push(r),o.forEach(function(e){var r=!1,o=[];-1!==e[0].indexOf("@")&&(r=!0,n+=e[0]+"{",e.shift()),e.forEach(function(e,n){e=e.trim(),(n+1)%2!=0?o.push(e.replace(STYLEREG_B,function(e){return e.substring(1).trim()!==t?".".concat(t,"-").concat(e.substring(1)):e})):e&&o.push("{"+e+"}")}),n+=r?o.join("")+"}":o.join("")}),n}function excuteStyle(e,t){if(!document.getElementById(t)){var n=document.createElement("style");n.setAttribute("media","screen"),n.setAttribute("type","text/css"),n.setAttribute("id",t),n.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(n)}}function hashCode(e){for(var t=0,n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}function encodeHTML(e){if(ISHTMLREG.test(e)){var t=document.createElement("div");return void 0!=t.textContent?t.textContent=e:t.innerText=e,t.innerHTML}return e}function getMappedPath(e){return"P".concat(Math.abs(hashCode(e)))}function extend(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"===babelHelpers.typeof(a)||isFunction(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(u&&r&&(isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,i=n&&Array.isArray(n)?n:[]):i=n&&isPlainObject(n)?n:{},a[t]=extend(u,i,r)):void 0!==r&&(a[t]=r));return a}function clone(e){return isArray(e)?extend(!0,[],e):isObject(e)?extend(!0,{},e):e}function isTargetDataSet(e,t){var n=!0;return e[_const.DATASETSERVICE]instanceof t.service||(n=!1),n&&t.type&&(e instanceof t.type||(n=!1)),n}function checkDataSetMetaInfo(e){isFunction(e)&&(e={service:e});var t=!0,n="",r=Object.assign({type:_dataset2.DataSet,service:null},e);return isFunction(r.type)&&r.type.prototype instanceof _dataset2.DataSet||r.type===_dataset2.DataSet||(t=!1,n="[ada] dataset must be a class or subclass of  DataSet"),isFunction(r.service)&&(r.service.prototype instanceof _dataset2.Service||r.service===_dataset2.Service)||(t=!1,n="[ada] service must be a class or subclass of  Service"),{checked:t,errorInfo:n,info:r}}function getDataSetFromParent(e,t){for(var n=null,r=e.getParent();r;){var o=r[_const.DATASET];if(o&&isTargetDataSet(o,t)){n=o;break}r=r.getParent()}return n}function isChanges(e,t){return e&&t&&e.length>0&&t.length>0?t.some(function(t){return-1!==e.indexOf(t)}):!(0===e.length||0===t.length)}function isSubModuleChange(e,t){return e&&t&&e.length>0&&t.length>0?t.some(function(t){return e.some(function(e){return 0===e.indexOf(t)||e===t})}):!(0===e.length||0===t.length)}function protectData(e){var t=e;return!Object.isFrozen(e)&&_config.base.get().develop&&(t=_passable.default.get(e).pass()),t}},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _collector=babelHelpers.interopRequireDefault(require(13)),_const=require(12),_util=require(7),Passable=function(){function e(t){babelHelpers.classCallCheck(this,e),(0,_util.setProp)(this,_const.BASEDATA,t)}return babelHelpers.createClass(e,[{key:"pass",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e||(e=function(e){return e}),new _collector.default({data:this[_const.BASEDATA],fn:e,collect:!1}).invoke(t,l)}}],[{key:"get",value:function(t){return new e(t)}}]),e}(),_default=Passable;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Config=exports.request=exports.base=void 0;var _passable=babelHelpers.interopRequireDefault(require(8)),_request2=require(0),config={root:"",basePath:"",parameter:{},sourceMap:{},develop:!1},_base={set:function(e){config=_passable.default.get(config).pass(function(e,t){return Object.assign(e,t)},e||{})},get:function(){return config}};exports.base=_base;var _request={get:function(){return _request2.config},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(_request2.config,e)}};exports.request=_request;var Config={base:function(){return _base.get()},request:function(){return _request.get()},setRequest:function(e){_request.set(e)}};exports.Config=Config;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.view=view,exports.root=root,exports.action=action,exports.compute=compute,exports.handler=handler,exports.binder=binder,exports.subscribe=subscribe;var _util=require(7),_metadata=babelHelpers.interopRequireDefault(require(11)),_tags=babelHelpers.interopRequireDefault(require(16));function setViewAnnotation(t,e){if(null===e||(0,_util.isObject)(e))return function(n){var a=e||{};if(a.dataset){var o=(0,_util.checkDataSetMetaInfo)(a.dataset),r=o.checked,i=o.errorInfo,u=o.info;if(!r)throw Error("[data] view dataset error ".concat(i));a.dataset=u}a.tagName&&_tags.default.set(a.tagName,n),_metadata.default.defineMetadata(t,a,n.prototype)};_metadata.default.defineMetadata(t,{},e.prototype)}function setMethodAnnotation(t,e){if(e)return function(n,a){var o=_metadata.default.getMetadata(t,n)||{};e.split(",").forEach(function(t){return o[t]=a}),_metadata.default.defineMetadata(t,o,n)};throw Error("[ada] annotation ".concat(e," name can not be empty"))}function view(){return setViewAnnotation("view",arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}function root(){return setViewAnnotation("root",arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}function action(t){return setMethodAnnotation("action",t)}function compute(t){return setMethodAnnotation("compute",t)}function handler(t){return setMethodAnnotation("handler",t)}function binder(t){return setMethodAnnotation("binder",t)}function subscribe(t){return setMethodAnnotation("subscribe",t)}},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var METADATAKEY=Symbol("[[metadata]]"),Metadata={defineMetadata:function(e,t,a){-1===Reflect.ownKeys(a).indexOf(METADATAKEY)&&Reflect.defineProperty(a,METADATAKEY,{enumerable:!1,configurable:!1,writable:!1,value:{}}),a[METADATAKEY][e]=t},getMetadata:function(e,t){for(var a=t,r=void 0;a;){if(-1!==Reflect.ownKeys(a).indexOf(METADATAKEY)){r=a[METADATAKEY][e];break}a=Reflect.getPrototypeOf(a)}return r},getMetadataExtends:function(e,t){for(var a=t,r=[];a;)-1!==Reflect.ownKeys(a).indexOf(METADATAKEY)&&r.push(a[METADATAKEY][e]),a=Reflect.getPrototypeOf(a);return Object.assign.apply(Object,[{}].concat(babelHelpers.toConsumableArray(r.reverse())))}},_default=Metadata;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BASEDATA=exports.CONNECTSTATE=exports.DATASETCOMPUTE=exports.DATASETACTION=exports.CHANGEPROPS=exports.USEPROPS=exports.DATASETEDITS=exports.PROXYSTATE=exports.DATASETCOMMITCOUNT=exports.DATASETISCOMMIT=exports.DATASETRANSACTIONSTEP=exports.DATASETRANSACTIONSTATE=exports.DATASETRANSACTION=exports.DATASETLISTENER=exports.DATASETSERVICE=exports.DATASETDATA=exports.DATASETOWNER=exports.VIEWNAME=exports.CONNECTS=exports.VIEWINFO=exports.HANDLERS=exports.SUBSCRIBE=exports.BINDERS=exports.DATASET=exports.OUTERVIEW=exports.GROUPFUL=exports.ROOTELEMENTNAME=exports.PREREMOVED=exports.ISREMOVED=exports.CLASSNAME=exports.DDMCONTAINER=exports.IDNAME=exports.CHILDRENTAG=exports.ELEMENTTAG=exports.PARENTVIEWTAG=exports.VIEWTAG=exports.DDMTAG=void 0;var DDMTAG=Symbol("ddm");exports.DDMTAG=DDMTAG;var VIEWTAG=Symbol("view");exports.VIEWTAG=VIEWTAG;var PARENTVIEWTAG=Symbol("parent");exports.PARENTVIEWTAG=PARENTVIEWTAG;var ELEMENTTAG=Symbol("node");exports.ELEMENTTAG=ELEMENTTAG;var CHILDRENTAG=Symbol("children");exports.CHILDRENTAG=CHILDRENTAG;var IDNAME=Symbol("viewid");exports.IDNAME=IDNAME;var DDMCONTAINER=Symbol("ddmbody");exports.DDMCONTAINER=DDMCONTAINER;var CLASSNAME=Symbol("class");exports.CLASSNAME=CLASSNAME;var ISREMOVED=Symbol("isremove");exports.ISREMOVED=ISREMOVED;var PREREMOVED=Symbol("preremoved");exports.PREREMOVED=PREREMOVED;var ROOTELEMENTNAME="ada-root";exports.ROOTELEMENTNAME=ROOTELEMENTNAME;var GROUPFUL=Symbol("groupful");exports.GROUPFUL=GROUPFUL;var OUTERVIEW=Symbol("outview");exports.OUTERVIEW=OUTERVIEW;var DATASET=Symbol("dataset");exports.DATASET=DATASET;var BINDERS=Symbol("binders");exports.BINDERS=BINDERS;var SUBSCRIBE=Symbol("subscribe");exports.SUBSCRIBE=SUBSCRIBE;var HANDLERS=Symbol("handler");exports.HANDLERS=HANDLERS;var VIEWINFO=Symbol("viewinfo");exports.VIEWINFO=VIEWINFO;var CONNECTS=Symbol("connects");exports.CONNECTS=CONNECTS;var VIEWNAME=Symbol("name");exports.VIEWNAME=VIEWNAME;var DATASETOWNER=Symbol("owner");exports.DATASETOWNER=DATASETOWNER;var DATASETDATA=Symbol("data");exports.DATASETDATA=DATASETDATA;var DATASETSERVICE=Symbol("service");exports.DATASETSERVICE=DATASETSERVICE;var DATASETLISTENER=Symbol("listener");exports.DATASETLISTENER=DATASETLISTENER;var DATASETRANSACTION=Symbol("transaction");exports.DATASETRANSACTION=DATASETRANSACTION;var DATASETRANSACTIONSTATE=Symbol("transactionstate");exports.DATASETRANSACTIONSTATE=DATASETRANSACTIONSTATE;var DATASETRANSACTIONSTEP=Symbol("transactionstep");exports.DATASETRANSACTIONSTEP=DATASETRANSACTIONSTEP;var DATASETISCOMMIT=Symbol("commits");exports.DATASETISCOMMIT=DATASETISCOMMIT;var DATASETCOMMITCOUNT=Symbol("commitcount");exports.DATASETCOMMITCOUNT=DATASETCOMMITCOUNT;var PROXYSTATE=Symbol("proxy");exports.PROXYSTATE=PROXYSTATE;var DATASETEDITS=Symbol("setprops");exports.DATASETEDITS=DATASETEDITS;var USEPROPS=Symbol("useprops");exports.USEPROPS=USEPROPS;var CHANGEPROPS=Symbol("changeprops");exports.CHANGEPROPS=CHANGEPROPS;var DATASETACTION=Symbol("action");exports.DATASETACTION=DATASETACTION;var DATASETCOMPUTE=Symbol("compute");exports.DATASETCOMPUTE=DATASETCOMPUTE;var CONNECTSTATE=Symbol("connectstate");exports.CONNECTSTATE=CONNECTSTATE;var BASEDATA=Symbol("data");exports.BASEDATA=BASEDATA;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _const=require(12),_config=require(9),issupportproxy="undefined"!=typeof Proxy,util={is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},isProxy:function(e){return!!e&&!!e[_const.PROXYSTATE]},isProxyable:function(e){if(!e)return!1;if("object"!==babelHelpers.typeof(e))return!1;if(Array.isArray(e))return!0;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype},isProxyProp:function(e){return"string"==typeof e||"number"==typeof e},has:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},shallowCopy:function(e){if(Array.isArray(e))return e.slice();var t=void 0===e.__proto__?Object.create(null):{};return Object.assign(t,e)},setPropName:function(e,t){e._parent?e._prop=[e._parent._prop,t].join("."):e._prop=t},finalize:function(e){var t=this;if(this.isProxy(e)){var r=e[_const.PROXYSTATE];return!0===r._modified?!0===r._finalized?r._copy:(r._finalized=!0,Array.isArray(r._copy)&&r._copy.forEach(function(e,o){e!==r._data[o]&&(r._copy[o]=t.finalize(e))}),Reflect.ownKeys(r._copy).forEach(function(e){var o=r._copy[e];o!==r._data[e]&&(r._copy[e]=t.finalize(o))}),this.freeze(r._copy)):this.finalize(r._data)}return this.finalizeNonProxiedObject(e),e},finalizeNonProxiedObject:function(e){var t=this;this.isProxyable(e)&&(Object.isFrozen(e)||(this.each(e,function(r,o){t.isProxy(o)?e[r]=t.finalize(o):t.finalizeNonProxiedObject(o)}),this.freeze(e)))},freeze:function(e){return _config.base.get().develop&&Object.freeze(e),e},cleanCollector:function(e){if(e._revokes.forEach(function(e){return e()}),e._getprops=babelHelpers.toConsumableArray(e._getprops),e._setprops=babelHelpers.toConsumableArray(e._setprops),e._states.length>0){this.each(e._states,function(e,t){t.finalizing=!0});for(var t=e._states.length-1;t>=0;t--){var r=e._states[t];!1===r._modified&&(Array.isArray(r._data)?esprop.hasArrayChanges(r)&&esprop.markChanged(r):esprop.hasObjectChanges(r)&&esprop.markChanged(r))}}},each:function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)t(r,e[r]);else for(var o in e)t(o,e[o])}},State=function e(t,r,o){babelHelpers.classCallCheck(this,e),this._data=r,this._parent=t,this._children={},this._modified=!1,this._copy=null,this._prop="",this._finalized=!1,this._collector=o},Esstate=function e(t,r,o,i){babelHelpers.classCallCheck(this,e),this._modified=!1,this._hasCopy=!1,this._parent=t,this._data=o,this._proxy=r,this._copy=void 0,this._collector=i,this._finished=!1,this._finalizing=!1,this._finalized=!1,this._prop=""},proxy={markChanged:function(e){e._modified||(e._modified=!0,e._copy=util.shallowCopy(e._data),Object.assign(e._copy,e._children),e._parent&&this.markChanged(e._parent))},createProxy:function(e,t,r){var o=Proxy.revocable(new State(t,r,e),handler),i=o.proxy,n=o.revoke;return e._revokes.push(n),i}},esprop={createProxy:function(e,t,r){var o=this,i=util.shallowCopy(r);util.each(r,function(e){Object.defineProperty(i,""+e,o.createPropertyProxy(""+e))});var n=new Esstate(t,i,r,e);return this.createHiddenProperty(i,_const.PROXYSTATE,n),e._states.push(n),i},createPropertyProxy:function(e){return{configurable:!0,enumerable:!0,get:function(){return eshandler.get(this[_const.PROXYSTATE],e)},set:function(t){eshandler.set(this[_const.PROXYSTATE],e,t)}}},createHiddenProperty:function(e,t,r){e&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0})},hasObjectChanges:function(e){var t=Object.keys(e._data),r=Object.keys(e._proxy);return!this.shallowEqual(t,r)},hasArrayChanges:function(e){var t=e._proxy;if(t.length!==e._data.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)},prepareCopy:function(e){e._hasCopy||(e._hasCopy=!0,e._copy=util.shallowCopy(e._data))},shallowEqual:function(e,t){if(util.is(e,t))return!0;if("object"!==babelHelpers.typeof(e)||null===e||"object"!==babelHelpers.typeof(t)||null===t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++)if(!hasOwnProperty.call(t,r[i])||!util.is(e[r[i]],t[r[i]]))return!1;return!0},source:function(e){return e._hasCopy?e._copy:e._data},markChanged:function(e){e._modified||(e._modified=!0,e._parent&&this.markChanged(e._parent))}},handler={get:function(e,t){if(t===_const.PROXYSTATE)return e;var r=e._data[t],o=!1;if(e._modified)(r=e._copy[t])===e._data[t]&&util.isProxyable(r)&&(r=e._copy[t]=proxy.createProxy(e._collector,e,r),util.setPropName(r[_const.PROXYSTATE],t),e._collector._addUseProp(r[_const.PROXYSTATE]._prop),o=!0);else if(e._children[t])r=e._children[t],o=!0;else{var i=e._data[t];!util.isProxy(i)&&util.isProxyable(i)&&(r=e._children[t]=proxy.createProxy(e._collector,e,i),util.setPropName(r[_const.PROXYSTATE],t),e._collector._addUseProp(r[_const.PROXYSTATE]._prop),o=!0)}return o||util.isProxyProp(t)&&e._collector._addUseProp(e._prop+"."+t),r},set:function(e,t,r){if(e._data[t]!==r&&e._collector._addSetProp(e._prop+"."+t),!e._modified){if(t in e._data&&util.is(e._data[t],r)||util.has(e._children,t)&&e._children[t]===r)return e._collector._removeSetProp(e._prop+"."+t),!0;e._collector._immutable&&proxy.markChanged(e)}return e._collector._immutable?e._copy[t]=r:e._data[t]=r,!0},has:function(e,t){return t in e._data},ownKeys:function(e){return Reflect.ownKeys(e._data)},deleteProperty:function(e,t){return!0},getOwnPropertyDescriptor:function(e,t){var r=e._modified?e._copy:util.has(e._children,t)?e._children:e._data,o=Reflect.getOwnPropertyDescriptor(r,t);return!o||Array.isArray(r)&&"length"===t||(o.configurable=!0),o},defineProperty:function(){throw new Error("Immer does not support defining properties on draft objects.")}},eshandler={get:function(e,t){if(!0===e._finished)throw new Error("Cannot use a proxy that has been revoked."+JSON.stringify(e._copy||e._data));var r=esprop.source(e)[t],o=!1;return!e._finalizing&&r===e._data[t]&&util.isProxyable(r)?(esprop.prepareCopy(e),e._copy[t]=esprop.createProxy(e._collector,e,r)):(o||util.isProxyProp(t)&&e._collector._addUseProp(e._prop+"."+t),r)},set:function(e,t,r){if(!0===e._finished)throw new Error("Cannot use a proxy that has been revoked."+JSON.stringify(e._copy||e._data));if(e._data[t]!==r&&e._collector._addSetProp(e._prop+"."+t),!e._modified){if(util.is(esprop.source(e)[t],r))return void e._collector._removeSetProp(e._prop+"."+t);esprop.markChanged(e),esprop.prepareCopy(e)}e._collector._immutable?e._copy[t]=r:e._data[t]=r}},Collector=function(){function e(t){var r=t.data,o=t.fn,i=t.precise,n=void 0===i?3:i,a=t.immutable,s=void 0===a||a,l=t.collect,c=void 0===l||l;babelHelpers.classCallCheck(this,e),this.fn=o,this._revokes=[],this._states=[],this._precise=n+1,this._root=issupportproxy?proxy.createProxy(this,null,r):esprop.createProxy(this,null,r),this._getprops=new Set,this._setprops=new Set,this._immutable=s,this._collect=c}return babelHelpers.createClass(e,[{key:"getUsedPros",value:function(){return this._getprops}},{key:"getChangedProps",value:function(){return this._setprops}},{key:"invoke",value:function(t,r){var o=this,i=null,n=null,a=!1;return t instanceof e?(a=!0,i=this.fn.call(r||{},this._root,t._root)):i=this.fn.call(r||{},this._root,t),void 0!==i&&i!==this._root?i.then?i.then(function(e){return n=util.finalize(e),util.cleanCollector(o),a&&(util.finalize(t._root),util.cleanCollector(t)),n}):(n=util.finalize(i),util.cleanCollector(this),a&&(util.finalize(t._root),util.cleanCollector(t)),n):(n=util.finalize(this._root),util.cleanCollector(this),a&&(util.finalize(t._root),util.cleanCollector(t)),n)}},{key:"_addUseProp",value:function(e){this._collect&&this._getprops.add(e.split(".").splice(0,this._precise).join("."))}},{key:"_addSetProp",value:function(e){this._collect&&this._setprops.add(e)}},{key:"_removeSetProp",value:function(e){this._collect&&this._setprops.delete(e)}}]),e}(),_default=Collector;exports.default=_default;},function(module,exports,require,babelHelpers){"use strict";function $$log(){console.log("%c".concat(arguments.length<=0?void 0:arguments[0]),"color:#A3A3A3;font-size:12px")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.$$log=$$log;},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var EVENTTYPES={HTMLEvents:"load,unload,abort,error,select,change,submit,reset,focus,blur,resize,scroll",MouseEvent:"click,mousedown,mouseup,mouseover,mousemove,mouseout",UIEvent:"DOMFocusIn,DOMFocusOut,DOMActivate",MutationEvent:"DOMSubtreeModified,DOMNodeInserted,DOMNodeRemoved,DOMNodeRemovedFromDocument,DOMNodeInsertedIntoDocument,DOMAttrModified,DOMCharacterDataModified"},UNBUBBLINGEVENT=["unload","abort","error","scroll","focus","blur","DOMNodeRemovedFromDocument","DOMNodeInsertedIntoDocument","progress","load","loadend","pointerenter","pointerleave","rowexit","stop","finish","bounce","afterprint","propertychange","filterchange","readystatechange","losecapture","dragdrop","dragenter","dragexit","draggesture","dragover","RadioStateChange","close","command","contextmenu","overflow","overflowchanged","underflow","popuphidden","popuphiding","popupshowing","popupshown","commandupdate"];function eventHandler(e){var t=e.currentTarget.events[e.type];for(var n in t)t[n].call(e.currentTarget,e)}var helper={isEvent:function(e){var t={type:e,interfaceName:null};for(var n in EVENTTYPES)if(-1!==EVENTTYPES[n].indexOf(e)){t.interfaceName=n;break}return t},trigger:function(e,t,n){var r=helper.isEvent(t);if(r.interfaceName){var o=document.createEvent(r.interfaceName);switch(r.interfaceName){case"MouseEvent":o.initMouseEvent(t,!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);break;case"HTMLEvents":o.initEvent(t,!0,!1,window);break;case"UIEvents":o.initUIEvents(t,!0,!1,window,null);break;case"MutationEvent ":o.initMutationEvent(t,!0,!1,window,null,null,null,null)}e.dispatchEvent(o)}else{var a=document.createEvent("CustomEvent");a.initCustomEvent(t,!0,!0,n),e.dispatchEvent(a)}return e},canBubbleUp:function(e){return-1===UNBUBBLINGEVENT.indexOf(e)},bind:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.events||(e.events={}),e.events[t]?e.events[t].push(n):(e.events[t]=[],e.events[t].push(n)),e.addEventListener(t,eventHandler,r),e},unbind:function(e,t,n){if(e.events)if(t&&""!==t){var r=e.events[t];r&&(e.removeEventListener(t,eventHandler,!1),n?r.splice(r.indexOf(n),1):r.length=0)}else{e.events;Reflect.ownKeys(e.events).forEach(function(t){e.removeEventListener(t,eventHandler,!1),e.events[t].length=0})}return e}},_default=helper;exports.default=_default;},function(module,exports,require,babelHelpers){undefined},function(module,exports,require,babelHelpers){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={DDM:!0,util:!0,request:!0,ajax:!0,get:!0,patch:!0,post:!0,put:!0,BondViewGroup:!0,StaticViewGroup:!0,View:!0,ViewConnector:!0,ViewGroup:!0,Modules:!0,DataSet:!0,Service:!0,TransactDataSet:!0,Dispatcher:!0,Passable:!0,config:!0};Object.defineProperty(exports,"request",{enumerable:!0,get:function(){return _request.default}}),Object.defineProperty(exports,"ajax",{enumerable:!0,get:function(){return _request.ajax}}),Object.defineProperty(exports,"get",{enumerable:!0,get:function(){return _request.get}}),Object.defineProperty(exports,"patch",{enumerable:!0,get:function(){return _request.patch}}),Object.defineProperty(exports,"post",{enumerable:!0,get:function(){return _request.post}}),Object.defineProperty(exports,"put",{enumerable:!0,get:function(){return _request.put}}),Object.defineProperty(exports,"BondViewGroup",{enumerable:!0,get:function(){return _view.BondViewGroup}}),Object.defineProperty(exports,"StaticViewGroup",{enumerable:!0,get:function(){return _view.StaticViewGroup}}),Object.defineProperty(exports,"View",{enumerable:!0,get:function(){return _view.View}}),Object.defineProperty(exports,"ViewConnector",{enumerable:!0,get:function(){return _view.ViewConnector}}),Object.defineProperty(exports,"ViewGroup",{enumerable:!0,get:function(){return _view.ViewGroup}}),Object.defineProperty(exports,"Modules",{enumerable:!0,get:function(){return _loader.Modules}}),Object.defineProperty(exports,"DataSet",{enumerable:!0,get:function(){return _dataset.DataSet}}),Object.defineProperty(exports,"Service",{enumerable:!0,get:function(){return _dataset.Service}}),Object.defineProperty(exports,"TransactDataSet",{enumerable:!0,get:function(){return _dataset.TransactDataSet}}),Object.defineProperty(exports,"Dispatcher",{enumerable:!0,get:function(){return _dispatcher.Dispatcher}}),Object.defineProperty(exports,"Passable",{enumerable:!0,get:function(){return _passable.default}}),Object.defineProperty(exports,"config",{enumerable:!0,get:function(){return _config.Config}}),exports.default=exports.util=exports.DDM=void 0;var _request=babelHelpers.interopRequireWildcard(require(0)),_view=require(1),_loader=babelHelpers.interopRequireWildcard(require(2)),_dataset=require(3),_factory=babelHelpers.interopRequireDefault(require(4)),_ddm=babelHelpers.interopRequireDefault(require(5)),_dispatcher=require(6),_util=require(7),_passable=babelHelpers.interopRequireDefault(require(8)),_config=require(9),_annotation=require(10);Object.keys(_annotation).forEach(function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(_exportNames,e)||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _annotation[e]}}))});var ada={modules:_loader.Modules,boot:_factory.default.boot,unpack:function(e){_loader.default.decompress(e)},installModule:function(e,t){_loader.Modules.set(e,t)}},util={randomid:_util.randomid,hashCode:_util.hashCode,isString:_util.isString,isFunction:_util.isFunction,isEqual:_util.isEqual,isObject:_util.isObject,isPlainObject:_util.isPlainObject,isArray:_util.isArray,isQueryString:_util.isQueryString,excuteStyle:_util.excuteStyle,encodeHTML:_util.encodeHTML,extend:_util.extend,clone:_util.clone};exports.util=util;var DDM={setDefaultMacro:_ddm.default.setDefaultMacro,setDefaultAssignDirective:_ddm.default.setDefaultAssignDirective};exports.DDM=DDM,window.Ada=ada;var _default=ada;exports.default=_default;}],"adajs");