"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_class,_adajs=require("adajs"),_state=babelHelpers.interopRequireDefault(require("site/content/state.js")),_prism=babelHelpers.interopRequireDefault(require("lib/prism.js")),_loading=babelHelpers.interopRequireDefault(require("site/loading/index.js"));require("lib/prism.css");var Content=(_dec=(0,_adajs.view)({className:"content",template:"site/content/template.html",style:"site/content/style.scss",dataset:{service:_state.default},module:"site/content/index.js"}))(_class=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onready",value:function(){var e=this;return this.addChild(_loading.default,{container:this.getElement()}).then(function(t){e.commit("get").then(function(){if(!e.isRemoved()){var a=[];babelHelpers.toConsumableArray(e.getElement().querySelectorAll("h2")).forEach(function(e){a.push({title:e.innerText,id:e.getAttribute("id"),subs:[],element:e})}),babelHelpers.toConsumableArray(e.getElement().querySelectorAll("h3")).forEach(function(e){for(var t=e;t&&(!t.tagName||"h2"!==t.tagName.toLowerCase());)t=t.previousSibling;t&&t.tagName&&"h2"===t.tagName.toLowerCase()&&a.some(function(a){if(a.element===t)return a.subs.push({title:e.innerText,id:e.getAttribute("id")}),!0})}),_prism.default.highlightAllUnder(e.getElement()),e.autoLoadModule(),e.dispatchEvent("setsubmenu",a)}e.removeChild(t)})})}},{key:"autoLoadModule",value:function(){var e=this;babelHelpers.toConsumableArray(this.getElement().querySelectorAll(".ada-module")).reduce(function(t,a){return t.then(function(){var t=a.dataset.type,r=a.dataset.option?JSON.parse(a.dataset.option):{};return imports(t).then(function(t){e.addChild(t,{parameter:r,container:a})})})},Promise.resolve())}}]),t}(_adajs.StaticViewGroup))||_class,_default=Content;exports.default=_default;