"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_dec4,_class,_adajs=require("adajs"),_menu=babelHelpers.interopRequireDefault(require("menu.json")),_git=babelHelpers.interopRequireDefault(require("site/container/icons/git.icon")),_npm=babelHelpers.interopRequireDefault(require("site/container/icons/npm.icon")),_menu2=babelHelpers.interopRequireDefault(require("site/container/icons/menu.icon")),_arrow=babelHelpers.interopRequireDefault(require("site/container/icons/arrow.icon"));function _getLinks(e){var t=[];return e.forEach(function(e){e.link&&t.push(e),e.list&&(t=t.concat(_getLinks(e.list)))}),t}var ContainerService=(_dec=(0,_adajs.compute)("links"),_dec2=(0,_adajs.action)("open"),_dec3=(0,_adajs.action)("flip"),_dec4=(0,_adajs.action)("setsubmenu"),_class=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"defaultData",value:function(){var e=_adajs.util.clone(_menu.default);return e[0].active=!0,e[0].list[0].active=!0,e[0].list[0].list[0].active=!0,{gitIcon:_git.default,npmIcon:_npm.default,menuIcon:_menu2.default,arrowIcon:_arrow.default,menu:e,current:e[0],currentLeaf:e[0].list[0].list[0],submenu:[]}}},{key:"onupdate",value:function(e,t){return e}},{key:"resetItem",value:function(e){var t=this;e.forEach(function(e){e.active=!1,e.list&&t.resetItem(e.list)})}},{key:"activeLink",value:function(e,t){var r=[];return function e(n){var a=n.some(function(n){return r.push(n),n.name===t.name||(n.list?e(n.list):(r.pop(),!1))});return a||r.pop(),a}(e),r}},{key:"getLinks",value:function(e){return _getLinks(e.menu)}},{key:"open",value:function(e,t){var r=e.menu.find(function(e){return e.name===t.name});return r&&(this.resetItem(e.menu),r.active=!0,r.list[0].active=!0,r.list[0].list[0].active=!0,e.current=r,e.currentLeaf=r.list[0].list[0]),e}},{key:"flip",value:function(e,t){this.resetItem(e.menu);var r=this.activeLink(e.menu,t);return r.forEach(function(e){return e.active=!0}),e.current=r[0],e.currentLeaf=r[r.length-1],e}},{key:"setSubMenu",value:function(e,t){return e.submenu=t,e}}]),t}(_adajs.Service),babelHelpers.applyDecoratedDescriptor(_class.prototype,"getLinks",[_dec],Object.getOwnPropertyDescriptor(_class.prototype,"getLinks"),_class.prototype),babelHelpers.applyDecoratedDescriptor(_class.prototype,"open",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"open"),_class.prototype),babelHelpers.applyDecoratedDescriptor(_class.prototype,"flip",[_dec3],Object.getOwnPropertyDescriptor(_class.prototype,"flip"),_class.prototype),babelHelpers.applyDecoratedDescriptor(_class.prototype,"setSubMenu",[_dec4],Object.getOwnPropertyDescriptor(_class.prototype,"setSubMenu"),_class.prototype),_class),_default=ContainerService;exports.default=_default;